From haible  Mon Mar  8 23:08:07 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26692; Mon, 8 Mar 93 23:08:07 +0100
Date: Mon, 8 Mar 93 23:08:07 +0100
From: haible (Bruno Haible)
Message-Id: <9303082208.AA26692@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: The official CLISP announcement

This is CLISP, a Common Lisp implementation.

CLISP is mostly CLtL1 compliant. For those who want to use CLOS, I also
provide a port of PCL. No other features of CLtL2 or dpANS CL are
currently supported.

The newest versions will always be available via anonymous ftp from
ma2s2.mathematik.uni-karlsruhe.de [129.13.115.2], directory /pub/lisp/clisp/.

-------------------------------------------------------------------------------

                        Common Lisp CLISP

Common Lisp is
  * a convential programming language and an AI language
  * interactive
  * a Lisp for professional use

Common Lisp programs are
  * easy to test (interactive)
  * easy to maintain (depending on programming style)
  * portable (there is a standard for the language and the library functions)

Our Common Lisp CLISP
  * needs only 1.5 MB of memory
  * implements 99% of the standard
  * can call your preferred editor
  * is freely distributable

Common Lisp provides
  * clear syntax, carefully designed semantics
  * several data types: numbers, strings, arrays, lists, characters, symbols,
    structures, streams etc.
  * runtime typing: the programmer needn't bother about type declarations,
    but he gets notified on type violations.
  * many generic functions:
    88 arithmetic functions for all kinds of numbers (integers, ratios,
    floating point numbers, complex numbers),
    44 search/filter/sort functions for lists, arrays and strings
  * automatic memory management (garbage collection)
  * packaging of programs into modules
  * macros: every programmer can make his own language extensions

Our Common Lisp CLISP provides
  * an interpreter
  * a compiler which makes execution of programs 5 times faster
  * all data types with unlimited size (the size need never be declared,
    the size of lists and arrays may be changed dynamically)
  * integers of arbitrary length, unlimited floating point number precision
  * 594 library functions, 542 of them written in C

Get it via anonymous ftp from ma2s2.mathematik.uni-karlsruhe.de [129.13.115.2],
directory /pub/lisp/clisp/, or contact
Bruno Haible <haible@ma2s2.mathematik.uni-karlsruhe.de>.

-------------------------------------------------------------------------------
From @NYX.UNI-KONSTANZ.DE:hoehle@post.inf-wiss.ivp.uni-konstanz.de  Tue Mar  9 15:47:17 1993
Return-Path: <@NYX.UNI-KONSTANZ.DE:hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from NYX.UNI-KONSTANZ.DE by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27417; Tue, 9 Mar 93 15:47:17 +0100
Received: from inf-wiss.ivp.uni-konstanz.de by NYX.UNI-KONSTANZ.DE
   (IBM VM SMTP V2R2) with TCP; Tue, 09 Mar 93 15:47:06 MEZ
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA01183; Tue, 9 Mar 93 15:46:31 +0100
Date: Tue, 9 Mar 93 15:46:31 +0100
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
Message-Id: <9303091446.AA01183@inf-wiss.ivp.uni-konstanz.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Noch ein Test

YATS! (yet another test suite)

	Joerg.
hoehle@inf-wiss.ivp.uni-konstanz.de
From mycroft@gnu.ai.mit.edu  Wed Mar 10 06:18:56 1993
Return-Path: <mycroft@gnu.ai.mit.edu>
Received: from albert.gnu.ai.mit.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA28978; Wed, 10 Mar 93 06:18:56 +0100
Received: from hal.gnu.ai.mit.edu by albert.gnu.ai.mit.edu (5.65/4.0) with SMTP
	id <AA23594@albert.gnu.ai.mit.edu>; Wed, 10 Mar 93 00:19:12 -0500
Received: by hal.gnu.ai.mit.edu (AIX 3.2/UCB 5.64/4.0)
	id <AA33611@hal.gnu.ai.mit.edu>; Wed, 10 Mar 1993 00:18:41 -0500
From: mycroft@gnu.ai.mit.edu
Message-Id: <9303100518.AA33611@hal.gnu.ai.mit.edu>
Subject: 386BSD port
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Wed, 10 Mar 1993 00:18:40 -0500 (EST)
X-Mailer: ELM [version 2.4 PL8]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 1138      


After running configure, there are several things which need to be
changed in unixconf.h:

*** unixconf.h.~1~	Tue Mar  9 17:18:16 1993
--- unixconf.h	Tue Mar  9 18:21:51 1993
***************
*** 50,50 ****
! #undef STDC_HEADERS
--- 50,50 ----
! #define STDC_HEADERS
***************
*** 149,149 ****
! #define RETFREETYPE int
--- 149,149 ----
! #define RETFREETYPE void
***************
*** 179,179 ****
! #define RETABORTTYPE int
--- 179,179 ----
! #define RETABORTTYPE void
***************
*** 187,187 ****
! #define GETENV_CONST
--- 187,187 ----
! #define GETENV_CONST const

*All* of this junk is due to some bogosity in AC_STDC_HEADERS; it
explicitly tests whether or not toupper() modifies characters which are
not lower case.  I can't imagine why it does this, and CLISP doesn't
even appear to use toupper().

Now, since STDC_HEADERS is not defined, later checks don't #include
<stdlib.h>, and a bunch of prototypes are not checked.  Thus, the other
#defines end up being wrong.  But we really need to #define
STDC_HEADERS for other reasons, and if we don't change the prototypes
we lose during compilation.

Does that make sense?

From loewenst@blaze.rutgers.edu  Wed Mar 10 17:38:07 1993
Return-Path: <loewenst@blaze.rutgers.edu>
Received: from blaze.rutgers.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03230; Wed, 10 Mar 93 17:38:07 +0100
Received: by blaze.rutgers.edu (5.59/SMI4.0/RU1.5/3.08) 
	id AA10618; Wed, 10 Mar 93 11:38:07 GMT
Date: Wed, 10 Mar 93 11:38:07 GMT
From: loewenst@blaze.rutgers.edu (David Loewenstern)
Message-Id: <9303101638.AA10618@blaze.rutgers.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Error in #\#
Reply-To: loewenst@paul.rutgers.edu


CLISP appears to have a problem with #\#-dispatching.  I have noticed
two places where this is an issue:

1. You cannot input an array in the form #(...) to top-level.  Arrays
do print normally in this format (assuming *print-array* is set
correctly, I suppose).

2. I got a copy of Richard Waters' Series macro package, and tried to
install it under CLISP.  Installation progressed normally, but the
package-defined reader-macros #Z and #M can be neither read (from
top-level) nor printed.  Series installs normally under Allegro CL,
and has been stable for at least a year, so I don't believe it's the
fault of the package. 

This is under DOS.

These opinions are shareware.  If you like the product,
please send your $0.02 to
               David Loewenstern
<loewenst@paul.rutgers.edu>||<d.loewenstern@att.com>





From haible  Wed Mar 10 19:44:04 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03632; Wed, 10 Mar 93 19:44:04 +0100
Date: Wed, 10 Mar 93 19:44:04 +0100
From: haible (Bruno Haible)
Message-Id: <9303101844.AA03632@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  Error in #\#

> CLISP appears to have a problem with #\#-dispatching.
> 1. You cannot input an array in the form #(...) to top-level.  Arrays
> do print normally in this format.

There is no problem with #\#. But most of the objects produced by #\# read
macros (arrays, pathnames, readtables etc.) are not self-evaluating forms
(cf. CLtL section 5.1.1). You cannot use them as forms, you must quote them.

Bruno Haible
From haible  Wed Mar 10 19:49:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03677; Wed, 10 Mar 93 19:49:43 +0100
Date: Wed, 10 Mar 93 19:49:43 +0100
From: haible (Bruno Haible)
Message-Id: <9303101849.AA03677@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Series package


> 2. I got a copy of Richard Waters' Series macro package, and tried to
> install it under CLISP.  Installation progressed normally, but the
> package-defined reader-macros #Z and #M can be neither read (from
> top-level) nor printed.

The SET-DISPATCH-MACRO-CHARACTER call is buried in the function
SERIES::INSTALL, which you must call after loading the series package:

clisp
(compile-file "series")
(load "series")
(series::install)
(compile-file "seriestest")
(load "seriestest")

For the Series package to run in CLISP, there are patches needed, however.
I have put them in /pub/lisp/clisp/packages on ma2s2.mathematik.uni-karlsruhe.de
as well as the whole series package itself.

Bruno Haible
From hyun@aristotle.ils.nwu.edu  Thu Mar 11 22:09:20 1993
Return-Path: <hyun@aristotle.ils.nwu.edu>
Received: from aristotle.ils.nwu.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12192; Thu, 11 Mar 93 22:09:20 +0100
Received: by aristotle.ils.nwu.edu (4.1/SMI-ACNS-1.03)
	id AA26420; Thu, 11 Mar 93 14:49:09 CST
From: hyun@aristotle.ils.nwu.edu (Seungseok Hyun)
Message-Id: <9303112049.AA26420@aristotle.ils.nwu.edu>
Subject: CLISP with ILISP in Emacs
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Thu, 11 Mar 93 14:49:08 CST
In-Reply-To: <9303092210.AA28238@ma2s2.mathematik.uni-karlsruhe.de>; from "Bruno Haible" at Mar 9, 93 11:10 pm
X-Mailer: ELM [version 2.3 PL11]

Hi!

I am trying to figure out how to use CLISP with ILISP from CMU. (ILISP
is for interfacing Emacs and a LISP program; I think ILISP offers
one of the best LISP environments.)

In summary, I should know how to fire "clisp" using
"start-process" in Emacs. When I try the following: 

   (start-process "woof" "*scratch*" "/home/hyun/local/bin/clisp" "nil")

in a *scratch* buffer, I got an error message something like

   Process woof exited abnormally with code 1.

Since ILISP uses "start-process", ILISP can't fire clisp, either. 

I initially tried to do this on my 486 Linux and I thought that it might
be a Linux problem, so I ftp'ed CLISP for Sparc but got the same result on
a Sparc.

Other LISP programs like Lucid Lisp, XLisp, Franz Lisp can be fired
by the "start-process" in Emacs. What makes CLISP different???  Any idea??? 
Thanks.

Seung
-- 
Seungseok Hyun                     The Institute for the Learning Sciences
(hyun@ils.nwu.edu)                       Northwestern University
From matthias@intellektik.informatik.th-darmstadt.de  Fri Mar 12 11:22:38 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13131; Fri, 12 Mar 93 11:22:38 +0100
Received: from kiwi.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA16217
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Fri, 12 Mar 1993 11:22:39 +0100
Received: by kiwi.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA11641; Fri, 12 Mar 93 11:22:38 +0100
Date: Fri, 12 Mar 93 11:22:38 +0100
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9303121022.AA11641@kiwi.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  CLISP with ILISP in Emacs

Hi,

I don't know exactly, what your "clisp"-script" looks like, but I guess
the last "nil" in the 'start-process' might be the problem.
I've just tried '(start-process "woof" "*scratch*" "clisp" "")' and it
worked. (Sparc1, emacs 18.56, SunOS 4.1.1)
Changing the first line of your "clisp"-script form "#!/bin/sh" to
"#!/bin/sh -xv" might give you some hints.

I've recently tried to get clisp and ILISP work together, but due to lack of
time, I did not succeed. I get an interactive clisp-buffer, but mode reamins
:load forever. After M-x panci-lisp, I can reset clisp and type and
evaluate expressions in its buffer - but that's all :(. 
I think there needs some work to be done to patch clisp.lisp, to make all the 
other ILISP stuff work.
If someone out there did it ... I'd be *very* pleased to receive a copy ;)

--Matthias

------------------------------------------------------------------------------
Matthias Lindner
FG Intellektik, FB Informatik
Technische Hochschule Darmstadt
Alexanderstr.10, D-6100 Darmstadt
TEL: +49 6151 166651
FAX: +49 6151 135326
NET: matthias@intellektik.informatik.th-darmstadt.de
------------------------------------------------------------------------------

From najem@cs.uiuc.edu  Fri Mar 12 19:37:28 1993
Return-Path: <najem@cs.uiuc.edu>
Received: from herodotus.cs.uiuc.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14010; Fri, 12 Mar 93 19:37:28 +0100
Received: by herodotus.cs.uiuc.edu
	(5.65c/IDA-1.2.8) id AA15215; Fri, 12 Mar 1993 12:35:26 -0600
Date: Fri, 12 Mar 1993 12:35:26 -0600
From: "Ziad H. Najem" <najem@cs.uiuc.edu>
Message-Id: <199303121835.AA15215@herodotus.cs.uiuc.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: najem@cs.uiuc.edu
Subject: a Semi-working CLISP with ILISP in Emacs


Hi, 

I Have hacked an ilisp-mode to get clisp working with ilisp. 
I'm not very familier with emacs-lisp so the following is actually
done by looking at other code and trial-and-error. But it works for
the most part. 

The ilisp package resides in /usr/emacs/ilisp
The clisp package resides in /usr/local/lib/lisp

The necessery code is spread into two files. One part is in
$HOME/.emacs and the other is in /usr/local/lib/lisp/emacs.el. I can
start lisp from emacs by executing the 'zlisp' extended command (M-X
zlisp) or by issuing the following script from shell

#!/bin/bash
exec emacs -l /usr/local/lib/lisp/emacs.el -f zlisp

Finally, attached is what appears in my $HOME/.emacs and
/usr/local/lib/ilisp/emacs.el. Please report any problems to me and I
would be interested in seeing any enhancements. 

Hope that helps, 

 - Ziad
   najem@cs.uiuc.edu


***********************************************************************
		  Begin Code taken from $HOME/.emacs
***********************************************************************

(autoload 'zlisp "/usr/local/lib/lisp/emacs" "Z-Lisp" t)

(set-default 'auto-mode-alist
	     (append '(("\\.lsp$" . lisp-mode)) 
		     '(("\\.cl$" . lisp-mode))
		     auto-mode-alist))

(defvar ziad:cl-indent-loaded nil)
(setq lisp-mode-hook 
      '(lambda () 
	(require 'zlisp "/usr/local/lib/lisp/emacs")
	(if ziad:cl-indent-loaded
	    nil
	  (load "cl-indent")
	  (setq ziad:cl-indent-loaded t))
	(turn-on-auto-fill)
	(setq fill-column 75)
	(setq comment-column 25)
	(setq completion-ignored-extensions
	 (append '(".lib" ".fas") completion-ignored-extensions))
	(setup-gnu-indentation)
	))

(defun setup-gnu-indentation ()
  (let ((tag 'common-lisp-indent-hook))

    (put 'defpackage      tag 1)
    (put 'if              tag 2)

;;; For Minerva in Lisp
    (put 'internalize      tag (get 'do tag))
    (put 'in-kb            tag '(4 2))
    (put 'if-prolog        tag (get 'if tag))
    (put 'if-prolog-let    tag '(6 6 4 2))
    (put 'when-prolog      tag (get 'when tag))
    (put 'when-prolog-let  tag '(6 4 2))
    (put 'unless-prolog    tag (get 'unless tag))
    (put 'while-prolog     tag (get 'when tag))
    (put 'while-prolog-let tag (get 'do tag))
    (put 'var-let          tag (get 'let tag))
    (put 'lisp-prover      tag (get 'defun tag))
    (put 'p-unify          tag (get 'defun tag))
    (setq lisp-indent-hook 'common-lisp-indent-hook)
    ))
***********************************************************************
		   End Code taken from $HOME/.emacs
***********************************************************************



***********************************************************************
	  Begin Code taken from /usr/local/lib/lisp/emacs.el
***********************************************************************

(setq load-path (cons "/usr/emacs/ilisp" load-path))

(setq ilisp-load-hook 
  '(lambda ()
    (setq ilisp-prefix "\C-c"
	  zlisp-program "/usr/local/lib/lisp/lisp.run -q -M /usr/local/lib/lisp/lispinit.mem -i /usr/local/lib/lisp/cltl2")))

(require 'ilisp)

(defun zlisp-check-prompt (old new)
  "Compare the break level printed at the beginning of the prompt."
  (let* ((old-level (if (and old (string-match "[0-9]+" old))
		       (string-to-int (substring old (match-beginning 0) 
						 (match-end 0)))
		       0))

	 (new-level (if (string-match "[0-9]+" new)
			(string-to-int (substring new (match-beginning 0) 
						  (match-end 0)))
			0)))
    (<= new-level old-level)))


(defdialect zlisp "Linux CLisp"
  clisp
  (ilisp-load-init 'zlisp "/usr/emacs/ilisp/clisp.lisp")
  
  (setq 
   ilisp-load-or-send-command 
   "(and (or (print \"%s\") t) (load \"%s\"))"
   
   ilisp-binary-extension "fas"
   ilisp-motd "Zodiac-Lisp V%s"
   comint-prompt-regexp "^[^> \t]*>"
   ilisp-other-prompt "^[ \t]+"
   comint-fix-error "unwind"
   comint-continue "continue"	
   comint-interrupt-regexp "\*\* \- Continuable Error"
   lisp-wait-p t
   lisp-no-popper nil
	      
   comint-prompt-status 
   (function (lambda (old line) 
	       (comint-prompt-status 
		old line 'zlisp-check-prompt)))))


(provide 'zlisp)
(require 'cl)
(load "fi/utils.el")
(load "fi/indent.el")


***********************************************************************
	   End Code taken from /usr/local/lib/lisp/emacs.el
***********************************************************************
From haible  Sat Mar 20 00:05:12 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27414; Sat, 20 Mar 93 00:05:12 +0100
Date: Sat, 20 Mar 93 00:05:12 +0100
From: haible (Bruno Haible)
Message-Id: <9303192305.AA27414@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: New CLISP version

There is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

The list of supported platforms now include Amiga 3000/4000 and Atari TT.
The installation procedure on Unix is now simpler.

>From the change log:

User visible changes
--------------------

* Replaced variable *TEMPFILE* by a function EDITOR-TEMPFILE.

Portability
-----------

* Unix version: Corrected detection of ANSI C header files.

* Unix version: Check whether signal handlers are automatically reinstalled
  when activated.

* Made readline library ANSI C compliant and (on Unix) auto-configuring.

* In case there is no room for three extra bits in a symbol pointer,
  allocate three stack words per binding in a VAR frame (instead of two stack
  words). This completes the Amiga 3000/4000 version.

* Completed memory model SPVW_PURE_BLOCKS: There is a large contiguous memory
  area for each kind of Lisp object. This model is used only if memory can
  be allocated at prescribed addresses, for example on Unix with mmap().

* More 386BSD support.

Other modifications
-------------------

* Remove limit on the number of files that may be specified on the command
  line. Limit was 1000.

* Miscellaneous documentation updates.


Enjoy!
                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From UNM42E@IBM.rhrz.uni-bonn.de  Tue Mar 23 18:48:20 1993
Return-Path: <UNM42E@IBM.rhrz.uni-bonn.de>
Received: from IBM.rhrz.uni-bonn.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07519; Tue, 23 Mar 93 18:48:20 +0100
Message-Id: <9303231748.AA07519@ma2s2.mathematik.uni-karlsruhe.de>
Received: from DBNRHRZ1.BITNET by IBM.rhrz.uni-bonn.de (IBM VM SMTP V2R2)
   with BSMTP id 9209; Tue, 23 Mar 93 19:26:56 MEZ
Received: from DBNRHRZ1 (UNM42E) by DBNRHRZ1.BITNET (Mailer R2.08 R208004) with
 BSMTP id 1138; Tue, 23 Mar 93 19:26:55 MEZ
Date:         Tue, 23 Mar 93 19:26:19 MEZ
From: Michael Stoll <UNM42E@IBM.rhrz.uni-bonn.de>
Subject:      clisp-list Test
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

You may delete this message. It's only a test.
- Michael
From frankg@halcyon.halcyon.com  Mon Mar 29 04:42:20 1993
Return-Path: <frankg@halcyon.halcyon.com>
Received: from halcyon.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19129; Mon, 29 Mar 93 04:42:20 +0200
Received: by halcyon.com id AA21876
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Sun, 28 Mar 1993 18:47:07 -0800
Date: Sun, 28 Mar 1993 18:47:07 -0800
From: Frank Gleason <frankg@halcyon.halcyon.com>
Message-Id: <199303290247.AA21876@halcyon.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

Subject: CLX

Hi,
  Sorry if this question has an obvious answer I'm new to lisp. 

  When I try to compile and run CLX I get errors because I don't
  have a set of functions (module?) that begin with system::.
  I'm using clisp on Linux, I think the version is 2.6, and 
  pcl+clx.sept92f.


  Also if I get this working will garnet run under clisp?

  Thanks in advance
  Frank Gleason
  frankg@halcyon.com
From nils@guru.ims.uni-stuttgart.de  Mon Mar 29 22:24:25 1993
Return-Path: <nils@guru.ims.uni-stuttgart.de>
Received: from guru.ims.uni-stuttgart.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA22741; Mon, 29 Mar 93 22:24:25 +0200
Received: by guru.ims.uni-stuttgart.de (Smail3.1.28.1 #2)
	id m0ndRKX-0001bkC; Mon, 29 Mar 93 22:25 MET
Message-Id: <m0ndRKX-0001bkC@guru.ims.uni-stuttgart.de>
Date: Mon, 29 Mar 93 22:25 MET
From: nils@guru.ims.uni-stuttgart.de (Cornelis van der Laan)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLX


Frank Gleason wrote:

  When I try to compile and run CLX I get errors because I don't
  have a set of functions (module?) that begin with system::.
  I'm using clisp on Linux, I think the version is 2.6, and 
  pcl+clx.sept92f.

Symbols beginning with system:: are located in the system package
(and can be variables, functions or just unbound symbols).

I can't see any reference to the system package in my sources of 
CLX that are not conditionalized for lisp dialects that actually 
have the system package. Could you be more specific on what error 
message you get ?

Are you using the packages specially adapted to clisp (to be found
at the usual place in Karlsruhe) or the original sources ?

  Thanks in advance
  Frank Gleason
  frankg@halcyon.com


From frankg@halcyon.halcyon.com  Mon Mar 29 23:20:11 1993
Return-Path: <frankg@halcyon.halcyon.com>
Received: from halcyon.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA22851; Mon, 29 Mar 93 23:20:11 +0200
Received: by halcyon.com id AA19704
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Mon, 29 Mar 1993 13:20:00 -0800
Date: Mon, 29 Mar 1993 13:20:00 -0800
From: Frank Gleason <frankg@halcyon.halcyon.com>
Message-Id: <199303292120.AA19704@halcyon.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de


>>Frank Gleason wrote:

>>  When I try to compile and run CLX I get errors because I don't
>>  have a set of functions (module?) that begin with system::.
>>  I'm using clisp on Linux, I think the version is 2.6, and 
>>  pcl+clx.sept92f.
>>

>Symbols beginning with system:: are located in the system package
>(and can be variables, functions or just unbound symbols).

>I can't see any reference to the system package in my sources of 
>CLX that are not conditionalized for lisp dialects that actually 
>have the system package. Could you be more specific on what error 
>message you get ?

>Are you using the packages specially adapted to clisp (to be found
>at the usual place in Karlsruhe) or the original sources ?

 I should have done this in the first message you are right.

 I got the file pcl+clx.sept92f.clisp.tar.Z from gatekeeper.dec.com. 
 Clisp seems to be installed correctly (I installed and ran maxima).
 I am not at my machine with clisp so I can't copy the message exactly
 but here is the code segments that are the problem. Grepping for
 any of these (ie: grep big-endian *) in the clisp source comes up empty.

depdefs.lsp line 172

#+CLISP
(eval-when (compile eval load)
  (unless system::*big-endian* (pushnew :clx-little-endian *features*))
)

dependent.lsp line 1430

#+CLISP
(defun open-x-stream (host display protocol)
  protocol ;; unused
  (let ((stream (system::make-socket-stream host display)))
    (if (streamp stream)
      stream
      (error "Cannot connect to server: ~A:~D" host display))))

dependent.lsp line 1591

#+CLISP
(defun buffer-read-default (display vector start end timeout)
  (declare (type display display)
         (type buffer-bytes vector)
         (type array-index start end)
         (type (or null fixnum) timeout))
  #.(declare-buffun)
  (let ((stream (display-input-stream display)))
    (cond ((and (eql timeout 0) (not (listen stream))) :timeout)
          (t (system::read-n-bytes stream vector start (- end start)) nil)
) ) )

dependent.lsp line 1721

#+CLISP
(defun buffer-write-default (vector display start end)
  (declare (type buffer-bytes vector)
         (type display display)
         (type array-index start end))
  #.(declare-buffun)
  (system::write-n-bytes (display-output-stream display) vector start (- end start))
  nil
)

dependent.lsp line 2619

(defun resources-pathname ()
  (when #+(or unix mach) t
    #-(or unix mach) (search "Unix" (software-type) :test #'char-equal)
    (or #+(or excl CLISP (and lcl3.0 (not vax-vms)) CMU)
	(let ((string #-CMU (#+excl sys:getenv #+CLISP system::getenv
				    #+lcl3.0 lcl:environment-variable
				    "XENVIRONMENT")
		      #+CMU
		      (cdr (assoc :xenvironment ext:*environment-list*))))
	  (when string
	    (pathname string)))
	(merge-pathnames
	  (user-homedir-pathname)
	  (pathname 
	    (concatenate 'simple-string ".Xdefaults-"
			 #+excl (short-site-name)
			 #-excl (machine-instance)))))))

From nils@guru.ims.uni-stuttgart.de  Tue Mar 30 00:07:47 1993
Return-Path: <nils@guru.ims.uni-stuttgart.de>
Received: from guru.ims.uni-stuttgart.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA22969; Tue, 30 Mar 93 00:07:47 +0200
Received: by guru.ims.uni-stuttgart.de (Smail3.1.28.1 #2)
	id m0ndSwZ-0001alC; Tue, 30 Mar 93 00:08 MET
Message-Id: <m0ndSwZ-0001alC@guru.ims.uni-stuttgart.de>
Date: Tue, 30 Mar 93 00:08 MET
From: nils@guru.ims.uni-stuttgart.de (Cornelis van der Laan)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  

Frank Gleason wrote:
  
  >>Frank Gleason wrote:
  
  >>  When I try to compile and run CLX I get errors because I don't
  >>  have a set of functions (module?) that begin with system::.
  >>  I'm using clisp on Linux, I think the version is 2.6, and 
  >>  pcl+clx.sept92f.
  >>
  
  >Symbols beginning with system:: are located in the system package
  >(and can be variables, functions or just unbound symbols).
  
  >I can't see any reference to the system package in my sources of 
  >CLX that are not conditionalized for lisp dialects that actually 
  >have the system package. Could you be more specific on what error 
  >message you get ?
  
  >Are you using the packages specially adapted to clisp (to be found
  >at the usual place in Karlsruhe) or the original sources ?
  
   I should have done this in the first message you are right.
  
   I got the file pcl+clx.sept92f.clisp.tar.Z from gatekeeper.dec.com. 
   Clisp seems to be installed correctly (I installed and ran maxima).
   I am not at my machine with clisp so I can't copy the message exactly
   but here is the code segments that are the problem. Grepping for
   any of these (ie: grep big-endian *) in the clisp source comes up empty.
  
[ code deleted ]

You are using and old version of clisp; I've got a rather new 
one and its source sparkles from functions in the system package.

Basically, the system package is for non CL extensions and 
optimizations, like MAKE-SOCKET-STREAM or specialized i/o routines 
for faster communication with the Xserver. 

The best thing would be to get the newest version of clisp; 
alternatively you could delete the symbol CLISP from *FEATURES* 
so that the conditionals in the CLX source don't fire. CLX works 
slower then but works. Use (setq *features* (delete 'CLISP *features*))
to do so. And watch for the endianness of your machine, the i386 is 
little-endian (long long way for me to find that out...).

Nils.

----------------------------------------------------------------
Cornelis van der Laan -- nils@ims.uni-stuttgart.de
                      -- nils@guru.stgt.sub.org
# echo Knusper Knusper Knaeuschen > /etc/nologin
From haible  Tue Mar 30 00:11:09 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23012; Tue, 30 Mar 93 00:11:09 +0200
Date: Tue, 30 Mar 93 00:11:09 +0200
From: haible (Bruno Haible)
Message-Id: <9303292211.AA23012@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLX


Frank Gleason <frankg@halcyon.com> observes that the port of CLX to CLISP uses
the variable system::*big-endian* and the functions system::getenv,
system::make-socket-stream, system::read-n-bytes, system::write-n-bytes.

system::getenv and system::make-socket-stream should be there in any case.
The other three I have added to CLISP around November 1992, especially
with CLX in mind.

>  I'm using clisp on Linux, I think the version is 2.6, and pcl+clx.sept92f.

A version number "2.6" is unknown to me. Try (LISP-IMPLEMENTATION-VERSION).
If you get something before January 1993, then upgrade. New Linux binaries
are on tsx-11.mit.edu (/pub/linux/packages/lisp/ or something like this) and
ma2s2.mathematik.uni-karlsruhe.de /pub/lisp/clisp/linux/.

>  Also if I get this working will garnet run under clisp?

I can't promise anything, as I have only 8 MB RAM and this isn't enough for
compiling garnet. Did anyone get through it?


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From @serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de  Thu Apr  1 14:22:46 1993
Return-Path: <@serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de>
Received: from uni-kl.de (stepsun.uni-kl.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA29758; Thu, 1 Apr 93 14:22:46 +0200
Received: from serv-200.dfki.uni-kl.de by stepsun.uni-kl.de id aa28740;
          1 Apr 93 14:21 MET DST
Received: from serv-300.dfki.uni-kl.de by serv-200.dfki.uni-kl.de id aa01613;
          1 Apr 93 12:22 GMT
Date:     Thu, 1 Apr 93 12:22:16 GMT
From: Bjoern Hoefling <hoefling@dfki.uni-kl.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: hoefling@dfki.uni-kl.de
Subject:  Q: Clisp on Dos or Linux?
Organization:  DFKI, University of Kaiserslautern, Germany
Message-Id:  <9304011222.aa11013@serv-300.dfki.uni-kl.de>

Hi,
I will begin soon with my master thesis and I have the following problem:
I will have to use the hybrid knowledge representation system COLAB which has
been developped here (DFKI at the University of Kaiserslautern) on a PC (386 or 486). To run COLAB on a PC forces us to use a Lisp-Dialect available for PC, 
like CLisp. The decision, whether to use the Clisp version under DOS or under
Linux (which has not yet been installed in the Enterprise where I will make the master thesis) depends on the fact how difficult it is to write a nice, inter-
active User Interface with it. Therefore I have the following questions:

1. Which user interface toolkits for Lisp-Systems, which are freely available
can be used under Clisp with DOS and which under Clisp with Linux
(for example: CLX, CLUE, Garnet, XIT, ... or the corresponding tools under DOS/
Windows)? Information about experience with such a toolkit would be also very 
useful.
2. Are there any publicly available hypertext browser and hypertext editors (an interface to clisp is not strictly required) and/or a cross-referencer under DOS or Linux?

I know that Linux seems to be the more promising OS, but is has the disadvantage, that in order to make COLAB run on another PC one has to install first the 
whole Linux-System (with very much hd-capacity needed). That's why I would like 
to gather also some information about Clisp under DOS.

Thanks in advance for any help.

Bjoern Hoefling (hoefling@dfki.uni-kl.de)
From schue@ira.uka.de  Thu Apr  1 15:11:50 1993
Return-Path: <schue@ira.uka.de>
Received: from iraun1.ira.uka.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA29966; Thu, 1 Apr 93 15:11:50 +0200
Received: from ira.uka.de by iraun1.ira.uka.de with SMTP (PP) 
          id <26059-0@iraun1.ira.uka.de>; Thu, 1 Apr 1993 15:05:39 +0200
Received: from deathstar.iaks.ira.uka.de 
          by walhalla.eiss.ira.uka.de (4.1/SMI-4.1) id AA14597;
          Thu, 1 Apr 93 15:07:10 +0200
Received: from miraculix.iaks.ira.uka.de 
          by deathstar.iaks.ira.uka.de (4.1/SMI-4.1) id AA09157;
          Thu, 1 Apr 93 15:03:27 +0200
Date: Thu, 1 Apr 93 15:03:27 +0200
From: schue@ira.uka.de (Joachim Schue)
Message-Id: <9304011303.AA09157@deathstar.iaks.ira.uka.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Performance of CLISP


Are there any results of a comparison between CLISP and
Lucid Lisp (Performance, ...) ?. Scince
we are thinking about dropping our license of Lucid Lisp
I would be very pleased of any estimation of this idea.

Thanks in advance, Joachim 
From nils@guru.ims.uni-stuttgart.de  Thu Apr  1 23:05:06 1993
Return-Path: <nils@guru.ims.uni-stuttgart.de>
Received: from guru.ims.uni-stuttgart.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00938; Thu, 1 Apr 93 23:05:06 +0200
Received: by guru.ims.uni-stuttgart.de (Smail3.1.28.1 #2)
	id m0neXNs-0001bPC; Thu, 1 Apr 93 23:05 MET
Message-Id: <m0neXNs-0001bPC@guru.ims.uni-stuttgart.de>
Date: Thu, 1 Apr 93 23:05 MET
From: nils@guru.ims.uni-stuttgart.de (Cornelis van der Laan)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  Q: Clisp on Dos or Linux?

Bjoern Hoeflin wrote:

> I will begin soon with my master thesis and I have the following problem:
> I will have to use the hybrid knowledge representation system COLAB which has
> been developped here (DFKI at the University of Kaiserslautern) on a PC (386 or 486). To run COLAB on a PC forces us to use a Lisp-Dialect available for PC, 
> like CLisp. The decision, whether to use the Clisp version under DOS or under
> Linux (which has not yet been installed in the Enterprise where I will make the master thesis) depends on the fact how difficult it is to write a nice, inter-
> active User Interface with it. Therefore I have the following questions:
> 
> 1. Which user interface toolkits for Lisp-Systems, which are freely available
> can be used under Clisp with DOS and which under Clisp with Linux
> (for example: CLX, CLUE, Garnet, XIT, ... or the corresponding tools under DOS/
> Windows)? Information about experience with such a toolkit would be also very 
> useful.

You can use all CLX based toolkit interfaces in CLISP with an OS that 
supports socket connections to an Xserver. This need not exclude DOS
but (guess what...) it will be painful to get DOS/CLISP to do that.
You'd need to look into network drivers like KA9Q, build the proper
interface into CLISP, debug it etc etc. And then: still no X server
around, since those run best on UNIX boxes and are quite expensive
for DOS boxes, although available...

> 2. Are there any publicly available hypertext browser and hypertext editors (an interface to clisp is not strictly required) and/or a cross-referencer under DOS or Linux?
> 
> I know that Linux seems to be the more promising OS, but is has the disadvantage, that in order to make COLAB run on another PC one has to install first the 
> whole Linux-System (with very much hd-capacity needed). That's why I would like 
> to gather also some information about Clisp under DOS.

What is DOS other than big P**? Go Linux or get a decent Unix box.
And take all others with you.

Another option might be to contact Franz Inc for getting a version of
Allegro Common Lisp including CLIM (the Genera like window interface)
for PC/Windows. This isn't free and it might be not cheap but does
run under DOS and the sources are portable to other platforms that
support CLIM like Sparc, RS6000, MacIntosh etc etc. (Email me for
more concrete information.)

> 
> Thanks in advance for any help.
> 
> Bjoern Hoefling (hoefling@dfki.uni-kl.de)
> 
> 

Not much help but then, you didn't pay for it either :,-)

Nils

PS: I don't reformat those broken lines above, instead, Bjoern:
please get used to post/mail with a maximum line width of 70 chars.

----------------------------------------------------------------
Cornelis van der Laan -- nils@ims.uni-stuttgart.de
                      -- nils@guru.stgt.sub.org
# echo Knusper Knusper Knaeuschen > /etc/nologin
From haible  Fri Apr  2 01:02:58 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01062; Fri, 2 Apr 93 01:02:58 +0200
Date: Fri, 2 Apr 93 01:02:58 +0200
From: haible (Bruno Haible)
Message-Id: <9304012302.AA01062@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: Performance of CLISP

Joachim Schue <schue@ira.uka.de> asks:

> Are there any results of a comparison between CLISP and
> Lucid Lisp (Performance, ...) ?

Results from Timing the Benchmarks in
Richard P. Gabriel: Performance and Evaluation of Lisp Systems

Systems:

4 = CLISP (Version February 1992, gcc2 -O2) on (SUN Sparcstation 2, 16MB),
    measured Run Time (< Real Time !)
5 = CLISP (Version July 1992, gcc2 -O) on (486/33MHz, 8MB, Linux),
    measured Run Time (< Real Time !)
6 = Lucid Common Lisp on SUN-4 (SUN Sparcstation 2, 16MB),
    measured Total Run Time (< Elapsed Real Time !)
7 = Lucid Common Lisp on SUN-4c (SUN Sparcstation 1 IPC, 8MB),
    measured Total Run Time (< Elapsed Real Time !)

c = compiled
m = compiled to machine code

Times in seconds

                4c      5c      6c      7m
                       
TAK             0.83    1.33    0.10    0.09
TAKr            1.60    1.67    0.11    0.11
STAK            1.57    2.77    0.92    0.94
CTAK            3.27    1.99    0.34    0.52
TAKL            3.90    6.47    1.82    0.41
BOYER          17.65   16.14    4.13    7.71
BROWSE         14.18   17.75    5.12    4.85
DESTRU          1.65    3.24    0.48    0.45
TRAVERSinit    13.54   24.08    3.11    2.27
TRAVERSrun     99.26   80.99   10.11    5.43
DERIV           2.61    3.21    0.68    1.95
DDERIV          3.26    3.59    0.79    2.31
DIV2iter        1.18    1.60    0.33    1.49
DIV2recur       2.30    2.13    1.23    3.14
FFT             9.96   18.54    6.73    0.46
PUZZLE         15.31   29.88    5.36    1.16
TRIANGLE      291.84  521.18   42.91   14.74
FPRINT          0.21    0.31    0.14    2.24
FREAD           0.23    0.37    0.18    0.61
TPRINT          2.32    0.53    0.10   [8.71]  [] with *PRINT-PRETTY* = T
POLY_I_2        0.00    0.00    0.01    0.01
POLY_B_2        0.01    0.01    0.01    0.00
POLY_F_2        0.01    0.01    0.00    0.01
POLY_I_5        0.08    0.08    0.02    0.02
POLY_B_5        0.08    0.10    0.04    1.24
POLY_F_5        0.08    0.09    0.02    0.02
POLY_I_10       0.82    0.97    0.18    0.12
POLY_B_10       1.02    1.15    0.41    0.58
POLY_F_10       0.94    1.01    0.29    1.33
POLY_I_15       5.71    6.79    1.20    0.82
POLY_B_15       8.03    9.10    3.58    5.65
POLY_F_15       6.21    7.19    1.86    2.75


I measured these myself, 4 in April 1992, 5 in July 1992, 6,7 in March 1991.


Conclusions:
* CLISP is approximately as fast on a Sun Sparc 2 as on a 486 (33 MHz).
* Lucid Lisp is always faster than CLISP. This is because Lucid Lisp
  compiles to native machine code and makes use of the special "tagged"
  SPARC instructions.

Other Notes:
* This measured only pure Run Time, not Real Time (also called Elapsed Time).
  Real Time includes time for swapping and page faults. Since compiled
  CLISP code tends to be much smaller than compiled Lucid Lisp code this
  should affect Lucid more than CLISP.
* This measured only the speed of compiled code. Development speed also
  depends on the speed of interpreted code and on the compiler's speed.
  I recall that Lucid's machine code compiler (7m above) is not very fast.



                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From yue@maxwell.mmwb.ucsf.EDU  Fri Apr  2 09:27:22 1993
Return-Path: <yue@maxwell.mmwb.ucsf.EDU>
Received: from cgl.ucsf.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01374; Fri, 2 Apr 93 09:27:22 +0200
Received: from maxwell.mmwb.ucsf.EDU by cgl.ucsf.EDU (5.65/GSC4.22)
	id AA18366 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de; Thu, 1 Apr 93 23:26:51 -0800
Received: by maxwell.mmwb.ucsf.EDU (4.1/GSC4.20)
	id AA00259; Thu, 1 Apr 93 23:26:51 PST
Date: Thu, 1 Apr 93 23:26:51 PST
From: yue@maxwell.mmwb.ucsf.EDU (Kaizhi Yue)
Message-Id: <9304020726.AA00259@maxwell.mmwb.ucsf.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Running CLISP inside Emacs

The OS2 port of Clisp makes it possible to run LISP in an Emacs subprocess,
which makes it much easier to develop LISP programs. Bruno Haible suggested
that I describe some functionalities that I know of. They are mainly the
following. 
 
M-x run-lisp allows one to start an inferior lisp process in emacs.
 
LISP-SEND-DEFUN, invoked by c-m-x (in the convention of symbolics), sends an
lisp expression (usually defun form) inside a LISP buffer to the lisp
process to be evaluated and the value will be printed to the inferior lisp
buffer.
 
LISP-SEND-COMPILE (c-m-c) allows one to compile a function in a LISP buffer.
 
 By defining a proper shell-prompt-pattern (the default is used in the
definition of RUN-LISP), the commands SHELL-PREV-COMMAND (alt-p),
SHELL-NEXT-COMMAND (alt-n), etc allow one to move the cursor to the previous
user inputs. Thus are accomplished functionalities similar to KEYS in OS2,
when combined with other emacs shell commands, e.g., SHELL-SEND-INPUT,
COPY-LAST-SHELL-INPUT, etc. These shell commands and key bindings are
described in the Emacs manual.
 
 Most of the functions that are needed such as RUN-LISP, LISP-SEND-DEFUN,
SHELL-SEND-INPUT, SHELL-PREV-COMMAND, SHELL-NEXT-COMMAND, etc. already exist
in shell.el in EMACS LISP.  (The latter two are not found in the OS/2 port
of Emacs release but can be found in the Unix port. --- At least I did at
our site.)
 
 Some slight modifications are needed to make the functions work in OS2. And
some are very ad hoc. E.g., when running CLISP in EMACS shell, when the
input is more than one line, the read-eval-print loop fails to print the
prompt for the next command.  So I put in a second (one-line) expression for
the lisp process to evaluate so that a prompt will be generated. I do it by
evaluating "!" which should be previously defined in CLISP as (setq ! '!).
 
I have included the code for the above functionalities in this post. This
includes some LISP code and some Emacs lisp code. They are provided as is
(and other standard disclaimers apply).  I am sure there are better ways to
do these things. But if you would like to take some existing code and play
with it, here it is. By the way, Bill Schelter has quite some goodies for
using LISP in Emacs shell. E.g., he has a utility for reading documentations
of common lisp functions that is similar to C-h d in Emacs.  These can be
found in his enhancement for AKCL, which is available through FTP at
rascal.ics.utexas.edu:pub/akcl-XX.tar.Z. The files are in a directory named
something like .../kcl/doc/.... Look for the following files: akcl.el,
find-doc.el, etc.
 
 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;; Put the following in an init file for ***LISP***
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
(defmacro compile-if-wellformed (def)
  `(if (and (eq 'defun (car ,def))
	    (symbolp (cadr ,def))
	    (listp (caddr ,def))
	    (>= (length ,def) 4))
       (compile (cadr ,def)(cons 'lambda (cddr ,def)))
     'NOT-A-FUNCTION-DEFINITION-FORM-AND-NOT-COMPILED))
 
 
(setq ! '!)
 
 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Put the following in an initialization file for Emacs
;;; --- I did not figure out a way of putting them into shell-mode-map.
;;;;;;;;;;;;;;;;;;;;;;;
 
(define-key ext-map "\061" 'shell-next-command) ;;; A-p
(define-key ext-map "\031" 'shell-prev-command) ;;; A-n
 
 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Load the following part at startup or through
;;;  (autoload 'run-lisp "f:/emacs/custom/inferior-lisp" nil t)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
(require 'shell)
 
(defun run-lisp (&optional startup-name)
  "Run an inferior Lisp process, input and output via buffer *lisp*."
  (interactive nil)  ;(interactive "sEnter  CL program name: ") 
  (switch-to-buffer (make-shell "lisp"  "c:\\os2\\cmd.exe" nil)) 
  (process-send-string "lisp" "f:\\usr\\bin\\lisp.cmd\n")
 
;; (switch-to-buffer (make-shell "lisp"  "c:\\os2\\cmd.exe" "f:\\usr\\bin\\lisp.
  (inferior-lisp-mode)
  (make-local-variable 'shell-prompt-pattern)
  (setq shell-prompt-pattern "^[^#%)>]*[#%)>]+ *"))
 
 
(defun define-lisp-mode-key (key command)
  (define-key lisp-mode-map key command)
  (define-key inferior-lisp-mode-map key command))
		   
;; %%% copied from /emacs/lisp/lisp-mode.el 
 
 
							    
;;;; **** to use the kludge in this function, you must have (setq > '>)
(defun lisp-send-defun ()
  "Send the current defun to the Lisp process made by  run-lisp."
  (interactive)
  (save-excursion
   (end-of-defun) (message "defining common lisp function ....")
   (let ((end (point)))
     (beginning-of-defun)
     ;; Reset so we can grab the value.
     (setq lisp-last-output-position nil)
     (process-send-region "lisp" (point) end)
    (process-send-string "lisp" "!\n") ;;; well, now it works 3/14, while it did
    (switch-to-buffer (process-buffer(get-process "lisp")))
    (em-end-of-buffer)
     (message "defined"))))
 
  ; using the code in shell.el can move the cursor, but the point and mark are w
 
;;(define-lisp-mode-key "\C-\M-x" 'lisp-send-defun)
 
(define-lisp-mode-key "\e\C-x" 'lisp-send-defun)
 
 
 
;(define-lisp-mode-key "\e\C-y" 'lisp-send-defun) not necessary
 
;(defun lisp-send-compile ()		;
;  "Send the current defun to the Lisp process made by  run-lisp."
;  (interactive)
;  (save-excursion
;   (end-of-defun)
;   (message "Compiling common  lisp function ....")
;   (let ((end (point)))
;     (beginning-of-defun)
;     ;; Reset so we can grab the value.
;     (setq lisp-last-output-position nil)
;     (process-send-string "lisp" "(let ((def ' ")
;     (process-send-region "lisp" (point) end)
;     (process-send-string "lisp"       "))")
;     (process-send-string "lisp"
;			  "(if (and (eq 'defun (car def))
;                                    (symbolp (cadr def))
;                                    (listp (caddr def))
;                                    (every #'atom (caddr def))
;                                    (>= (length def) 4))
;                               (compile (cadr def)(cons 'lambda (cddr def)))
;                                'Not-a-function-definition-form))")
;     (process-send-string "lisp" "\n"))))
 
;; this is IN CL
 
 
 
(defun lisp-send-compile ()
  "Send the current defun to the run-lisp process for compilation."
  (interactive)
  (save-excursion
   (end-of-defun)
   (message "Compiling COMMON LISP function ....")
   (let ((end (point)))
     (beginning-of-defun)
     ;; Reset so we can grab the value.
     (setq lisp-last-output-position nil)
     (process-send-string "lisp" "(let ((def ' ")
     (process-send-region "lisp" (point) end)
     (process-send-string "lisp"       "))") ;; closed ...((def...))
     (process-send-string "lisp" "(compile-if-wellformed def))")
     (process-send-string "lisp" ":q\n") ;;; surprise! 
     )))
 
 
(define-lisp-mode-key "\e\C-c" 'lisp-send-compile)
 
(define-lisp-mode-key "\e\C-x" 'lisp-send-defun)
 
 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;  The following  is copied from a Unix version of SHELL.EL,
;;;  included here for your convenience. They should be loaded 
;;;  in shell mode or through autoload.
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
  (define-key shell-mode-map "\C-i" 'shell-file-name-completion)
  (define-key shell-mode-map "\C-m" 'shell-send-input)
 
;;; We have to put these in ext-map. 
;;;  (define-key shell-mode-map "\061" 'shell-next-command)
;;; (define-key shell-mode-map "\031" 'shell-prev-command)
 
 
 
(defun shell-file-name-completion ()
  "Preform file name completion in shell mode"
  (interactive)
  (let ((shell-expand-name nil)
	(shell-expand-dir nil)
	(shell-expand-file nil)
	(shell-expand-try nil)
	(shell-expand-name-begin nil)
	(shell-expand-name-end nil))
 
    ;; look ahead
    (re-search-backward shell-pathname-pattern nil t)
    (forward-char)
    (setq shell-expand-name-begin (point))
    ;; look back
    (if (re-search-forward shell-pathname-pattern nil 0) (backward-char))
    (setq shell-expand-name-end (point))
    
    ;; the name requiring expansion
    (setq shell-expand-name
	  (buffer-substring shell-expand-name-begin shell-expand-name-end))
    ;; directory part of name
    (setq shell-expand-dir
	  (or (file-name-directory shell-expand-name) default-directory))
    ;; file part of name
    (setq shell-expand-file
	  (file-name-nondirectory shell-expand-name))
    
    ;; do the expansion
    (setq shell-expand-try
	  (file-name-completion shell-expand-file shell-expand-dir))
    ;; display the results
    (if (eq shell-expand-try t) (message "Sole completion")
      (if (eq shell-expand-try nil) (message "No match")
	(if (equal shell-expand-try shell-expand-file)
	    (progn
	      (if shell-completions-window nil
		(setq shell-completions-window
		      (current-window-configuration)))
	      (message "Making completion list...")
	      (with-output-to-temp-buffer " *Completions*"
		(display-completion-list
		 (sort (file-name-all-completions
			shell-expand-try shell-expand-dir)
		       'string-lessp)))
	      (message ""))
	  (progn
	    ;; put in the expansion
	    (re-search-backward
	     (concat shell-filename-pattern "\\|"
		     shell-pathname-pattern) nil t)
	    (forward-char)
	    (delete-region (point) shell-expand-name-end)
	    (insert shell-expand-try)))))))
 
(defun shell-completion-cleanup ()
  "Clean up windows after shell file name completion.
Modified to deal with screens created by show-temp-buffer.el -- MON."
  (interactive)
  (if (and (boundp 'read-minibuf-unwind-hook)		;MON
	   (boundp 'epoch-temp-buffer-unwind-screen)	;MON
	   epoch-temp-buffer-unwind-screen) 		;MON
      (funcall read-minibuf-unwind-hook))		;MON
  (if shell-completions-window
      (save-excursion
	(set-window-configuration shell-completions-window)
	(setq shell-completions-window nil))))
 
(defun kill-all-output-from-shell ()
  "Kill shell buffer above current prompt."
  (interactive)
  (goto-char (point-max))
  (re-search-backward shell-prompt-pattern nil t)
  (kill-region (point-min) (point))
  (goto-char (point-max)))
 
(defun shell-next-command ()
  "Search for the next command in a shell."
  (interactive)
  (re-search-forward shell-prompt-pattern nil t))
 
(defun shell-prev-command ()
  "Search for the previous command in a shell."
  (interactive)
  (beginning-of-line)
  (re-search-backward shell-prompt-pattern nil t)
  (re-search-forward shell-prompt-pattern nil t))
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
From yue@maxwell.mmwb.ucsf.EDU  Fri Apr  2 09:59:24 1993
Return-Path: <yue@maxwell.mmwb.ucsf.EDU>
Received: from cgl.ucsf.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01427; Fri, 2 Apr 93 09:59:24 +0200
Received: from maxwell.mmwb.ucsf.EDU by cgl.ucsf.EDU (5.65/GSC4.22)
	id AA18494 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de; Thu, 1 Apr 93 23:58:53 -0800
Received: by maxwell.mmwb.ucsf.EDU (4.1/GSC4.20)
	id AA00399; Thu, 1 Apr 93 23:58:53 PST
Date: Thu, 1 Apr 93 23:58:53 PST
From: yue@maxwell.mmwb.ucsf.EDU (Kaizhi Yue)
Message-Id: <9304020758.AA00399@maxwell.mmwb.ucsf.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Running CLISP inside Emacs (cont.)


To make meta-x run-lisp work for your lisp, it is assumed that you have
defined a command file lisp.cmd that is in the path "f:/usr/bin/". For your
particular lisp, this line needs to be modified. Alternatively, you
may simply call "lisp.exe -M lispinit.mem ..." directly. 

Also please note that I have assumed that your cmd.exe is in "C:os2" path.

   Kai
From LARSSON@ntcclu.ntc.nokia.com  Fri Apr  2 10:03:15 1993
Return-Path: <LARSSON@ntcclu.ntc.nokia.com>
Received: from NTC02.TELE.NOKIA.FI by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01471; Fri, 2 Apr 93 10:03:15 +0200
Date:    Fri, 2 Apr 1993 11:04:40 +0400 (EET-DST)
From: LARSSON@ntcclu.ntc.nokia.com
Message-Id: <930402110440.2220f77a@ntcclu.ntc.nokia.com>
Subject: Query: Amount of RAM needed for CLX etc. under Linux
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vmsmail-To: INET::"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

	Apropos Bjoern Hoeflin's questions concerning 
	user interface tools:

	I am currently setting up Linux to coexist with OS/2
	on an Intel 80486 based PC. How much RAM do I need

	1) To be able to run XFree. The Linux docs talk about
	8Mb, but will that be sufficient to do anything useful
	in addition to just running the GUI?

	2) To be able to run CLX under CLISP on top of X - and if
	I add CLUE, (Garnet, XIT), then how much. And when I am
	ready to implement something useful under those GUIs,
	then how much RAM should I calculate. In my case 'something
	useful' most probably has to do with natural language 
	processing.

	3) Hard disk space required during compilation and setup,
	assuming some of the sources can then be deleted, if I
	do not have to rebuild the system frequently.

	I am also planning to use CLISP plus any feasable combination
	of the above mentioned GUIs on a HP 9000s700 running 
	HP-UX 8.07 and HP-VUE. Consequently, I would appreciate
	VERY much to share any experiences of possible quirks
	associated with these HP systems

	Thanks in advance,
	Arne Larsson
*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
Arne Larsson			Nokia Telecommunications
Translator			Transmission Systems, Customer Services
larsson@ntc02.tele.nokia.fi	P.O. Box 12, SF-02611 Espoo, Finland
larsson@ntcclu.ntc.nokia.com	Phone +358 0 5117476, Fax +358 0 51044287
*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*

From uho@informatik.uni-kiel.dbp.de  Thu Apr  8 13:24:05 1993
Return-Path: <uho@informatik.uni-kiel.dbp.de>
Received: from nz11.rz.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13372; Thu, 8 Apr 93 13:24:05 +0200
X400-Received: by mta nz11.rz.uni-karlsruhe.de in /PRMD=uni-karlsruhe/ADMD=dbp/C=de/;
               Relayed; Thu, 8 Apr 1993 13:24:35 +0200
X400-Received: by /PRMD=UNI-KARLSRUHE/ADMD=DBP/C=DE/; Relayed;
               Thu, 8 Apr 1993 13:23:13 +0200
X400-Received: by /PRMD=UNI-KIEL/ADMD=DBP/C=DE/; Relayed;
               Thu, 8 Apr 1993 13:22:23 +0200
Date: Thu, 8 Apr 1993 13:22:23 +0200
X400-Originator: uho@informatik.uni-kiel.dbp.de
X400-Recipients: clisp-list@MA2S2.MATHEMATIK.uni-karlsruhe.de
X400-Mts-Identifier: [/PRMD=uni-kiel/ADMD=dbp/C=de/;gutemine 005725.0734268143000]
X400-Content-Type: P2-1984 (2)
From: Ulrich Hoffmann <uho@informatik.uni-kiel.dbp.de>
Message-Id: <9304081122.AA20169@minnie.informatik.uni-kiel.dbp.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: IN-PACKAGE changes PACKAGE-USE-LIST inappropriate

I think I discovered a problem with IN-PACKAGE.

Here is a clisp session protocoll which shows the problem:

% clisp
...

  ------+------     Copyright (c) Bruno Haible, Michael Stoll 1992, 1993
                                                                  
> (make-package 'a)                        ; first create two new packages
#<PACKAGE A>
> (make-package 'b)
#<PACKAGE B>
> (in-package 'user :use '(lisp a))        ; set package-use-list of USER
#<PACKAGE USER>
> (package-use-list 'user)
(#<PACKAGE A> #<PACKAGE LISP>)		   ; hmm looks ok
> (in-package 'user :use '(lisp b))	   ; extend use-list with package B
#<PACKAGE USER>
> (package-use-list 'user)                 ; check if this was succesful
(#<PACKAGE B> #<PACKAGE LISP>)	           ; oh no! Package A is missing


Using USE-PACKAGE instead of the :USE keyword gives the desired
result. Any ideas?


Greetins,
     Ulrich


I used the SPARC/SUNOS.4.1 Version.

Ulrich Hoffmann                  email: uho@informatik.uni-kiel.dbp.de  
Institut fuer Informatik, Universitaet Kiel        Tel: +49 431 560426 
Preusserstr 1-9, D-2300 Kiel 1, Germany            Fax: +49 431 566143
From manager@csdeca.cs.missouri.edu  Thu Apr  8 20:03:27 1993
Return-Path: <manager@csdeca.cs.missouri.edu>
Received: from csdeca.cs.missouri.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13708; Thu, 8 Apr 93 20:03:27 +0200
Received: by csdeca.cs.missouri.edu (5.57/Ultrix4.1-C)
	id AA04118; Thu, 8 Apr 93 13:02:29 -0500
Date: Thu, 8 Apr 93 13:02:29 -0500
From: manager@csdeca.cs.missouri.edu (Benlu Jiang)
Message-Id: <9304081802.AA04118@csdeca.cs.missouri.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Clisp


I tried to install clisp in DECstation 5000  (RISC, ultrix)

But when I build the makefile by 

makemake mips gcc > makefile

I got following error message:
makemake: syntax error at line 584: `(' unexpected

Could you give me some help?
Thanks

BJ
From haible  Sun Apr 11 19:24:51 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14730; Sun, 11 Apr 93 19:24:51 +0200
Date: Sun, 11 Apr 93 19:24:51 +0200
From: haible (Bruno Haible)
Message-Id: <9304111724.AA14730@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: IN-PACKAGE changes PACKAGE-USE-LIST

Ulrich Hoffmann <uho@informatik.uni-kiel.dbp.de> has a problem with
IN-PACKAGE:

> > (package-use-list 'user)
> (#<PACKAGE A> #<PACKAGE LISP>            ; hmm looks ok
> > (in-package 'user :use '(lisp b))	   ; extend use-list with package B
> #<PACKAGE USER>
> > (package-use-list 'user)               ; check if this was succesful
> (#<PACKAGE B> #<PACKAGE LISP>)	   ; oh no! Package A is missing

CLtL states that the "existing package is augmented to reflect any new
nicknames or new packages in the :USE list". CLISP also removes any packages
from the use list that are not specified in the :USE list argument.
(Seems more logical to me: The code after the IN-PACKAGE form may be
disturbed by an unforeseen package on the use list.)

If you have IN-PACKAGE calls for the same package but with different :USE
arguments, you should make them equal.

Bruno Haible
haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Sun Apr 11 19:35:23 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14828; Sun, 11 Apr 93 19:35:23 +0200
Date: Sun, 11 Apr 93 19:35:23 +0200
From: haible (Bruno Haible)
Message-Id: <9304111735.AA14828@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Clisp on RISC/ultrix


> makemake mips gcc > makefile
> makemake: syntax error at line 584: `(' unexpected

You have a shell /bin/sh that apparently doesn't support function definitions.
Get another shell (bash or ksh).

Bruno Haible
haible@ma2s2.mathematik.uni-karlsruhe.de
From jbm@hal.com  Fri Apr 16 16:24:08 1993
Return-Path: <jbm@hal.com>
Received: from hal.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19071; Fri, 16 Apr 93 16:24:08 +0200
Received: from infinity.hal.com by hal.com (4.1/SMI-4.1.1)
	id AA25825; Fri, 16 Apr 93 07:23:39 PDT
Received: by infinity.hal.com (4.1/SMI-4.1.2)
	id AA09052; Fri, 16 Apr 93 09:23:37 CDT
Date: Fri, 16 Apr 93 09:23:37 CDT
Message-Id: <9304161423.AA09052@infinity.hal.com>
From: jbm@hal.com (Brad Might)
Sender: jbm@hal.com
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: bug

;;; dynamic binding of *special* is messed up when 
;;; creating structure under (with-open...)

(defvar *special* nil)

(defstruct base
  one)

(defstruct (derived (:include base) (:print-function print-two))
  two)

(defun print-two (node stream depth)
  (princ *special*)
  (princ " here"))


(setq xx 
      (with-open-file (foo "/dev/null")
		      (make-derived)))


(setq yy (with-open-file (foo (open "/dev/null"))(make-derived)))


;;; this function should print "T here" but prints "NIL here"
(defun funx () (let ((*special* t)) xx))

(defun funy () (let ((*special* t)) yy))
From haible  Fri Apr 16 22:47:09 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19726; Fri, 16 Apr 93 22:47:09 +0200
Date: Fri, 16 Apr 93 22:47:09 +0200
From: haible (Bruno Haible)
Message-Id: <9304162047.AA19726@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: bug

Brad Might thinks:
> ;;; this function should print "T here" but prints "NIL here"
> (defun funx () (let ((*special* t)) xx))

No, this function shouldn't print anything, and it prints nothing,
The value of xx is printed by the read-eval-print loop. When this occurs
the function funx has already been left, and the dynamic bindings that
were in effect have been undone.

If you really want xx to be printed at your program's run time, then do

(defun funx () (let ((*special* t)) (print xx)))


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From jbm@hal.com  Fri Apr 16 22:55:36 1993
Return-Path: <jbm@hal.com>
Received: from hal.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19895; Fri, 16 Apr 93 22:55:36 +0200
Received: from infinity.hal.com by hal.com (4.1/SMI-4.1.1)
	id AA02431; Fri, 16 Apr 93 13:55:02 PDT
Received: by infinity.hal.com (4.1/SMI-4.1.2)
	id AA00234; Fri, 16 Apr 93 15:55:00 CDT
Date: Fri, 16 Apr 93 15:55:00 CDT
From: jbm@hal.com (Brad Might)
Message-Id: <9304162055.AA00234@infinity.hal.com>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: bug
In-Reply-To: <9304162047.AA19726@ma2s2.mathematik.uni-karlsruhe.de>
References: <9304162047.AA19726@ma2s2.mathematik.uni-karlsruhe.de>


Thanks, I see where I went wrong !


Bruno Haible writes:
 > Brad Might thinks:
 > > ;;; this function should print "T here" but prints "NIL here"
 > > (defun funx () (let ((*special* t)) xx))
 > 
 > No, this function shouldn't print anything, and it prints nothing,
 > The value of xx is printed by the read-eval-print loop. When this occurs
 > the function funx has already been left, and the dynamic bindings that
 > were in effect have been undone.
 > 
 > If you really want xx to be printed at your program's run time, then do
 > 
 > (defun funx () (let ((*special* t)) (print xx)))
 > 
 > 
 >                     Bruno Haible
 >                     haible@ma2s2.mathematik.uni-karlsruhe.de
 > 
From jbm@hal.com  Fri Apr 16 22:56:42 1993
Return-Path: <jbm@hal.com>
Received: from hal.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19908; Fri, 16 Apr 93 22:56:42 +0200
Received: from infinity.hal.com by hal.com (4.1/SMI-4.1.1)
	id AA02442; Fri, 16 Apr 93 13:56:11 PDT
Received: by infinity.hal.com (4.1/SMI-4.1.2)
	id AA00237; Fri, 16 Apr 93 15:56:09 CDT
Date: Fri, 16 Apr 93 15:56:09 CDT
From: jbm@hal.com (Brad Might)
Message-Id: <9304162056.AA00237@infinity.hal.com>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: bug
In-Reply-To: <9304162047.AA19726@ma2s2.mathematik.uni-karlsruhe.de>
References: <9304162047.AA19726@ma2s2.mathematik.uni-karlsruhe.de>

Bruno Haible writes:
 > Brad Might thinks:
 some stuff.


ps. I think clisp is very excellent. Is there any internals documentation
(in english ?). I am very interested in this stuff. How can I add some
functions written in C ?

thanks,
brad
From @cdc2-gw.rrzn.uni-hannover.de,@CDC2.RRZN.UNI-HANNOVER.DE:bergmann@tnt.uni-hannover.de  Wed Apr 21 12:29:47 1993
Return-Path: <@cdc2-gw.rrzn.uni-hannover.de,@CDC2.RRZN.UNI-HANNOVER.DE:bergmann@tnt.uni-hannover.de>
Received: from cdc2.rrzn.uni-hannover.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05731; Wed, 21 Apr 93 12:29:47 +0200
Received: from DE*DBP*UNI-HANNOVER by cdc2-gw.rrzn.uni-hannover.de via QTFS with
 X.400; Wed, 21 Apr 93 12:21:16 +0200
Received: from helios.tnt.uni-hannover.de by CDC2.RRZN.UNI-HANNOVER.DE ; 21 Apr 93 12:21:16 
Received: from artemis.tnt.uni-hannover.de by helios.tnt.uni-hannover.de (4.1/SMI-4.1)
	id AA05049; Wed, 21 Apr 93 12:21:32 +0200
Date: Wed, 21 Apr 93 12:21:32 +0200
From: bergmann@tnt.uni-hannover.de (Bernd Bergmann)
Message-Id: <9304211021.AA05049@helios.tnt.uni-hannover.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: XIT compilation problems

After building PCL, CLX and CLUE i tried to compile XIT from the file
ma2s2.mathematik.uni-karlsruhe.de/pub/lisp/clisp/packages/clue+clio+xit.clisp.tar.Z,
but the compilation broke with the following error message:


*******************************************************************************
....
Compilation of file /new/sources/xit/kernel/clx-auth.lsp is finished.
0 errors, 0 warnings
;; Loading file /new/sources/xit/kernel/clx-auth.fas ...
;; Loading of file /new/sources/xit/kernel/clx-auth.fas is finished.
; COMPILE module MACROS ... 

Compiling file /new/sources/xit/kernel/macros.lsp ...
WARNING in function ADD-OPEN-DISPLAY-HOOK :
variable IF-NEEDED is used despite of IGNORE declaration.
WARNING in function ADD-CLOSE-DISPLAY-HOOK :
variable IF-NEEDED is used despite of IGNORE declaration.
WARNING in function ADD-OPEN-TOPLEVEL-HOOK :
variable IF-NEEDED is used despite of IGNORE declaration.
WARNING in function #:TOP-LEVEL-FORM-38-1-1 :
variable ACTIONS is not used.
Misspelled or missing IGNORE declaration?
WARNING in function #:TOP-LEVEL-FORM-38-2 :
variable ACTIONS is not used.
Misspelled or missing IGNORE declaration?
*** - SYSTEM::%STRUCTURE-REF: NIL is not a structure of type SYSTEM::ANODE
1. Break> 
*******************************************************************************
 
;                   XIT -- The X User Interface Toolkit
;            
;  Copyright (c) 1992: Research Group DRUID
;                      Department of Computer Science
;                      University of Stuttgart
;                      Breitwiesenstr. 20-22
;                      W-7000 Stuttgart 80
;                      Germany
; 
;                      Juergen Herczeg
;                      Hubertus Hohl
;                      Matthias Ressel
;                      Phone:  (+49|0) 711 7816 {364,359}
;                      E-mail: druid@informatik.uni-stuttgart.de
 


My system:	Linux pl998
		CLISP "March 1993"
		PCL "July 1b"
		CLX from pcl+clx.sept92f.clisp.tar.Z


Any help will be appreciated.
Please email me the answer or suggestion.

Thanks in advance,
Bernd Bergmann
email: bergmann@tnt.uni-hannover.de

From @serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de  Thu Apr 22 16:14:04 1993
Return-Path: <@serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de>
Received: from uni-kl.de (stepsun.uni-kl.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07406; Thu, 22 Apr 93 16:14:04 +0200
Received: from serv-200.dfki.uni-kl.de by stepsun.uni-kl.de id aa08637;
          22 Apr 93 16:07 MET DST
Received: from serv-300.dfki.uni-kl.de by serv-200.dfki.uni-kl.de id aa13589;
          22 Apr 93 14:09 GMT
Date:     Thu, 22 Apr 93 14:09:43 GMT
From: Bjoern Hoefling <hoefling@dfki.uni-kl.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: hoefling@dfki.uni-kl.de
Subject:  problem with defstruct
Organization:  DFKI, University of Kaiserslautern, Germany
Message-Id:  <9304221409.aa11329@serv-300.dfki.uni-kl.de>

A friend of me has a problem with clisp and asked me to post it in the clisp
mailing list. Here is a short script:
________________________________________________________________________________
> (defstruct (object             
            (:conc-name object-)
            (:predicate object?)
           )
    (reference    'NUNA)
    )
OBJECT
> (setq a (make-object))
#S(OBJECT :REFERENCE NUNA)
> (object-reference a)
NUNA
> (defstruct (unknown (:predicate unknown?)
                    (:conc-name object-)
                    (:include object)
                    )
  (abstract-functions   nil :type list)
)
UNKNOWN
> (object-reference a)

*** - SYSTEM::%STRUCTURE-REF: #S(OBJECT :REFERENCE NUNA) ist keine Structure vom Typ UNKNOWN.
1. Break> 
________________________________________________________________________________

Thanks for any help
Bjoern Hoefling (hoefling@dfki.uni-kl.de)

From haible  Fri Apr 23 09:54:13 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08040; Fri, 23 Apr 93 09:54:13 +0200
Date: Fri, 23 Apr 93 09:54:13 +0200
From: haible (Bruno Haible)
Message-Id: <9304230754.AA08040@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: problem with defstruct


Bjoern Hoefling <hoefling@dfki.uni-kl.de> points out a problem that occurs
when using DEFSTRUCT with :INCLUDE option and the same :CONC-NAME for both
structures:

| > (defstruct (object (:conc-name object-) (:predicate object?))
|     (reference    'NUNA)
|   )
| OBJECT

| > (setq a (make-object))
| #S(OBJECT :REFERENCE NUNA)

| > (object-reference a)
| NUNA

| > (defstruct (unknown (:predicate unknown?) (:conc-name object-)
|                       (:include object)
|              )
|     (abstract-functions   nil :type list)
|   )
| UNKNOWN

| > (object-reference a)
| 
| *** - SYSTEM::%STRUCTURE-REF: #S(OBJECT :REFERENCE NUNA) ist keine
| Structure vom Typ UNKNOWN.
| 1. Break> 

By executing the second DEFSTRUCT form, you have in fact redefined the
function OBJECT-REFERENCE. The first one accepted all structures of
type OBJECT, the second one only those which have the additional slot
ABSTRACT-FUNCTIONS.

Your code is not covered by CLtL, and it breaks under both
CLISP and CMUlisp.

Correct it. Either

a) Use another CONC-NAME for the including strcutures,

or

b) Repeat the first DEFSTRUCT form after the second. If you have a tree
   of including structures, you must repeat all the non-leaves in an
   leaf-to-root order. For example, change
     (defstruct a ...)
     (defstruct (b (:include a)) ...)
     (defstruct (c (:include b)) ...)
     (defstruct (d (:include c)) ...)
     (defstruct (e (:include b)) ...)
   to
     (defstruct a ...)
     (defstruct (b (:include a)) ...)
     (defstruct (c (:include b)) ...)
     (defstruct (d (:include c)) ...)
     (defstruct (e (:include b)) ...)
     (defstruct (c (:include b)) ...)
     (defstruct (b (:include a)) ...)
     (defstruct a ...)


Bruno Haible
haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Tue Apr 27 09:28:35 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA11819; Tue, 27 Apr 93 09:28:35 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA13735; Tue, 27 Apr 93 00:23:34 PDT
Date: Tue, 27 Apr 1993 00:21:16 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: What neat debugging tools don't I know about?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: <Pine.3.05.9304262108.C7545-9100000@jupiter>
Message-Id: <Pine.3.05.9304270014.C13460-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Is there a way to single-step through the evaluation of a form?

I've got this problem wherein a variable I try to access inside of a let
block (which defines it) claims to "have no value".  Any clues?

Thanks.

# Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER #
# The Emergent Church -- "Tenets?  You'll have to ask us as a group..."  \ME #
# If a megacorp added $3 to everybody's bill for 'fees', who'd complain?     #
# Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  #


From haible  Tue Apr 27 12:16:09 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12051; Tue, 27 Apr 93 12:16:09 +0200
Date: Tue, 27 Apr 93 12:16:09 +0200
From: haible (Bruno Haible)
Message-Id: <9304271016.AA12051@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: What neat debugging tools don't I know about?

> Is there a way to single-step through the evaluation of a form?

Use (STEP form) and try the Help command/key when at the "Step 1>" prompt.

> I've got this problem wherein a variable I try to access inside of a let
> block (which defines it) claims to "have no value".  Any clues?

You can use COMPILE-FILE. The compiler is pretty good in detecting such
scoping problems.

Are you aware of the difference between LET and LET* ?


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Tue Apr 27 18:49:01 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12794; Tue, 27 Apr 93 18:49:01 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA01184; Tue, 27 Apr 93 09:44:02 PDT
Date: Tue, 27 Apr 1993 09:43:08 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: Re: What neat debugging tools don't I know about?
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9304271016.AA12051@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9304270908.A1110-9100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 27 Apr 1993, Bruno Haible wrote:

> Are you aware of the difference between LET and LET* ?

Just parallel vs. serial assignment, right?

# Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER #
# The Emergent Church -- "Tenets?  You'll have to ask us as a group..."  \ME #
# If a megacorp added $3 to everybody's bill for 'fees', who'd complain?     #
# Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  #


From pdudey@Willamette.EDU  Wed Apr 28 04:05:22 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13271; Wed, 28 Apr 93 04:05:22 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA18226; Tue, 27 Apr 93 19:00:21 PDT
Date: Tue, 27 Apr 1993 18:58:07 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: What's wrong here?
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9304271016.AA12051@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9304271805.A18043-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Given these two definitions:

(defstruct flugblog
 (color 'blue)
 (size 'huge))

(defun foo ()
;;
;; Returns the color of a newly-constructed, temporary flugblog
;;
 (let ((x (make-flugblog)))
  (eval '(flugblog-color x))))

CLISP chokes on (foo).  It complains that x has no value.  I've stepped
through this problem, and it seems to have something to do with the call
to EVAL.  Any clues?

# Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER #
# The Emergent Church -- "Tenets?  You'll have to ask us as a group..."  \ME #
# If a megacorp added $3 to everybody's bill for 'fees', who'd complain?     #
# Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  #


From bkn@ida.liu.se  Wed Apr 28 09:15:22 1993
Return-Path: <bkn@ida.liu.se>
Received: from ida.liu.se (curofix.ida.liu.se) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13455; Wed, 28 Apr 93 09:15:22 +0200
Received: from panix by ida.liu.se (5.65b/ida.minimaster-V1.0b6d5)
	id AA07806; Wed, 28 Apr 93 09:09:53 +0200
From: Bernt Nilsson <bkn@ida.liu.se>
Received: from pan16 by panix (5.65b/ida.slave-V1.0b3)
	id AA05553; Wed, 28 Apr 93 09:09:51 +0200
Received: by pan16 (5.65b/ida.slave-V1.0b3)
	id AA07623; Wed, 28 Apr 93 09:09:49 +0200
Date: Wed, 28 Apr 93 09:09:49 +0200
Message-Id: <9304280709.AA07623@pan16>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: What's wrong here?

> Given these two definitions:
>
> (defstruct flugblog
>  (color 'blue)
>  (size 'huge))
>
> (defun foo ()
> ;;
> ;; Returns the color of a newly-constructed, temporary flugblog
> ;;
>  (let ((x (make-flugblog)))
>   (eval '(flugblog-color x))))
>
> CLISP chokes on (foo).  It complains that x has no value.  I've
stepped
> through this problem, and it seems to have something to do with the
call
> to EVAL.  Any clues?

Yes, "x" is not declared special.

Quoting CLtL 2:

"eval form                                       [Function]

The form is evaluated in the current dynamic environment and a null
lexical environment."

- You can eigther use a local or a global special declaration:

Modify foo;

 (let ((x (make-flugblog)))
     (declare (special x))
  (eval '(flugblog-color x))))

Or evaluate "(defvar x)" before running (or compiling) foo.

-- Bernt

----------------------------------------------------------------------
 Bernt Nilsson, Systems Manager     | Internet: BKN@IDA.LIU.SE
 IDA, LiTH (CS Dept. Linkoping U)   | uucp:     ...!sunic!liuida!bkn
 S-581 83 Linkoping, Sweden         | Bitnet:   BKN@SELIUIDA
 Phone +46 13 281975
From haible  Wed Apr 28 12:06:53 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13852; Wed, 28 Apr 93 12:06:53 +0200
Date: Wed, 28 Apr 93 12:06:53 +0200
From: haible (Bruno Haible)
Message-Id: <9304281006.AA13852@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: What's wrong here?

> (defun foo ()
>  (let ((x (make-flugblog)))
>   (eval '(flugblog-color x))))

Every time you use EVAL you must be doing something wrong. Simply write

(defun foo ()
  (let ((x (make-flugblog)))
    (flugblog-color x)
) )

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From syali@cs.Buffalo.EDU  Wed Apr 28 17:30:01 1993
Return-Path: <syali@cs.Buffalo.EDU>
Received: from sybil.cs.Buffalo.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14382; Wed, 28 Apr 93 17:30:01 +0200
Received: by sybil.cs.Buffalo.EDU (4.0/1.01)
	id AA06976; Wed, 28 Apr 93 11:23:49 EDT
Date: Wed, 28 Apr 93 11:23:49 EDT
From: syali@cs.Buffalo.EDU (Sy Ali)
Message-Id: <9304281523.AA06976@sybil.cs.Buffalo.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: CLISP on a 486DLC-40 (DRDOS6).


I've been unable to get CLISP to run on my Cyrix-based machine (the only
instance of incompatibility I've yet seen). CLISP load, display the
welcome header and prompt, but any keypress results in an immediate
exit from the program (if my memory manager is not loaded I get a
"Bye.", o/w it hangs with a stack error). I suspect this is an incompatibility
in the memory manager.

As I very much like CLISP (I trivally ported a 10,000+ line CL program
to it, Allegro CL\PC 1.0 was much more painful), I'd like to get a
version that works on my machine. Am I outta luck or is there a fix?

BTW, this was all under DOS (DRDOS6, but I've duplicated the problem
with MSDOS too). My next move is to install Linux :-)

Thanks, Sy.
From haible  Thu Apr 29 00:01:02 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14673; Thu, 29 Apr 93 00:01:02 +0200
Date: Thu, 29 Apr 93 00:01:02 +0200
From: haible (Bruno Haible)
Message-Id: <9304282201.AA14673@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: CLISP on a 486DLC-40

> I've been unable to get CLISP to run on my Cyrix-based machine (the only
> instance of incompatibility I've yet seen).

The problem you have has already been reported by someone else and analyzed
by Eberhard Mattes. When he releases EMX 0.8g, I will build a new DOS 
release of CLISP, and I hope that it will fix this incompatibility.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From lmulcahy@nyx.cs.du.edu  Thu Apr 29 16:07:35 1993
Return-Path: <lmulcahy@nyx.cs.du.edu>
Received: from relay1.UU.NET by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15514; Thu, 29 Apr 93 16:07:35 +0200
Received: from nyx.cs.du.edu by relay1.UU.NET with SMTP 
	(5.61/UUNET-internet-primary) id AA12811; Thu, 29 Apr 93 10:01:37 -0400
Received: by nyx.cs.du.edu (4.1/SMI-4.1)
	id AA20639; Thu, 29 Apr 93 08:01:43 MDT
Date: Thu, 29 Apr 93 08:01:43 MDT
From: lmulcahy@nyx.cs.du.edu (Larry Mulcahy)
Message-Id: <9304291401.AA20639@nyx.cs.du.edu>
X-Disclaimer: Nyx is a public access Unix system run by the University
	of Denver.  The University has neither control over nor
	responsibility for the opinions or correct identity of users.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: FUNCTION-LAMBDA-EXPRESSION in CLISP?

Is there a way to get the function lambda expression?
Symbol-function returns a #<CLOSURE ...> data type.  Is this a defstruct?
If so, I'd be satisfied with the slot names.
From haible  Thu Apr 29 20:02:32 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15755; Thu, 29 Apr 93 20:02:32 +0200
Date: Thu, 29 Apr 93 20:02:32 +0200
From: haible (Bruno Haible)
Message-Id: <9304291802.AA15755@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: function-lambda-expression

Larry Mulcahy and Joerg Hoehle ask:

> Is there a way to get the function lambda expression?
> Symbol-function returns a #<CLOSURE ...> data type.  Is this a defstruct?
> If so, I'd be satisfied with the slot names.

It is a built-in type. The slots have indices, no names.
Here is an implementation of FUNCTION-LAMBDA-EXPRESSION, see CLtL2 p.682.

(defun function-lambda-expression (obj)
  (unless (sys::closurep obj)
    (error #+DEUTSCH "~: ~ ist keine Funktion."
           #+ENGLISH "~: ~ is not a function"
           'function-lambda-expression obj
  ) )
  (if (not (compiled-function-p obj))
    (values (cons 'LAMBDA (sys::%record-ref obj 1))
            (vector
                    (sys::%record-ref obj 4)
                    (sys::%record-ref obj 5)
                    (sys::%record-ref obj 6)
                    (sys::%record-ref obj 7)
                    (sys::%record-ref obj 8)
            )
            (sys::%record-ref obj 0)
    )
    (values nil t nil)
) )


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Thu Apr 29 22:25:12 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15883; Thu, 29 Apr 93 22:25:12 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA13661; Thu, 29 Apr 93 13:19:46 PDT
Date: Thu, 29 Apr 1993 13:17:30 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: A couple of I/O questions
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9304291330.A13262-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

1)  How do I turn the string "13" into the fixnum 13?

2)  Is there any way to move the cursor around the screen, so I might
build what amounts to an editor?  (Actually, I'm writing a program to play
the oriental game of Go, and I'd like the user to be able to move the
cursor around the board and select a move, rather than typing in coordinates.)

Thanks.

# Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER #
# Church of "Bob's" Sock-Garters / Antartican People's Liberation Front  \ME #
# "A shadowy flight into the dangerous world of a man who does not exist."   #
# Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  #


From pdudey@Willamette.EDU  Fri Apr 30 05:24:40 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16384; Fri, 30 Apr 93 05:24:40 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA10432; Thu, 29 Apr 93 20:19:15 PDT
Date: Thu, 29 Apr 1993 20:17:39 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: Even yet still more questions
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9304292039.A10378-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Is there a way to "clear" the interpreter, i.e., remove all user
definitions and declarations, without exiting and reloading?

When I build some horrid, arcane pointer structure, the various items in
it are subject to garbage collection when and only when there's nothing
pointing to them . . . right?

# Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER #
# Church of "Bob's" Sock-Garters / Antartican People's Liberation Front  \ME #
# "A shadowy flight into the dangerous world of a man who does not exist."   #
# Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  #


From haible  Fri Apr 30 11:10:44 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16653; Fri, 30 Apr 93 11:10:44 +0200
Date: Fri, 30 Apr 93 11:10:44 +0200
From: haible (Bruno Haible)
Message-Id: <9304300910.AA16653@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: A couple of I/O questions

Peter Dudey asks:

>  How do I turn the string "13" into the fixnum 13?

Use READ-FROM-STRING or PARSE-INTEGER.

> Is there any way to move the cursor around the screen ... ?

CLISP contains a fairly portable mini-curses like screen access package.
Here is a documentation of it. (It mentions windows, but only one window
is possible now: the full (virtual) screen.)

99.2. Random Screen Access
--------------------------

(SYSTEM::MAKE-WINDOW)
  returns a "window stream". As long as this stream is open, the terminal
  is in cbreak/noecho mode. *TERMINAL-IO* shouldn't be used for input or
  output during this time. (Use WITH-KEYBOARD and *KEYBOARD-INPUT* instead.)

(SYSTEM::WINDOW-SIZE window-stream)
  returns the window's size, as two values:
  height (= Ymax+1) and width (= Xmax+1).

(SYSTEM::WINDOW-CURSOR-POSITION window-stream)
  returns the position of the cursor in the window, as two values:
  line (>=0, <=Ymax, 0 means top), column (>=0, <=Xmax, 0 means left margin).

(SYSTEM::SET-WINDOW-CURSOR-POSITION window-stream line column)
  sets the position of the cursor in the window.

(SYSTEM::CLEAR-WINDOW window-stream)
  clears the window's contents and puts the cursor in the upper left corner.

(SYSTEM::CLEAR-WINDOW-TO-EOT window-stream)
  clears the window's contents from the cursor position to the end of window.

(SYSTEM::CLEAR-WINDOW-TO-EOL window-stream)
  clears the window's contents from the cursor position to the end of line.

(SYSTEM::DELETE-WINDOW-LINE window-stream)
  removes the cursor's line, moves the lines below it up by one line and
  clears the window's last line.

(SYSTEM::INSERT-WINDOW-LINE window-stream)
  inserts a line at the cursor's line, moving the lines below it down by
  one line.

(SYSTEM::HIGHLIGHT-ON window-stream)
  switches highlighted output on.

(SYSTEM::HIGHLIGHT-OFF window-stream)
  switches highlighted output off.

(SYSTEM::WINDOW-CURSOR-ON window-stream)
  makes the cursor visible, a cursor block in most implementations.

(SYSTEM::WINDOW-CURSOR-OFF window-stream)
  makes the cursor invisible, in implementations where this is possible.


I suggest a macro like

(defmacro with-window (&body body)
  `(LET ((*WINDOW* (SYS::MAKE-WINDOW)))
     (UNWIND-PROTECT (PROGN ,@body) (CLOSE *WINDOW*))
   )
)

to ensure that the window stream is closed in all cases.

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Fri Apr 30 11:11:14 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16660; Fri, 30 Apr 93 11:11:14 +0200
Date: Fri, 30 Apr 93 11:11:14 +0200
From: haible (Bruno Haible)
Message-Id: <9304300911.AA16660@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: garbage collection

Peter Dudey asks:

> Is there a way to "clear" the interpreter, i.e., remove all user
> definitions and declarations, without exiting and reloading?

Assuming you haven't modified system data structures or created new
packages, this one might help:

(let ((p (find-package "USER")))
  (do-symbols (s p) (when (eq (symbol-package s) p) (unintern s p)))
)

> When I build some horrid, arcane pointer structure, the various items in
> it are subject to garbage collection when and only when there's nothing
> pointing to them . . . right?

Right. In the simplest case you set a global variable to NIL.
It's even simpler if your database is not contained in a global variable
at all.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Sat May  1 21:33:13 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17698; Sat, 1 May 93 21:33:13 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA00828; Sat, 1 May 93 12:27:29 PDT
Date: Sat, 1 May 1993 12:22:48 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: Something out for which to watch
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9305011248.A693-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

If you use a function like this:

(defun foo (x) (delete x '(a b c d e f)))

the quoted list '(a b c d e f) is NOT immune to the delete!  Running the
function could actually change it!

I'm not sure if this is a bug in CLISP or not--I was under the impression
that a quoted, explicit list like that was a constant, and would be
"re-created" every time the function was run.

Anyway, the problem can of course be solved by using "remove" instead.  I
would never have been able to find this bug in my program without STEP, which
revealed that my list had somehow changed...

! Peter Dudey, 11 kyu, Lisp SubGuru, Order of the Golden Parentheses \FINGER !
! Reformed Church of James "Eric" the Half-a-Bee, Dipped in Curry        \ME !
! "A shadowy flight into the dangerous world of a man who does not exist."   !
! Please mail me plastic spaceships:  900 State St. C-210, Salem, OR  97301  !


From haible  Sun May  2 15:36:54 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18048; Sun, 2 May 93 15:36:54 +0200
Date: Sun, 2 May 93 15:36:54 +0200
From: haible (Bruno Haible)
Message-Id: <9305021336.AA18048@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Something out for which to watch

[This message is from David Loewenstern <loewenst@paul.rutgers.edu>.]

.. On Sat, 1 May 93 21:33:45 +0200, Peter Dudey <pdudey@jupiter.willamette.edu> said:
} If you use a function like this:

} (defun foo (x) (delete x '(a b c d e f)))

} the quoted list '(a b c d e f) is NOT immune to the delete!  Running the
} function could actually change it!

Yes.  I'm fairly certain that CLtL2 makes this trap specific.

} I'm not sure if this is a bug in CLISP or not--I was under the impression
} that a quoted, explicit list like that was a constant, and would be
} "re-created" every time the function was run.

It isn't.  I know Allegro and Symbolics CL show the same behavior.

It would be pretty space-inefficient to have the compiler force every
constant list (or array, or structure, I presume?) to be recopied
every time it was used.  I shudder to think that every construct that
looks like 
(CASE x 
  ((a b c d e f g h i) (foo x))
  ((j k l) (bar x)))

really disguises a huge amount of consing, since typically CASE is
implemented as expanding into MEMBER tests:
(LET ((#:G0001 x))
  (COND ((MEMBER #:G0001 '(a b c d e f g h i)) (foo x))
	((MEMBER #:G0001 '(j k l))) (bar x)))

---
(WITH-STANDARD-DISCLAIMERS
   (MAKE-INSTANCE 'Signature
         :NAME      "David Loewenstern"
         :LOCATIONS '((INTERNET "davel@homxc.att.com")
                      (INTERNET "loewenst@paul.rutgers.edu")
                      (AT&T "201-386-6516"))
	 :AFFILIATIONS '("AT&T Bell Labs" "Rutgers, Dept of CS")
         :SILLY-QUOTE (UNIX:SHELL "/usr/bin/fortune"))))
From haible  Sun May  2 15:37:37 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18077; Sun, 2 May 93 15:37:37 +0200
Date: Sun, 2 May 93 15:37:37 +0200
From: haible (Bruno Haible)
Message-Id: <9305021337.AA18077@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Something out for which to watch


Peter Dudey notes:

> If you use a function like this:
>
> (defun foo (x) (delete x '(a b c d e f)))
>
> the quoted list '(a b c d e f) is NOT immune to the delete!  Running the
> function could actually change it!

Yes, this a trap, even for experienced Lisp programmers. Don't use quoted
lists in contexts where you also use destructive operations. Note that
using '() for the empty list is always safe.

> I'm not sure if this is a bug in CLISP or not--I was under the impression
> that a quoted, explicit list like that was a constant, and would be
> "re-created" every time the function was run.

No, you always refer to the same constant. CLtL2 p. 105 cites X3J13 vote
<147>: "EVAL and COMPILE are not permitted either to copy or to coalesce
constants appearing in the code they process."

David Loewenstern writes:

> I'm fairly certain that CLtL2 makes this trap specific.

Yes, X3J13 vote <36> (CLtL2 p. 70) states: "It is an error to destructively
modify any object that appears as a constant in executable code, whether
as a self-evaluating form or within a QUOTE special form."

This means that it is the programmer's responsibility. Lisp implementations
can detect such situations by putting such objects into read-only memory
(on operating systems where this is possible, e.g. Unix). But I didn't
implement this because it would disturb beginners when they are playing
around with the interpreter: simple things like (NREVERSE '(1 2 3)) would
signal an error.

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Mon May  3 06:30:18 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19103; Mon, 3 May 93 06:30:18 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA11560; Sun, 2 May 93 21:24:20 PDT
Date: Sun, 2 May 1993 21:22:47 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: The sun4-sunos4 version
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9305022147.A11469-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I've loaded it, and there are two things I don't understand:

1)  The README says you no longer need a memory file (?), but you do.

2)  Whenever I (exit) from CLISP, it knocks me out of my telnet link.

Clues, gurus?

# Peter Dudey, 11 kyu, Lisp SubGuru and Genetic Programmer Extraordinaire    #
# Good stuff to read:  "Sunshine, Genius & Rust", in this month's _Analog_   #
# "A shadowy flight into the dangerous world of a man who does not exist."   #
# Please mail me plastic spaceships:  257 NE 13th Street, Salem, OR  97301   #


From pdudey@Willamette.EDU  Mon May  3 06:38:49 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19147; Mon, 3 May 93 06:38:49 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA12042; Sun, 2 May 93 21:32:57 PDT
Date: Sun, 2 May 1993 21:30:05 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: Two more things...
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9305022105.A11864-a100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

1)  Wow, what great compatibility!  My code ported over from the DOS
version, and I didn't have to change a thing!

2)  One difference, though:  (read-char) seems to want a return now.  Is
there any way to read a single keystroke?  Since I'm on the topic, does
anybody know off the top of their heads if there's a function that will
check if a key has been pressed?

Thanks, and sorry if I'm cluttering anybody's mailboxes.  :)

# Peter Dudey, 11 kyu, Lisp SubGuru and Genetic Programmer Extraordinaire    #
# Good stuff to read:  "Sunshine, Genius & Rust", in this month's _Analog_   #
# "A shadowy flight into the dangerous world of a man who does not exist."   #
# Please mail me plastic spaceships:  257 NE 13th Street, Salem, OR  97301   #


From mnlrsg@cs.umu.se  Mon May  3 10:32:33 1993
Received: from ume.cs.umu.se by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19319; Mon, 3 May 93 10:32:33 +0200
Received: from sandbacka.cs.umu.se by ume.cs.umu.se (5.65+bind 1.7+ida 1.4.2/91-02-01) id AA14472; Mon, 3 May 93 10:25:59 +0200, auth mnlrsg
X-Auth-From: mnlrsg
Received: by sandbacka.cs.umu.se (5.65+bind 1.7+ida 1.4.2/91-02-01) id AA01081; Mon, 3 May 93 10:25:54 +0200
Return-Path: <mnlrsg@cs.umu.se>
Date:  Mon, 3 May 93 10:25:54 +0200
From: mnlrsg@cs.umu.se
Message-Id: <9305030825.AA01081@sandbacka.cs.umu.se>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

Hi, folks!

First, I have to report 100% (?) portability CLisp PC-version to AKCL for UNIX systems.

Second: A friend of mins has some problems getting the minor memory version running on a 386sx with 1Mb RAM. When trying to run a program of more than 40 - 50 lines of code the interpreter responds something like "unable to swap". Is there a way to set the size of the swapfile? Any clues?

Rolf A. Sandberg
University of Umea, Sweden

#No por mucho madrugar amanece mas temprano#
From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Thu May  6 14:32:16 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23390; Thu, 6 May 93 14:32:16 +0200
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA23826; Thu, 6 May 93 14:26:13 +0200
Date: Thu, 6 May 93 14:26:13 +0200
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
Message-Id: <9305061226.AA23826@inf-wiss.ivp.uni-konstanz.de>
Received: by stetten.inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA05824; Thu, 6 May 93 14:26:04 +0200
To: clisp-list@[129.13.115.2]
Subject: CLISP running as an EMACS subprocess?

I've heard that some people were working on some clisp.el package to
make CLISP work comfortably as a Lisp-subprocess in EMACS and I'd like
to know what the current status of the work is. Is it a comint or an
ILISP superset?

 	Joerg.
hoehle@inf-wiss.ivp.uni-konstanz.de
From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Thu May  6 17:55:45 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23628; Thu, 6 May 93 17:55:45 +0200
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA24518; Thu, 6 May 93 17:49:37 +0200
Date: Thu, 6 May 93 17:49:37 +0200
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
Message-Id: <9305061549.AA24518@inf-wiss.ivp.uni-konstanz.de>
Received: by stetten.inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA05947; Thu, 6 May 93 17:49:28 +0200
To: clisp-list@[129.13.115.2]
Cc: Dave Carrico <2fwcsnap@stat1.cc.ukans.edu>
Subject: (setf (foo #) value), foo being undefined yet

Preliminaries:
> (defun fact (n) (setf (foo n) t))

*** - Illegal SETF place: (FOO N)
1. Break> 
I guess that this is a normal behaviour for CLtLI Lisps.


I came accross the following code:

* (macroexpand-1 '(defroutine add1-nam ((:nam e) (:nam i) n)
  (cond ((< i n) (setf e (+ e 1)))
        (t nil))))

(PROGN
 (DEFUN ADD1-NAM** (N)
   (LET ((N (EVAL N)))		; I believe that EVAL to be wrong,
                                ; but that's another story.
     (COND ((< (I**) N) (SETF (E**) (+ (E**) 1))) (T NIL))
     (VALUES)))
 (DEFMACRO ADD1-NAM (E I N)
   `(PROGN
     ,@(DEFTHUNK 'E** E)
     ,@(DEFTHUNK 'I** I)
     (MULTIPLE-VALUE-BIND NIL (ADD1-NAM** ,N))
     NIL)))
T
* (defthunk 'e** 'foobar)

((SETF (SYMBOL-FUNCTION 'E**) #'(LAMBDA () FOOBAR))
 (SETF (SYMBOL-FUNCTION 'E**-SET) #'(LAMBDA (VAL) (SETF FOOBAR VAL)))
 (DEFSETF E** E**-SET))
* 

Loading a file containing the above defroutine leads to the following
error:
*** - Illegal SETF place: (E**)
1. Break> where

EVAL-Frame fr Form (LABELS ((ADD1-NAM** (N) (BLOCK ADD1-NAM** (LET ((N (EVAL N))) (COND ((< (I**) N) (SETF (E**) (+ (E**) 1))) (T NIL)) (VALUES))))) #'ADD1-NAM**)
1. Break> 

The error comes from the (SETF (E**) #) call in ADD1-NAM**, the
defsetf for e** would only occur when the add1-nam macro is actually
called/used, not in the defroutine call.

I wonder whether the above code using a yet undefined setf is correct
for CLtLI or CLtLII. In CLtLII, setf, seeing an unknown (setf (f #) #)
form, has been expanded to produce a call to the (setf f) function,
whereas in CLtLI (setf f) was not considered as being a function name.
I'm not sure whether the above code intended to make use of this
extended setf behaviour and thus was written for CLtLII. When
compiling the above, CMULISP (CLtLII) generates warnings about
undefined functions (SETF E**), E** and I**.

I'm tempted to believe that the above code is wrong w.r.t. both
standards and that it should have been written in another way (perhaps
with all needed defsetfs before the defun in the defroutine
macro-expansion, even if the used functions are not defined at that
time (is this allowed?), and maybe with some preceeding (declare
(notinline E** E**-SET))).

Thanks for your help,
 	Joerg.
hoehle@inf-wiss.ivp.uni-konstanz.de
From haible  Sun May  9 22:07:36 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25394; Sun, 9 May 93 22:07:36 +0200
Date: Sun, 9 May 93 22:07:36 +0200
From: haible (Bruno Haible)
Message-Id: <9305092007.AA25394@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: CLISP running as an EMACS subprocess?

> I've heard that some people were working on some clisp.el package to
> make CLISP work comfortably as a Lisp-subprocess in EMACS

Ziad Najem's package has circulated in this mailing list and is now contained
in ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/mailing-list-archive .

Is any other working interface between EMACS and CLISP known?

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Sun May  9 22:08:21 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25421; Sun, 9 May 93 22:08:21 +0200
Date: Sun, 9 May 93 22:08:21 +0200
From: haible (Bruno Haible)
Message-Id: <9305092008.AA25421@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: (setf (foo #) value), foo being undefined yet

Joerg Hoehle writes:

> I wonder whether the above code using a yet undefined setf is correct
> for CLtLI or CLtLII. In CLtLII, setf, seeing an unknown (setf (f #) #)
> form, has been expanded to produce a call to the (setf f) function,
> whereas in CLtLI (setf f) was not considered as being a function name.

True.

> I'm not sure whether the above code intended to make use of this
> extended setf behaviour and thus was written for CLtLII.

Apparently.

> I'm tempted to believe that the above code is wrong w.r.t. both
> standards and that it should have been written in another way

It is wrong only w.r.t. CLTL1, but is will be a good idea to change
the macroexpansion of (DEFROUTINE ...) from
(PROGN
  (DEFUN ADD1-NAM** (N)
    (LET ((N (EVAL N)))
      (COND ((< (I**) N) (SETF (E**) (+ (E**) 1))) (T NIL))
      (VALUES)
  ) )
  (DEFMACRO ADD1-NAM (E I N)
    `(PROGN
       ,@(DEFTHUNK 'E** E)
       ,@(DEFTHUNK 'I** I)
       (MULTIPLE-VALUE-BIND NIL (ADD1-NAM** ,N))
       NIL
) )  )
to something like
(PROGN
  (EVAL-WHEN (COMPILE LOAD EVAL)
    ,@(DEFTHUNK 'E** E)
    ,@(DEFTHUNK 'I** I)
  )
  (DEFMACRO ADD1-NAM (E I N)
    (ONCE-ONLY (E I N)
      `(PROGN
         (COND ((< (I**) N) (SETF (E**) (+ (E**) 1))) (T NIL))
         (VALUES)
  ) )  )
)

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Mon May 10 12:23:37 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA29029; Mon, 10 May 93 12:23:37 +0200
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA00695; Mon, 10 May 93 12:15:14 +0200
Date: Mon, 10 May 93 12:15:14 +0200
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
Message-Id: <9305101015.AA00695@inf-wiss.ivp.uni-konstanz.de>
Received: by stetten.inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA06783; Mon, 10 May 93 12:15:05 +0200
To: clisp-list@[129.13.115.2], haible@[129.13.115.2]
Subject: Re: (setf (foo #) value), foo being undefined yet
In-Reply-To: <9305092008.AA25421@ma2s2.mathematik.uni-karlsruhe.de>
References: <9305092008.AA25421@ma2s2.mathematik.uni-karlsruhe.de>

I wrote:
> I'm not sure whether the above code intended to make use of this
> extended setf behaviour and thus was written for CLtLII.

Bruno Haible replied:
> It is wrong only w.r.t. CLTL1, but is will be a good idea to change
> the macroexpansion of (DEFROUTINE ...) from

I still think that it's even wrong for CLtLII the way it was done, but
anyway I changed it to generate:
(PROGN
 (DEFSETF E** E**-SET)
 (DEFSETF I** I**-SET)
 ;; neither E** nor E**-SET are defined now, but they'll be when this
 ;; function gets called. A (declare (notinline E** E**-SET)) could be
 ;; in add1-nam** to make things really safe.
 (DEFUN ADD1-NAM** (N)
   (LET ()
     (COND ((< (I**) N) (SETF (E**) (+ (E**) 1))) (T NIL))
     (VALUES)))
 (DEFMACRO ADD1-NAM (E I N)
   `(PROGN
     ,@(DEFTHUNK 'E** E)
     ,@(DEFTHUNK 'I** I)
     (MULTIPLE-VALUE-BIND NIL (ADD1-NAM** ,N))
     NIL)))
and removed the defsetf from the defthunk generation:
> (defthunk 'e** 'bar)
((SETF (SYMBOL-FUNCTION E**) #'(LAMBDA () BAR))
 (SETF (SYMBOL-FUNCTION 'E**-SET) #'(LAMBDA (VAL) (SETF BAR VAL))))
making the setf functions known to Lisp before their use.

 	Joerg.
hoehle@inf-wiss.ivp.uni-konstanz.de
From haible  Tue May 11 17:29:17 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00850; Tue, 11 May 93 17:29:17 +0200
Date: Tue, 11 May 93 17:29:17 +0200
From: haible (Bruno Haible)
Message-Id: <9305111529.AA00850@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: foreign functions

On April 16, 1993, Brad Might <jbm@hal.com> asked:

> Is there any internals documentation
> (in english ?). I am very interested in this stuff. How can I add some
> functions written in C ?

Such documentation has now been written. It will be contained as
src/foreign.txt in the next CLISP source release, which will be announced
on this list.

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil  Wed May 12 03:39:35 1993
Return-Path: <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Received: from nmrdc1.nmrdc.nnmc.navy.mil by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02170; Wed, 12 May 93 03:39:35 +0200
Received: by nmrdc1.nmrdc.nnmc.navy.mil id AA02611
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Tue, 11 May 1993 21:33:12 -0400
Date: Tue, 11 May 1993 21:33:12 -0400
From: Philip Perucci <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Message-Id: <199305120133.AA02611@nmrdc1.nmrdc.nnmc.navy.mil>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: CLOS/CLX on clisp?

msg1.rdy
From uho@informatik.uni-kiel.dbp.de  Wed May 19 17:48:34 1993
Return-Path: <uho@informatik.uni-kiel.dbp.de>
Received: from ixgate.gmd.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15743; Wed, 19 May 93 17:48:34 +0200
X400-Received:  by mta ixgate.gmd.de in /PRMD=GmD/ADMD=DbP/C=DE/; Relayed; Wed, 19 May 1993 17:37:29 +0200
X400-Received:  by /PRMD=uni-kiel/ADMD=dbp/C=de/; Relayed; Wed, 19 May 1993 17:38:01 +0200
Date:  Wed, 19 May 1993 17:38:01 +0200
X400-Originator:  uho@informatik.uni-kiel.dbp.de
X400-Recipients:  clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X400-Mts-Identifier:  [/PRMD=uni-kiel/ADMD=dbp/C=de/;gutemine    024613.0737825881000]
X400-Content-Type:  P2-1984 (2)
From: Ulrich Hoffmann <uho@informatik.uni-kiel.dbp.de>
Message-Id:  <9305191537.AA27703@minnie.informatik.uni-kiel.dbp.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject:  Problems with hash-table-setf and system-functions

I've discovered a problem with setf on hash-tables with functions.
While CLISP compiles the following code without errors, it cannot read
back the generated .fas-file:

test.lsp------------------------------------------------------------------------
(defvar *v*)

(defun f()
  (setq *v* (make-hash-table))
  (setf (gethash 'list) #'list))
--------------------------------------------------------------------------------

minnie% clisp
 ...
        |                                                         
  ------+------     Copyright (c) Bruno Haible, Michael Stoll 1992, 1993

> (compile-file "test")
   
Compiling file /tmp_mnt/home/karlo/uho/clicc/src/compiler/test.lsp ...

Compilation of file /tmp_mnt/home/karlo/uho/clicc/src/compiler/test.lsp is finished.
0 errors, 0 warnings
T
> (load "test")
;; Loading file /tmp_mnt/home/karlo/uho/clicc/src/compiler/test.fas ...
*** - READ from #<STRING-CHAR-FILE-STREAM #"/tmp_mnt/home/karlo/uho/clicc/src/compiler/test.fas">: objects printed as #<...> cannot be read back in
1. Break> 

--------------------------------------------------------------------------------
 
The problem seems to be, that the (function list) becomes the
unprintable object #<SYSTEM-FUNCTION LIST> in the .fas file.


Any comments?

             Ulrich


Ulrich Hoffmann                  email: uho@informatik.uni-kiel.dbp.de  
Institut fuer Informatik, Universitaet Kiel        Tel: +49 431 560426 
Preusserstr 1-9, D-2300 Kiel 1, Germany            Fax: +49 431 566143
From uho@informatik.uni-kiel.dbp.de  Wed May 19 17:51:51 1993
Return-Path: <uho@informatik.uni-kiel.dbp.de>
Received: from ixgate.gmd.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15806; Wed, 19 May 93 17:51:51 +0200
X400-Received:  by mta ixgate.gmd.de in /PRMD=GmD/ADMD=DbP/C=DE/; Relayed; Wed, 19 May 1993 17:41:53 +0200
X400-Received:  by /PRMD=uni-kiel/ADMD=dbp/C=de/; Relayed; Wed, 19 May 1993 17:42:24 +0200
Date:  Wed, 19 May 1993 17:42:24 +0200
X400-Originator:  uho@informatik.uni-kiel.dbp.de
X400-Recipients:  clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X400-Mts-Identifier:  [/PRMD=uni-kiel/ADMD=dbp/C=de/;gutemine    024663.0737826144000]
X400-Content-Type:  P2-1984 (2)
From: Ulrich Hoffmann <uho@informatik.uni-kiel.dbp.de>
Message-Id:  <9305191541.AA27746@minnie.informatik.uni-kiel.dbp.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject:  Problems with hash-table-setf and system-functions

Shame on me - the example should look like:

--------------------------------------------------------------------------------
(defvar *v*)

(defun f()
  (setq *v* (make-hash-table))
  (setf (gethash 'list *v*)  #'list))
--------------------------------------------------------------------------------

Anyway, the effect is still the same.

Ulrich

Ulrich Hoffmann                  email: uho@informatik.uni-kiel.dbp.de  
Institut fuer Informatik, Universitaet Kiel        Tel: +49 431 560426 
Preusserstr 1-9, D-2300 Kiel 1, Germany            Fax: +49 431 566143
From haible  Mon May 24 13:17:41 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04323; Mon, 24 May 93 13:17:41 +0200
Date: Mon, 24 May 93 13:17:41 +0200
From: haible (Bruno Haible)
Message-Id: <9305241117.AA04323@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

The list of supported platforms now include 386BSD 0.1, Coherent 386,
Sun3/SunOS4 and DEC5000/Ultrix.

Excerpt from the change log:

User visible changes
--------------------

* New macro DEFPACKAGE.

* New function FUNCTION-LAMBDA-EXPRESSION.

* New package SCREEN containing some functions for random screen access
  (Unix, DOS, OS/2, Atari, VMS versions only).

* X3J13 vote <5> is implemented: The value of *APPLYHOOK* must now be
  a function of two arguments.

* X3J13 vote <104> is implemented: COMPILE-FILE now binds *READTABLE*.

* X3J13 vote <161> is implemented: SHADOW now accepts strings as well
  as symbols.

* Fixed a bug in the compiler which caused the compiler to crash when
  compiling (CASE key ...) forms with constant key.

* Fixed a bug in the compiler which produced unloadable .fas files
  when compiling forms like (SETF ... (FUNCTION LIST)).

* Fixed a bogus error message in the AREF function.

* The built-in editor on Unix now handles the Delete key the same way
  as the Backspace key or Ctrl-H.

* Fixed a bug in + that occasionally caused (- x x) to return a
  long-float zero which was not EQL to the other zeroes of type LONG-FLOAT.

* Fixed a bug: Correctly do round-to-even when adding two long-floats.

* Fixed a bug: The destructive sequence functions DELETE etc. failed to
  produce an error when called on a sequence of type LIST and with an :END
  argument larger than the list's length.

* Corrected the branch cuts of the complex ATAN and ATANH functions.

Portability
-----------

* 68000 and other versions: Fixed a bug in the low-level division algorithm.

* Mips and Vax versions: Finished the low-level number crunching routines.

* Added Ultrix support.

* Added Coherent support.

* Finished Sun3 support.

Other modifications
-------------------

* The file `src/defs2.lsp' contains a list of X3J13 votes and their current
  status in CLISP.

* The file `src/foreign.txt' documents how to do function calls to foreign
  language routines from within CLISP.

* Miscellaneous documentation updates.


Enjoy!
                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon May 24 13:27:45 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05268; Mon, 24 May 93 13:27:45 +0200
Date: Mon, 24 May 93 13:27:45 +0200
From: haible (Bruno Haible)
Message-Id: <9305241127.AA05268@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Use September 92 (f) PCL and CLX

My port of September 92 PCL to CLISP was incomplete: it lacked support
of structure classes. This has now been fixed. Thanks to Cornelis van
der Laan <nils@ims.uni-stuttgart.de> who pointed this out to me.

I have built a new Sept92f distribution in /pub/lisp/clisp/packages/ on
ma2s2.mathematik.uni-karlsruhe.de. July92 PCL or Sept92c PCL are obsolete.
Use the Sept92f version.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From garmann@vax1.informatik.fh-regensburg.dbp.de  Wed May 26 08:42:22 1993
Return-Path: <garmann@vax1.informatik.fh-regensburg.dbp.de>
Received: from ixgate.gmd.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08195; Wed, 26 May 93 08:42:22 +0200
X400-Received:  by mta ixgate.gmd.de in /PRMD=GmD/ADMD=DbP/C=DE/; Relayed; Wed, 26 May 1993 08:30:59 +0200
X400-Received:  by /PRMD=fh-regensburg/ADMD=dbp/C=de/; Relayed; Wed, 26 May 1993 09:31:02 +0200
Date:  Wed, 26 May 1993 09:31:02 +0200
X400-Originator:  garmann@vax1.informatik.fh-regensburg.dbp.de
X400-Recipients:  clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X400-Mts-Identifier:  [/PRMD=fh-regensburg/ADMD=dbp/C=de/;930526083102]
X400-Content-Type:  P2-1984 (2)
Content-Identifier:  279
From: Udo Garmann <garmann@vax1.informatik.fh-regensburg.dbp.de>
Message-Id:  <279*/S=garmann/OU=vax1/OU=informatik/PRMD=fh-regensburg/ADMD=dbp/C=de/@MHS>
To: <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject:  CLISP & ISO5

Hello,
A general question: What are the differences between CLISP and the ISO5
documentation in /pub/lisp/islisp on the CLISP-Server? Can it be used as a
documentation on CLISP as well? Is the ISO-Standard still under development?
Thanx in advance,
Udo garmann@vax1.informatik.fh-regensburg.dbp.de
From haible  Wed May 26 13:48:27 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08712; Wed, 26 May 93 13:48:27 +0200
Date: Wed, 26 May 93 13:48:27 +0200
From: haible (Bruno Haible)
Message-Id: <9305261148.AA08712@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLISP & ISO 8.5

Udo Garmann has discovered the existence of ISLISP 8.5:

> What are the differences between CLISP and the ISO5
> documentation in /pub/lisp/islisp on the CLISP-Server?

Clisp is an implementation of Common Lisp.

ISLisp is a draft for the ISO Standard for the programming language Lisp.
It is not Common Lisp, nor Eulisp, nor Scheme.
It has some things in common with Common Lisp for historical and political
reasons.

> Is the ISO-Standard still under development?

Yes, the ISO working group for Lisp is still polishing it.
The only implementation of it I know of now is an interpreter written by
Kent M. Pitman.

> Can it be used as a documentation on CLISP as well?

No.

It happens to be on the same FTP server as CLISP because the ftp.bath.ac.uk
server is rather slow when accessed from Germany.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From ae1181t@stnfor.ae.ge.com  Fri May 28 02:27:58 1993
Return-Path: <ae1181t@stnfor.ae.ge.com>
Received: from stnfor.ae.ge.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12617; Fri, 28 May 93 02:27:58 +0200
Received: by stnfor.ae.ge.com (5.65/DEC-Ultrix/4.3)
	id AA05349; Thu, 27 May 1993 20:15:32 -0400
Date: Thu, 27 May 1993 20:15:32 -0400
From: ae1181t@stnfor.ae.ge.com (Osman F Buyukisik)
Message-Id: <9305280015.AA05349@stnfor.ae.ge.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: clx with hp710-hpux8.07 hangs

Hi, I just built the pcl, clx using clisp. However clx tests do not work on
my system. They just sit there and do not even open a window. I have hp710
with hpux8.07. The hp9000s800 stuff seem to work (at least compiles pcl and clx
). Loaded "series" and tests went up the 438 but died there. Has anyone else
had similiar problems? fixes?  I am trying clisp so that I can use pcl/clx to
bring "weyl" algebra system up. AKCL 615 didnt finish compiling pcl! 
Thanks in advance.
Osman
From dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil  Sat May 29 21:56:22 1993
Return-Path: <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Received: from nmrdc1.nmrdc.nnmc.navy.mil by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13979; Sat, 29 May 93 21:56:22 +0200
Received: by nmrdc1.nmrdc.nnmc.navy.mil id AA14896
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Sat, 29 May 1993 15:48:49 -0400
From: Philip Perucci <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Message-Id: <199305291948.AA14896@nmrdc1.nmrdc.nnmc.navy.mil>
Subject: Platform = Linux?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Sat, 29 May 1993 15:48:29 -0400 (EDT)
X-Mailer: ELM [version 2.4 PL21]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 372       


Regarding the new version of CLISP...

I was under the impression that Linux was a supported platform.
Was the ommision of Linux an accident, is it know to compile
as one of the other platforms, or is Linux simply not supported?

CLISP has been included as "standard" with the Linux SLS
distribution (the largest, easiest to install distribution)
for many months now...

From haible  Tue Jun  1 14:57:23 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15398; Tue, 1 Jun 93 14:57:23 +0200
Date: Tue, 1 Jun 93 14:57:23 +0200
From: haible (Bruno Haible)
Message-Id: <9306011257.AA15398@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Platform Linux?

Philip Perucci wrote:

> I was under the impression that Linux was a supported platform.

It is.

> Was the ommision of Linux an accident...?

You are apparently referring to my words:

   The list of supported platforms now include 386BSD 0.1, Coherent 386,
   Sun3/SunOS4 and DEC5000/Ultrix.

This was the list of new platforms. The full list of platforms where CLISP
is known to run on is now:

  microcomputers:
    Atari ST
    Amiga 500-4000
    DOS
    OS/2
  Unix workstations:
    Linux
    Sun4, SunOS4
    Sun386, SunOS4
    Sun3, SunOS4
    Sun4, SunOS5
    386BSD
    Coherent 386
    DEC5000, Ultrix
    HP9000/800, HP9000/700, HP-UX 8.05

Ports are being done for
    SGI, Irix
    VAX, VMS


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil  Tue Jun  1 17:39:38 1993
Return-Path: <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Received: from nmrdc1.nmrdc.nnmc.navy.mil by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16274; Tue, 1 Jun 93 17:39:38 +0200
Received: by nmrdc1.nmrdc.nnmc.navy.mil id AA04719
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Tue, 1 Jun 1993 11:32:10 -0400
From: Philip Perucci <dsc3pzp@nmrdc1.nmrdc.nnmc.navy.mil>
Message-Id: <199306011532.AA04719@nmrdc1.nmrdc.nnmc.navy.mil>
Subject: Re: Platform Linux?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Tue, 1 Jun 1993 11:31:57 -0400 (EDT)
In-Reply-To: <9306011257.AA15398@ma2s2.mathematik.uni-karlsruhe.de> from "Bruno Haible" at Jun 1, 93 02:59:12 pm
X-Mailer: ELM [version 2.4 PL21]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 1260      

> 
> Philip Perucci wrote:
> 
> > I was under the impression that Linux was a supported platform.
> 
> It is.
> 
> > Was the ommision of Linux an accident...?
> 
> You are apparently referring to my words:
> 
>    The list of supported platforms now include 386BSD 0.1, Coherent 386,
>    Sun3/SunOS4 and DEC5000/Ultrix.
> 
> This was the list of new platforms. The full list of platforms where CLISP
> is known to run on is now:
> 
>   microcomputers:
>     Atari ST
>     Amiga 500-4000
>     DOS
>     OS/2
>   Unix workstations:
>     Linux
>     Sun4, SunOS4
>     Sun386, SunOS4
>     Sun3, SunOS4
>     Sun4, SunOS5
>     386BSD
>     Coherent 386
>     DEC5000, Ultrix
>     HP9000/800, HP9000/700, HP-UX 8.05
> 
> Ports are being done for
>     SGI, Irix
>     VAX, VMS
> 
> 
>                     Bruno Haible
>                     haible@ma2s2.mathematik.uni-karlsruhe.de
> 

Hmmm...

I compiled your latest CLISP on my Linux "SLS 1.02", with no
crashes (a few warnings, of course).

But "make test" died comparing files.

Running CLISP gave me the sign-on screen, but running a
little 2-page program crashed Linux.  FIRST time I ever
saw Linux crash!

A gentleman from Italy who ported AKCL to Linux says you
run AKCL on your Linux box!!!  Odd...

From baus@rz.uni-sb.de  Fri Jun  4 16:54:36 1993
Return-Path: <baus@rz.uni-sb.de>
Received: from sbusol.rz.uni-sb.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03473; Fri, 4 Jun 93 16:54:36 +0200
From: "Joerg Baus" <baus@rz.uni-sb.de>
Date:  Fri, 4 Jun 93 16:42:47 +0200
Message-Id:  <9306041442.AA17742@sbusol.rz.uni-sb.de>
Received: by sbusol.rz.uni-sb.de (5.65+/v1.0)
	id AA17742; Fri, 4 Jun 93 16:42:47 +0200
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: precision of long floats


Bruno Haible wrote (in impnotes.txt):
"(SETF (LONG-FLOAT-DIGITS) 3322) sets the default precision of long
 floats to 1000 decimal digits."

How does he compute this? What I need is a function

(defun precision (n)
   ... )

to set the precision to n decimal digits. Any ideas?

Greetings Joerg


Joerg Baus | baus@sbusol.rz.uni-sb.de
From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Fri Jun  4 17:24:21 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03535; Fri, 4 Jun 93 17:24:21 +0200
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA01726; Fri, 4 Jun 93 17:10:39 +0200
Date: Fri, 4 Jun 93 17:10:39 +0200
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
Message-Id: <9306041510.AA01726@inf-wiss.ivp.uni-konstanz.de>
Received: by stetten.inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA19903; Fri, 4 Jun 93 17:10:31 +0200
To: Joerg Baus <baus@rz.uni-sb.de>
Cc: clisp-list@[129.13.115.2]
Subject: precision of long floats
In-Reply-To: <9306041442.AA17742@sbusol.rz.uni-sb.de>

Joerg Baus writes:
 > 
 > Bruno Haible wrote (in impnotes.txt):
 > "(SETF (LONG-FLOAT-DIGITS) 3322) sets the default precision of long
 >  floats to 1000 decimal digits."
 > 
 > How does he compute this? What I need is a function
 > 
 > (defun precision (n)
 >    ... )
 > 
 > to set the precision to n decimal digits. Any ideas?

(log n m) tells you a multiplying factor for the number of digits a
representation in base m (for example 2) would take over a
representation in base n (for example 10).

How about

(defun precision (n)
  "sets default long-float precision to N decimal digits."
  (setf (long-float-digits) (ceiling (* n (log 10 2))))
  (long-float-digits)	; return binary precision actually set
)

?

 	Joerg.
hoehle@inf-wiss.ivp.uni-konstanz.de
From @ibm3090.rz.uni-karlsruhe.de:ortigosa@INF.UFRGS.BR  Thu Jun 10 03:17:41 1993
Return-Path: <@ibm3090.rz.uni-karlsruhe.de:ortigosa@INF.UFRGS.BR>
Received: from ibm3090.rz.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27472; Thu, 10 Jun 93 03:17:41 +0200
Received: from DKAUNI2 by ibm3090.rz.uni-karlsruhe.de (IBM MVS SMTP V2R2.1)
   with BSMTP id 9048; Thu, 10 Jun 93 03:04:45 MET
Received: (from VM.GMD.DE for <@VM.GMD.DE:ortigosa@INF.UFRGS.BR> via BSMTP)
Received: (from MAILER@DEARN for MAILER@DKAUNI2 via NJE)
 (UCLA/Mail V1.500 M-RSCS7079-7079-41); Thu, 10 Jun 93 02:57:53
Received: from brfapesp.bitnet (NJE origin SMTPUSER@BRFAPESP) by VM.GMD.DE
 (LMail V1.1d/1.7f) with BSMTP id 1900; Thu, 10 Jun 1993 01:12:09 +0200
Received: from vortex.ufrgs.br by brfapesp.bitnet with PMDF#10108; Wed, 9 Jun
 1993 12:45 BSC (-0300 C)
Received: from inf.ufrgs.br (143.54.2.99) by vortex.ufrgs.br (PMDF V4.2-11
 #4493) id <01GZ6AQPX3WW000110@vortex.ufrgs.br>; Wed, 9 Jun 1993 12:35:23 -0300
Received: from jarau.inf.ufrgs.br by inf.ufrgs.br (4.1/SMI-4.1) id AA01357;
 Wed, 9 Jun 93 12:36:35 EST
Received: from itapeva.inf.ufrgs.br by jarau.inf.ufrgs.br (4.1/SMI-4.1) id
 AA02661; Wed, 9 Jun 93 12:37:53 EST
Date: Wed, 09 Jun 1993 12:37:53 -0500 (EST)
From: ortigosa@INF.UFRGS.BR(Alvaro Manuel Ortigosa)
Subject: clue instalation
To: clisp-list@MA2S2.mathematik.uni-karlsruhe.de
Message-Id: <9306091537.AA02661@JARAU.INF.UFRGS.BR>
X-Envelope-To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Content-Transfer-Encoding: 7BIT

I'm trying to install clue + clio packages, and I had several problems; can
anyone tell me what I did wrong ?
        First I took the file pcl+clx.sept92f.clisp.tar.z, and installed pcl and
    clx, without problems. Then I took the file clue+clio.for-pcl.tar.Z
(always from ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/packages).
Because I've got problems with the disk space, I deleted the sources of pcl,
but I still have sources of clx.
        When I tried to compile clue, I had a lot of problems (for example,
it doesn't compile a "defparameter").
        What I want to know is:
                - Have I got the corrects files ?
                - Do I need every source file at the time to compile clue?
                - What another thing could I make wrong ?

        I hope someone can help me. Thanks in advance.

Alvaro Ortigosa
From ae1181t@stnfor.ae.ge.com  Thu Jun 10 15:12:30 1993
Return-Path: <ae1181t@stnfor.ae.ge.com>
Received: from stnfor.ae.ge.com ([192.35.29.5]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27865; Thu, 10 Jun 93 15:12:30 +0200
Received: by stnfor.ae.ge.com (5.65/DEC-Ultrix/4.3)
	id AA19910; Thu, 10 Jun 1993 08:57:30 -0400
Date: Thu, 10 Jun 1993 08:57:30 -0400
From: ae1181t@stnfor.ae.ge.com (Osman F Buyukisik)
Message-Id: <9306101257.AA19910@stnfor.ae.ge.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: <9306091537.AA02661@JARAU.INF.UFRGS.BR> (ortigosa@inf.ufrgs.br.ae.ge.com)
Subject: Re: clue instalation


   I'm trying to install clue + clio packages, and I had several problems; can
   anyone tell me what I did wrong ?
	   First I took the file pcl+clx.sept92f.clisp.tar.z, and installed pcl and
       clx, without problems. Then I took the file clue+clio.for-pcl.tar.Z
   (always from ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/packages).
   Because I've got problems with the disk space, I deleted the sources of pcl,
   but I still have sources of clx.
	   When I tried to compile clue, I had a lot of problems (for example,
   it doesn't compile a "defparameter").
	   What I want to know is:
		   - Have I got the corrects files ?
		   - Do I need every source file at the time to compile clue?
		   - What another thing could I make wrong ?

I think if you look in the READMEs or install files it tells you to get
the march version not sept of pcl for clue. 
Hope this helps.
Osman


From liotard@mimosa.unice.fr  Fri Jun 11 09:40:50 1993
Return-Path: <liotard@mimosa.unice.fr>
Received: from mimosa.unice.fr by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA28390; Fri, 11 Jun 93 09:40:50 +0200
Received: by mimosa.unice.fr
	(5.65c/IDA-1.2.8) id AA03959; Fri, 11 Jun 1993 09:24:58 +0100
Date: Fri, 11 Jun 1993 09:24:58 +0100
From: Liotard Jean <liotard@mimosa.unice.fr>
Message-Id: <199306110824.AA03959@mimosa.unice.fr>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: clue instalation

I tried to install clue and clio some time ago and didn't have 
a better luck.

pcl+clx went fine . i could run the demo.
(replacing the sept92 pcl version by march92 pcl)

for clue+clio , there were some errors (?) in the code.
there's a macro ignore-errors expanding into nil, and i had to add
an explicit block insert-text-something?  because the flet didn't
built it.

so i managed to run clue : the example ran fine. but all i could
do in clio was to open a single window with nothing in it
the type of error i got was :  add 1 to nil  or a bad array access.

i got rid of it,  but if you manage to get it working (like opening
a window with a button in it !) please let me know.


jean
From dl@hplyot.obspm.circe.fr  Tue Jun 15 12:34:53 1993
Return-Path: <dl@hplyot.obspm.circe.fr>
Received: from hplyot.obspm.circe.fr by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01806; Tue, 15 Jun 93 12:34:53 +0200
Message-Id: <9306151034.AA01806@ma2s2.mathematik.uni-karlsruhe.de>
Received: by hplyot.obspm.circe.fr
	(16.8/16.2) id AA08034; Tue, 15 Jun 93 12:20:35 +0200
Date: Tue, 15 Jun 93 12:20:35 +0200
From: Laurent Demailly <dl@hplyot.obspm.circe.fr>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: New CLISP version
In-Reply-To: <9305241117.AA04323@ma2s2.mathematik.uni-karlsruhe.de>
References: <9305241117.AA04323@ma2s2.mathematik.uni-karlsruhe.de>


	Hi,
I'm trying to build up clisp from sources, on an HP 9000/720 HP-UX
8.07, I got the following error while building with HP CC :
everything went fine 'till the 'make lisp.run' part :
------ make.lisp.run.log : -------
        cc  -c spvw.c
unix.d: 425: TCSETATTR redefined
lispbibl.d: 2327: syntax error (in preprocessor if)
lispbibl.d: 3133: syntax error (in preprocessor if)
lispbibl.d: 3181: syntax error (in preprocessor if)
lispbibl.d: 3278: syntax error (in preprocessor if)
lispbibl.d: 6680: syntax error (in preprocessor if)
spvw.d: 2186: syntax error (in preprocessor if)
spvw.d: 4623: signal: argument mismatch
spvw.d: 4623: signal: argument mismatch
spvw.d: 4623: signal: argument mismatch
[... 10 pages like that...]
spvw.d: 4623: signal: argument mismatch
spvw.d: 4623: no space
*** Error code 1

Stop.
------------- end of log -------
the first error line is around :
# Typinfo:
# typecode(object) und mtypecode(object) liefern den Typcode eines
# Objektes obj. Bei mtypecode mu er dazu im Speicher liegen.
  #if !(exact_uint_size_p(oint_type_len) && (tint_type_mask == bit(oint_type_len)-1))
    #define typecode(expr)  \
      ((tint)((oint)(expr) >> oint_type_shift) & (oint_type_mask >> oint_type_shift))
[...]

Any hint ? *help* ! ;-)

Yours,
dl
From haible  Tue Jun 15 18:50:40 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02400; Tue, 15 Jun 93 18:50:40 +0200
Date: Tue, 15 Jun 93 18:50:40 +0200
From: haible (Bruno Haible)
Message-Id: <9306151650.AA02400@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Laurent Demailly is trying to build up clisp from source:
> on an HP 9000/720 HP-UX 8.07, I got the following error
> while building with HP CC

The file unix/PLATFORMS states that HP CC is too buggy for building CLISP.
The problem you encountered is only the first of these bugs.
Get another C compiler.

Or get the binaries of the February version:
   ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/hp9000s800/clisp.tar.z


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

From syali@cs.Buffalo.EDU  Tue Jun 15 19:22:07 1993
Return-Path: <syali@cs.Buffalo.EDU>
Received: from pegasus.cs.Buffalo.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02486; Tue, 15 Jun 93 19:22:07 +0200
Received: by pegasus.cs.Buffalo.EDU (4.1/1.01)
	id AA29129; Tue, 15 Jun 93 13:08:32 EDT
Date: Tue, 15 Jun 93 13:08:32 EDT
From: syali@cs.Buffalo.EDU (Sy Ali)
Message-Id: <9306151708.AA29129@pegasus.cs.Buffalo.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: File-write-date


Is file-write date supposed to produce an error, as in the below?

----
                                                                  

> (file-write-date "nonexistent.file")

*** - FILE-WRITE-DATE: file #"/home/syali/clisp/bin/nonexistent.file" does not exist
1. Break> 

----

Steele (pg 655) state "..., or nil if this cannot be determined." The intent
appears that a nonexistent file return nil. This is what happens in Lucid,
Allegro, and Allegro CL\PC.

Sy

From haible  Mon Jun 21 12:35:31 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06707; Mon, 21 Jun 93 12:35:31 +0200
Date: Mon, 21 Jun 93 12:35:31 +0200
From: haible (Bruno Haible)
Message-Id: <9306211035.AA06707@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: File-write-date

> Is file-write date supposed to produce an error, as in the below?
> Steele (pg 655) state "..., or nil if this cannot be determined." The intent
> appears that a nonexistent file return nil.

Maybe. The wording is not clear, so you can't rely on your interpretation.
PROBE-FILE and some uses of OPEN are to the only pathname functions that
are guaranteed not to produce an error even if the file does not exist,
so you should use
      (AND (PROBE-FILE file) (FILE-WRITE-DATE file))
if you want to be careful.

Bruno Haible
From P2043742@csdvax.csd.unsw.EDU.AU  Tue Jun 29 04:52:45 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01125; Tue, 29 Jun 93 04:52:45 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF #2556 )
 id <01GZY971YY7A8WZP0M@csdvax.csd.unsw.EDU.AU>; Tue, 29 Jun 1993 12:53:46 +1000
Date: 29 Jun 1993 12:53:46 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Help to build CLUE.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01GZY971YY7C8WZP0M@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Somebody out there,

I am sending this mail in relation to compiling the CLUE system under CLISP.

I've downloaded the clue+clio+xit.tar.z from ma2s2.mathematik.uni-karlsruhe.de
and I've been trying to compile the system with no success.

During buildig CLUE I get the following error message.

; Loading   intrinsics.fas *** - The class #<std-instance #x194037C0> was
specified as a super-class of the class #<std-instance #x193A3D30>;
but the meta-classes #<std-instance #x19105BE8>
and #<std-instance #x19105AE8> are incompatible.
1. Break>

I need clue for my theses as soon as possible.

If somebody out there can help me urgently I would approtiate it.

Bela Pecsek.
From haible  Tue Jun 29 21:52:58 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07106; Tue, 29 Jun 93 21:52:58 +0200
Date: Tue, 29 Jun 93 21:52:58 +0200
From: haible (Bruno Haible)
Message-Id: <9306291952.AA07106@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

The list of supported platforms now include SGI Irix 4.

The port to VMS stagnates, being finished at 85%. Anyone with access to a
powerful VMS machine wants to continue?

Excerpt from the change log:

User visible changes
--------------------

* X3J13 vote <89> is implemented: (SETF symbol) is now a valid syntax for a
  function name in (funname ...), (FUNCTION funname), (DEFUN funname ...),
  (COMPILE funname ...), (DISASSEMBLE funname), (ED funname), FLET, LABELS etc.
  New function FDEFINITION.

* X3J13 vote <173> is implemented: New special form SYMBOL-MACROLET. The
  macroexpansion environment passed to macro expanders and to MACROEXPAND-1,
  MACROEXPAND, GET-SETF-METHOD, GET-SETF-METHOD-MULTIPLE-VALUE now comprises
  both the variable environment and the function environment.
  New macro DEFINE-SYMBOL-MACRO.

* New macro PRINT-UNREADABLE-OBJECT.

* Fixed a bug: The string comparison functions STRING<, STRING>, STRING<=,
  STRING>=, STRING/=, STRING-LESSP, STRING-GREATERP, STRING-NOT-GREATERP,
  STRING-NOT-LESSP, STRING-NOT-EQUAL now return the index of the first mismatch
  instead of T.

* Fixed a bug: The functions REMOVE-DUPLICATES and DELETE-DUPLICATES produced
  an out-of-bounds error when called on a small sequence, with :FROM-END T
  argument and without :END argument.

Portability
-----------

* Updated support for DJGPP.

Other modifications
-------------------

* The macros SETF, PUSH, POP, PUSHNEW have been completely rewritten.

* Changed internal representation of special form handlers: They now consume
  regular memory. This frees one type tag.

* Miscellaneous documentation updates.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pdudey@Willamette.EDU  Tue Jun 29 22:22:56 1993
Return-Path: <pdudey@Willamette.EDU>
Received: from Willamette.EDU (jupiter.willamette.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07514; Tue, 29 Jun 93 22:22:56 +0200
Received: by Willamette.EDU (4.1/JPC-1.1)
	id AA03665; Tue, 29 Jun 93 13:22:25 PDT
Date: Tue, 29 Jun 1993 13:22:01 -0700 (PDT)
From: Peter Dudey <pdudey@jupiter.Willamette.EDU>
Subject: unsubscribe
To: Clisp mailing list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.05.9306291301.A3645-9100000@jupiter>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

unsubscribe CLISP-LIST

( Peter Dudey, pdudey@willamette.edu, 257 NE 13th St, Salem, Oregon  97301 )
( AI researcher / Go player (11 kyu) / Game designer / SF novelist manque  )
( Clinton actually REDUCED the deficit.  When did that last happen?        )
( Barney is a velociraptor.  "Give me Slack, or give me food, OR KILL ME!" )


From P2043742@csdvax.csd.unsw.EDU.AU  Wed Jun 30 06:13:22 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07852; Wed, 30 Jun 93 06:13:22 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF #2556 )
 id <01GZZQADY4FK8WZRYU@csdvax.csd.unsw.EDU.AU>; Wed, 30 Jun 1993 14:14:23 +1000
Date: 30 Jun 1993 14:14:23 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Correction [Help to build CLUE]
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01GZZQADY4FM8WZRYU@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Somebody out there,

Yesterday I sent a  mail in relation to compiling the CLUE system under CLISP.

>I've downloaded the clue+clio+xit.tar.z from ma2s2.mathematik.uni-karlsruhe.de
>and I've been trying to compile the system with no success.
>
>During buildig CLUE I get the following error message.
>
>; Loading   intrinsics.fas *** - The class #<std-instance #x194037C0> was
>specified as a super-class of the class #<std-instance #x193A3D30>;
>but the meta-classes #<std-instance #x19105BE8>
>and #<std-instance #x19105AE8> are incompatible.
>1. Break>
>
>I need clue for my theses as soon as possible.
>
>If you  can help me urgently I would approtiate it.

Today I recompiled the PCL because the messages were strange and Bruno
suspected that something was wrong with the PCL.

I get "better" error messages now jet unable to build CLUE.

The error message I am geting now is:

Compilation of file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/clue/intr
insics.lsp is finished.
0 errors, 6 warnings 
The following functions were used but not defined: 
 CONTACT-NAME CONTACT-RESOURCE-PARENT CONTACT-DISPLAY FIND-CONTACT 
 COMPOSITE-CHILDREN CONTACT-PARENT CONTACT-STATE OWNS-FOCUS-P  CONTACT-WIDTH 
 CONTACT-HEIGHT CONVERT INITIALIZE-RESOURCE-SLOTS  ADD-TO-PARENT ADD-CHILD 
 CHANGE-LAYOUT CONTACT-BACKGROUND CONTACT-DEPTH  CONTACT-X CONTACT-Y PCL::|SETF 
 CLUEI CONTACT-STATE| DELETE-CHILD  UPDATE-TREE INITIALIZE-GEOMETRY REALIZE 
 INITIAL-STATE-TRANSITION  DELETE-TIMER DELETE-MODE DESTROY CONTACT-ROOT 
 CONTACT-BORDER-WIDTH  PROCESS-NEXT-EVENT MANAGE-PRIORITY PCL::|SETF CLUEI 
 CONTACT-PRIORITY|  CONTACT-EVENT-MASK COMPOSITE-FOCUS ACCEPT-FOCUS-P 
 MANAGE-GEOMETRY MOVE  RESIZE 
; Loading   intrinsics.fas 

*** - The class #<STRUCTURE-CLASS #x190D6C90> was specified as a 
super-class of the class #<STANDARD-CLASS BASIC-CONTACT #x193F9548>; 
but the meta-classes #<STANDARD-CLASS STRUCTURE-CLASS #x191E9F28> and 
#<STANDARD-CLASS STANDARD-CLASS #x1922B2B8> are incompatible. 
        touch stamp-fas         
	rm clue.mem
rm: clue.mem non-existent 
*** Error code 2 

Stop.

Sorry about it.

Hopefully now somebody can help me to solve this mith.

Yours,
Bela
From haible  Wed Jun 30 12:04:38 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08239; Wed, 30 Jun 93 12:04:38 +0200
Date: Wed, 30 Jun 93 12:04:38 +0200
From: haible (Bruno Haible)
Message-Id: <9306301004.AA08239@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: PCL for CLISP

For the new version of CLISP announced yesterday I had to patch PCL a bit
more. The *only* version of PCL I support from now on is September 1992 (f)
PCL. On ma2s2.mathematik.uni-karlsruhe:/pub/lisp/clisp/packages/ the files
pcl.sept92f.clisp.tar.z and pcl+clx.sept92f.clisp.tar.z .

There was a bug in my earlier ports of September 1992 PCL: structure
classes don't work properly. Those who got pcl+clx.sept92f.clisp.tar.z
between 20 May 1993 and 11 June 1993 should upgrade to the current one.
I wish to thank Scott Musman who pointed me to the problem.

Now that structure classes work, there is no more need for July 92 PCL.
Neither for March 92 PCL: there have been significant improvements and
bugfixes in the meantime.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From P2043742@csdvax.csd.unsw.EDU.AU  Thu Jul  1 19:28:29 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14579; Thu, 1 Jul 93 19:28:29 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF #2556 )
 id <01H01K2V2IQO8WZRC4@csdvax.csd.unsw.EDU.AU>; Thu, 1 Jul 1993 21:37:25 +1000
Date: 01 Jul 1993 21:37:25 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Help to build XIT
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H01K2V2SDU8WZRC4@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp-list,

I am sending this mail in relation to build XIT.

During compilation I get the following error message:

				.
				.
				.
;; Loading of file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/tim
ers.fas is finished
Compiling file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/interac
tion-window.lsp ... 
*** - Illegal SETF place: (MOUSE-DOCUMENTATION SELF)

and the compilation terminates.

If somebody was able to build XIT please explain me what's wrong here and
how can I overcome this problaim and build XIT successfuly.

I look forward to hearing from you.
                                                          
Bela Pecsek
From P2043742@csdvax.csd.unsw.EDU.AU  Mon Jul  5 05:41:04 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16495; Mon, 5 Jul 93 05:41:04 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #2556) id <01H06OLJXQTS8X05EC@csdvax.csd.unsw.EDU.AU>; Mon,
 5 Jul 1993 13:41:16 +1000
Date: Mon, 05 Jul 1993 13:41:16 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Help to build CLUE and XIT please!!
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H06OLJYJR68X05EC@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

I have just built CLUE with CLISP on SGI Indigo (just released PCL and CLX 
"Sept92f") and everything went just fine but when I try to test it with 
examples/menu.lsp I get the the following error message:

** - Continuable Error
"fixed" cannot be converted to type FONT. 
If you continue (by typing 'continue'): Retry 
1. Break>

If somebody knows what the problem is please let me know.

Another question: Is there anybody out there who could build XIT with CLISP?
If yes please contact me.

I look forward to hearing from you,

Yours,
Bela Pecsek  
From RLS@waikato.ac.nz  Mon Jul  5 07:06:03 1993
Return-Path: <RLS@waikato.ac.nz>
Received: from grace.waikato.ac.nz by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16589; Mon, 5 Jul 93 07:06:03 +0200
Message-Id: <9307050506.AA16589@ma2s2.mathematik.uni-karlsruhe.de>
Date: Mon, 5 Jul 93 17:05 +1200
From: RLS@waikato.ac.nz
Subject: Amiga 600 and Clisp
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"


I have just installed CLisp on my Amiga 600 (68000 processor) which has
1MB chip memory plus 4MB fast memory through a PCMCIA expansion.
When I run CLisp it uses about 500K of fast memory and then uses up
nearly all the chip memory.  When I load anything into CLisp it continues
to fill up the chip memory, ignoring all the free space on the expansion
card.  Consequently the chip memory fills up after loading only a few
files and CLisp complains that there is no more room for lisp objects.
This is silly, the progran should use the fast memory and leave chip
memory for the graphics coprocessors, shouldn't it?

I may be overlooking something very obvious, so please point it out if
you know the solution.  No other programs have had this problem with
recognizing the presence of the extra memory so I am sure it is a CLisp
problem rather than an Amiga problem.

If the answer to this problem is already posted somewhere could you please
point me to it. 

P.S. I am using the *-low version as recommended in the documentation that
comes with the Amiga version.

Thanx in advance,

Richard Shepherd.

From mcg@waikato.ac.nz  Thu Jul  8 00:25:07 1993
Return-Path: <mcg@waikato.ac.nz>
Received: from truth.waikato.ac.nz by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03247; Thu, 8 Jul 93 00:25:07 +0200
Received: from fantail.math.waikato.ac.nz by waikato.ac.nz; Thu, 8 Jul 93 10:23
 +1200
Received: from pukeko.math.waikato.ac.nz by fantail.math.waikato.ac.nz
 (4.1/SMI-4.1) id AA02396; Thu, 8 Jul 93 10:27:52 NZS
Date: Thu, 8 Jul 93 10:27:52 NZS
From: mcg@waikato.ac.nz
Subject: CLISP - installation and conversion.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <9307072227.AA02396@fantail.math.waikato.ac.nz>

Hi, I'm an Acorn Archimedes user (standard Ansi C), and I'm wishing to port a version of CLISP to the Archimedes.

What I've tried to do so far is obtain the code, unzip it (gzip 1-2-3) and compile it using the installation for the Sun sparc station on a sparc station- this is so that I can get the converted .c files (and to see if the code can be easily compiled o

 Alas, when I try to run the ./target, it does a 8Meg core dump and when I try to compile the code after makeing the makefile (running ./makemake > makefile) it stuffs up on the spvw compilation - # illegal character ... endif undefined.... 

I cannot work out (form the .d files) exactly what the .c files should be (comments are in german!)... this leads to my questuions :-

 a) Does anyone have any suggestions on what my compilation problems are and how to correct it ?

 b) Does anyone know of anyone with an Archimedes that is also more familiar with 
    CLISP source code, and might like to assist me in trying to convert CLISP?


Thanks,

   Martin.
From rainer@wmax60.mathematik.uni-wuerzburg.de  Fri Jul  9 12:16:14 1993
Return-Path: <rainer@wmax60.mathematik.uni-wuerzburg.de>
Received: from wmax60.mathematik.uni-wuerzburg.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05333; Fri, 9 Jul 93 12:16:14 +0200
Received: from wmax65 by wmax60.mathematik.uni-wuerzburg.de (NX5.67c/NX3.0M)
	id AA03414; Fri, 9 Jul 93 12:14:40 +0200
From: Rainer Frohnhoefer <rainer@wmax60.mathematik.uni-wuerzburg.de>
Message-Id: <9307091014.AA03414@wmax60.mathematik.uni-wuerzburg.de>
Received: by wmax65.mathematik.uni-wuerzburg.de (NX5.67c/NX3.0X)
	id AA00178; Fri, 9 Jul 93 12:14:31 +0200
Date: Fri, 9 Jul 93 12:14:31 +0200
Received: by NeXT.Mailer (1.87.1)
Received: by NeXT Mailer (1.87.1)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Clisp on NeXT


 Now, 

has anyone build CLISP successfully on a NeXT (Moto CPU) under  
NeXTStep 3.0? I got the sources, but am no enough a C Freak to figure  
out all the steps to run through the makefiles. Some system tools  
seem to be missing ...


      Thanks , 


Rainer Frohnhoefer at UNIWUE

rainer@wmax60.mathematik.uni-wuerzburg.de 

  ... NeXTMAIL welcome!
From rainer@wmax60.mathematik.uni-wuerzburg.de  Fri Jul  9 12:31:15 1993
Return-Path: <rainer@wmax60.mathematik.uni-wuerzburg.de>
Received: from wmax60.mathematik.uni-wuerzburg.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05401; Fri, 9 Jul 93 12:31:15 +0200
Received: from wmax65 by wmax60.mathematik.uni-wuerzburg.de (NX5.67c/NX3.0M)
	id AA03442; Fri, 9 Jul 93 12:29:39 +0200
From: Rainer Frohnhoefer <rainer@wmax60.mathematik.uni-wuerzburg.de>
Message-Id: <9307091029.AA03442@wmax60.mathematik.uni-wuerzburg.de>
Received: by wmax65.mathematik.uni-wuerzburg.de (NX5.67c/NX3.0X)
	id AA00194; Fri, 9 Jul 93 12:29:37 +0200
Date: Fri, 9 Jul 93 12:29:37 +0200
Received: by NeXT.Mailer (1.87.1)
Received: by NeXT Mailer (1.87.1)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

From haible  Sat Jul 10 00:38:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05999; Sat, 10 Jul 93 00:38:43 +0200
Date: Sat, 10 Jul 93 00:38:43 +0200
From: haible (Bruno Haible)
Message-Id: <9307092238.AA05999@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: CLUE installation


How to compile CLUE with CLISP:

1. Take clisp-1993-05-24 or older (the clisp-1993-06-29 has two bugs),
   PCL and CLX (the September 1992 f version),
   CLUE from the ma2s2:/pub/lisp/clisp/packages/clue+clio+xit.clisp.tar.z .

2. Jean Liotard <liotard@mimosa.unice.fr> noted that there is an error in
   clue/resource.lsp. The definition of IGNORE-ERRORS ought to read

#+CLISP
(defmacro ignore-errors (&body body)
  (let ((blockvar (gensym)))
    `(BLOCK ,blockvar
       (LET ((*ERROR-HANDLER*
               #'(LAMBDA (&REST ARGS)
                   (RETURN-FROM ,blockvar (VALUES NIL ARGS))
            ))   )
         ,@body
     ) )
) )

(The line ",@body" was missing.)

A typical symptom of this problem was observed by
Bela Pecsek <P2043742@csdvax.csd.unsw.EDU.AU> :

> ** - Continuable Error
> "fixed" cannot be converted to type FONT. 
> If you continue (by typing 'continue'): Retry 

3. Type "make" in the pcl/ directory, then in the clx/ directory,
   then move clx.mem to clue+clio+xit/clx/clx.mem, then type "make"
   in the clue+clio+xit/clue/ directory.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From @vm.urz.Uni-Heidelberg.de:KOCH@novell1.gs.uni-heidelberg.de  Mon Jul 12 19:33:06 1993
Return-Path: <@vm.urz.Uni-Heidelberg.de:KOCH@novell1.gs.uni-heidelberg.de>
Received: from vm.urz.Uni-Heidelberg.de (vm.hd-net.uni-heidelberg.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12320; Mon, 12 Jul 93 19:33:06 +0200
Received: from pc30.gs.uni-heidelberg.de by vm.urz.Uni-Heidelberg.de
   (IBM VM SMTP V2R2) with TCP; Mon, 12 Jul 93 19:28:51 CET
Received: From NOVELL1_GS/WORKQUEUE by pc30.gs.uni-heidelberg.de
          via Charon-4.0A-VROOM with IPX id 100.930712192027.352;
          12 Jul 93 19:20:45 -0100
Message-Id: <MAILQUEUE-101.930712192016.320@novell1.gs.uni-heidelberg.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
From: KOCH@novell1.gs.uni-heidelberg.de
Organization: LCL - University of Heidelberg
Date:         12 Jul 93 19:20:16 MET
Subject:      Garnet and CLISP for Linux ?
Priority: normal
X-Mailer:     Pegasus Mail v2.3 (R5).

Hello!

Did someone try to compile Garnet under CLISP on a Linux-Box? Most
of the code seems to compile ok, but loading two modules from the
gadget-set produced the following error message:

  Compiling file /usr/local/garnet/src/gadgets/save-gadget.lsp
  ...Object SAVE-GADGET
  Object SAVE-GADGET

  Compilation of file /usr/local/garnet/src/gadgets/save-gadget.lsp is
  finished.
  0 errors, 0 warnings
  ;; Loading file /usr/local/garnet/src/gadgets/save-gadget.fas ...
  *** - SYSTEM::STORE: #\K does not fit into #(1 0 13 0 ...
   [ total of 8192 numbers, mostly 0's ]
  ... 0 0), bad type
  1. Break>

Moreover, the same error occurs when calling the update-window
function in Garnet. Since Garnet is running without any problems
under CMUCL on the Sun in my office, I assume that this is a CLISP-
related problem.

I apologize for not having tracked down the problem, but compiling
Garnet takes several hours on my linux-box and I do not intend to
spend another afternoon trying to hypnotize the activity-LED of my
hard disk until I am sure that the problem has not already been solved
by someone else.

Yours

  HDK//
From P2043742@csdvax.csd.unsw.EDU.AU  Tue Jul 13 07:04:36 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12611; Tue, 13 Jul 93 07:04:36 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #2556) id <01H0HXSWVM5I8X0R3K@csdvax.csd.unsw.EDU.AU>; Tue,
 13 Jul 1993 15:03:33 +1000
Date: Tue, 13 Jul 1993 15:03:33 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Help to build XIT!!
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0HXSWVM5K8X0R3K@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

I've been trying to build XIT with the sept92f PCL, CLX and CLUE from
clue+clio+xit.clisp.tar.z and I get the following error message:

Compilation of file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/vi
rtual-dispels.lsp is finished. 
0 errors, 15 warnings 
The following functions were used but not defined: 
 DISPLAY-TEXT DELETE-CHARACTER SET-LINE-POINTS SET-LINE-INNER-POINTS 
 VALIDATE-ENCLOSING-REGION LINE-POINT-COORDINATES 
 SET-LINE-POINT-COORDINATES DISPLAY-LINE DISPLAY-OUTLINE DRAW-OUTLINE 
 ENCLOSING-REGION-OFFSET INVALIDATE-ENCLOSING-REGION 
 FIND-LINE-INNER-POINT DRAG-INNER-POINT-WITH-MOUSE LINE-POINTS 
 ARROW-SIZES DRAW-ARROW DRAW-ARROW-OUTLINE 
;; Loading file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/virtua
l-dispels.fas ... 
*** - APPLY: too few arguments given to #<COMPILED-CLOSURE PCL::LOAD-SHORT-DEFC
OMBIN-1>

If somebody has been able to build XIT please help me. I can't figure out
what's wrong here. Allthough I understand the error I can't find the source
of it.

I need the system as soon as possible for my theses. If somebody can help me
I'd approtiate it.

Thanks for your help in advance.

Yours,
Bela.  
From P2043742@csdvax.csd.unsw.EDU.AU  Fri Jul 16 05:16:47 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18519; Fri, 16 Jul 93 05:16:47 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H0M0U3288G8WW2W5@csdvax.csd.unsw.EDU.AU>; Fri,
 16 Jul 1993 13:13:06 +1000
Date: Fri, 16 Jul 1993 13:13:06 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Help to build XIT
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0M0U32RJ68WW2W5@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

I've been trying to build XIT with the sept92f PCL, CLX and CLUE from
clue+clio+xit.clisp.tar.z and I get the following error message:

Compilation of file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/vi
rtual-dispels.lsp is finished. 
0 errors, 15 warnings 
The following functions were used but not defined: 
 DISPLAY-TEXT DELETE-CHARACTER SET-LINE-POINTS SET-LINE-INNER-POINTS 
 VALIDATE-ENCLOSING-REGION LINE-POINT-COORDINATES 
 SET-LINE-POINT-COORDINATES DISPLAY-LINE DISPLAY-OUTLINE DRAW-OUTLINE 
 ENCLOSING-REGION-OFFSET INVALIDATE-ENCLOSING-REGION 
 FIND-LINE-INNER-POINT DRAG-INNER-POINT-WITH-MOUSE LINE-POINTS 
 ARROW-SIZES DRAW-ARROW DRAW-ARROW-OUTLINE 
;; Loading file /tmp_mnt/net/pg1/p2043742/cl2/clisp/clue+clio+xit/kernel/virtua
l-dispels.fas ... 
*** - APPLY: too few arguments given to #<COMPILED-CLOSURE PCL::LOAD-SHORT-DEFC
OMBIN-1>

If somebody has been able to build XIT please help me. I can't figure out
what's wrong here. Allthough I understand the error I can't find the source
of it.

I need the system as soon as possible for my theses. If somebody can help me
I'd approciate it.

Thanks for your help in advance.

Yours,
Bela.  
From P2043742@csdvax.csd.unsw.EDU.AU  Sat Jul 17 07:47:36 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU ([149.171.192.3]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19093; Sat, 17 Jul 93 07:47:36 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H0NKEHKE3K8WW5YL@csdvax.csd.unsw.EDU.AU>; Sat,
 17 Jul 1993 15:43:50 +1000
Date: Sat, 17 Jul 1993 15:43:50 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Re: Garnet and CLISP for Linux ?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0NKEHN2JM8WW5YL@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear "HDK",

Sorry about not knowing your name!

I am trying to build garnet with CLISP on SGI IRIS INDIGO and I get the same
error you mentioned exept I get #\U " *** - SYSTEM::STORE: #\U does not fit 
into #(1 0 0.....), bad type " instead of #\K you mentioned.

If somebody has already tracked down the problem and will or has already sent
you a mail how to overcome this problem please forward the mail to me. I'd 
approcite it.

I need garnet for my thesis as soon as possible.

Thank you in advance for your help.

I look forward to hearing from you,

Yours,
Bela Pecsek.  
From P2043742@csdvax.csd.unsw.EDU.AU  Sat Jul 17 07:55:01 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU ([149.171.192.3]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19172; Sat, 17 Jul 93 07:55:01 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H0NKO6KOX88WW5YL@csdvax.csd.unsw.EDU.AU>; Sat,
 17 Jul 1993 15:51:38 +1000
Date: Sat, 17 Jul 1993 15:51:38 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Re: Garnet and CLISP for Linux ?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0NKO6KOXA8WW5YL@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

I have the same problem exept I get the error with #\U exapt of #\K
*** - SYSTEM::STORE: #\U does not fit into #(1 0 0 .....), bad type.

If somebody has allready tracked down this problem please send me a mail too.
I'd approciate it.

Yours,
Bela Pecsek.
From haible  Sat Jul 17 17:50:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23141; Sat, 17 Jul 93 17:50:43 +0200
Date: Sat, 17 Jul 93 17:50:43 +0200
From: haible (Bruno Haible)
Message-Id: <9307171550.AA23141@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

The port to VMS still stagnates, being finished at 85%. I haven't heard
from anyone with access to a powerful VMS machine. If you know someone
who would be willing to help me with the last steps of the port, please
tell me.

Excerpt from the change log:

User visible changes
--------------------

* X3J13 vote <150> is mostly implemented: Reading and printing of symbols
  (and characters with bits or fonts attributes) is now affected by
  (READTABLE-CASE *READTABLE*), whose value may be one of :UPCASE, :DOWNCASE
  and :PRESERVE. New place READTABLE-CASE.

* Support for immutable objects is implemented. Attempts to modify read-only
  data will signal an error. Program text and quoted constants loaded from
  files are considered read-only data. Never again will you be allowed to
  write programs that destructively modify themselves!
  This works only for Unix implementations with powerful virtual memory
  management, currently only Linux and SunOS. To enable it, you have to
  add -DIMMUTABLE to the CFLAGS in the makefile when building CLISP.

* Fixed DEFUN such that
  (progn
    (flet ((bar (x) (+ x 10))) (defun bar (y) (if (zerop y) 1 (bar (1- y))))
    (bar 1)
  )
  returns 10 instead of 1.

* Fixed a bug in the compiler that caused the compiler to crash by endless
  recursion and stack overflow when compiling assignments to symbol macros.

Portability
-----------

* Added support for m88000 CPU.

* Amiga version: detect 68000 CPU, for better use of present memory.

Other modifications
-------------------

* Miscellaneous documentation updates.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From reggie@muon.phys.washington.edu  Sat Jul 17 21:46:06 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00328; Sat, 17 Jul 93 21:46:06 +0200
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA13635; Sat, 17 Jul 93 12:53:11 -0700
Message-Id: <9307171953.AA13635@muon.phys.washington.edu>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: New CLISP version 
In-Reply-To: Your message of "Sat, 17 Jul 1993 17:52:52 +0200."
             <9307171550.AA23141@ma2s2.mathematik.uni-karlsruhe.de> 
Date: Sat, 17 Jul 1993 12:53:10 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	Make a note that on my SGI Indigio running IRIX 4.0.5 I have
to change line 56 of unix.d to read:

  #ifdef HAVE_MMAP
    #include <sys/types.h>
    #include <sys/mman.h>
    #if defined(UNIX_SYSV) && (defined(sgi) || defined(__sgi))
       extern void *mmap (void *addr, int len, int prot, int flags, int fd, off_t off);
    #else
       extern caddr_t mmap (caddr_t addr, MMAP_SIZE_T len, int prot,
int flags, int fd, off_t off); /* original definition */
    #endif

-------------------
Reginald S. Perry -- University of Washington, Department of Physics FM-15
                     Seattle, Washington 98195
reggie@u.washington.edu             (General-Mail) 
reggie@quantum.phys.washington.edu  (NeXTMail)  


From haible  Sun Jul 18 17:20:54 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00575; Sun, 18 Jul 93 17:20:54 +0200
Date: Sun, 18 Jul 93 17:20:54 +0200
From: haible (Bruno Haible)
Message-Id: <9307181520.AA00575@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Reginald S. Perry <reggie@u.washington.edu> writes:

> Make a note that on my SGI Indigio running IRIX 4.0.5 I have
> to change line 56 of unix.d to read:
...
> extern void *mmap (void *addr, int len, int prot, int flags, int fd, off_t off);

Thanks. Will be fixed in the next release.

Btw, I have built CLISP binaries for Linux with immutable objects support
enabled. In /pub/lisp/clisp/linux/ on ma2s2. It requires Linux 0.99.11 and
libc-4.4.1.

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Tue Jul 20 19:59:08 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02374; Tue, 20 Jul 93 19:59:08 +0200
Date: Tue, 20 Jul 93 19:59:08 +0200
From: haible (Bruno Haible)
Message-Id: <9307201759.AA02374@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Garnet and CLISP ?

Mr Heinz-Detlev Koch <koch@novell1.gs.uni-heidelberg.de> and
Mr Bela Pecsek <P2043742@csdvax.csd.unsw.EDU.AU>
reported problems when building Garnet with CLISP, on Linux resp. SGI/Irix.

I can report that I hadn't any problems in doing that on SunOS4.
Please take the newest CLISP version, my port of CLX
           ma2s2:/pub/lisp/clisp/packages/pcl+clx.sept92f.clisp.tar.z
and Garnet
           ma2s2:/pub/lisp/clisp/packages/garnet.clisp.tar.z
and tell us whether the problems remain. In case they do, then look at
the backtrace.

I can't test it on Linux since it won't compile in less than 10 megabytes
of RAM, and I have just 8 MB.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From @ibm3090.rz.uni-karlsruhe.de:ACPS7221@RYEVM.RYERSON.CA  Tue Jul 20 23:19:20 1993
Return-Path: <@ibm3090.rz.uni-karlsruhe.de:ACPS7221@RYEVM.RYERSON.CA>
Received: from ibm3090.rz.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02510; Tue, 20 Jul 93 23:19:20 +0200
Received: from DKAUNI2 by ibm3090.rz.uni-karlsruhe.de (IBM MVS SMTP V2R2.1)
   with BSMTP id 5816; Tue, 20 Jul 93 23:15:48 MET
Received: (from VM.GMD.DE for <@VM.GMD.DE:ACPS7221@RYEVM.RYERSON.CA> via BSMTP)
Received: (from MAILER@DEARN for MAILER@DKAUNI2 via NJE)
 (UCLA/Mail V1.500 M-RSCS2562-2562-24); Tue, 20 Jul 93 23:15:36
Received: from RyeVm.Ryerson.Ca (NJE origin MAILER@RYERSON) by VM.GMD.DE (LMail
 V1.1d/1.7f) with BSMTP id 5779; Tue, 20 Jul 1993 23:02:51 +0200
Received: from RyeVm.Ryerson.Ca (ACPS7221) by RyeVm.Ryerson.Ca (Mailer R2.08
 ptf039) with BSMTP id 1834; Tue, 20 Jul 93 17:00:21 EST
Date:         Tue, 20 Jul 93 16:57:59 EST
From: Michael Caro <ACPS7221@RYEVM.RYERSON.CA>
Subject:      Re: Garnet and CLISP ?
To: clisp-list <clisp-list@MA2S2.mathematik.uni-karlsruhe.de>
Message-Id:   <930720.165759.EST.ACPS7221@RyeVm.Ryerson.Ca>
In-Reply-To:  <9307201759.AA02374@ma2s2.mathematik.uni-karlsruhe.de>

  Hello Bruno:
  You are doing a terrific job with CLISP! Keep up the good work. Every thing
works perfectly for me.  Thanks.:)
  BTW, why don't you use a swap partition or file, to get the extra few Megs of
Ram you need to try and compile Garnet?.

                                          Kind Regards, Michael.
From lrw@sdsc.edu  Wed Jul 21 00:45:15 1993
Return-Path: <lrw@sdsc.edu>
Received: from mailserver.sdsc.edu (rosebud.sdsc.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02565; Wed, 21 Jul 93 00:45:15 +0200
Received: from zippy.sdsc.edu.sdsc.edu by mailserver.sdsc.edu (4.1/4.7)  id AA26520; Tue, 20 Jul 93 15:42:09 PDT
Received: by zippy.sdsc.edu.sdsc.edu (5.65/DEC-Ultrix/4.3-sdsc)
	id AA10772; Tue, 20 Jul 1993 15:41:50 -0700
Date: Tue, 20 Jul 1993 15:41:50 -0700
From: lrw@sdsc.edu
Message-Id: <9307202241.AA10772@zippy.sdsc.edu.sdsc.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: can't compile CLISP on a DecStation 5000

I am having the following problem compiling the latest version of CLISP
on my DecStation 5000. Does anyone know what is causing the following
problems:

------------------------- cut here ----------------------------------
(echo "# 1 \"spvw.i\"" ; cc -E -O -DNO_MULTIMAP_SHM -USINGLE_PASS_COMPILER spvw.c | ./mergestrings) > spvw.i
cpp: warning /usr/include/stdlib.h:64: NULL redefined
cpp: error lispbibl.d:2326: syntax error
cpp: error lispbibl.d:2509: syntax error
cpp: error lispbibl.d:2514: syntax error
cpp: error lispbibl.d:2519: syntax error
cpp: error lispbibl.d:2524: syntax error
cpp: error lispbibl.d:2529: syntax error
cpp: error lispbibl.d:2534: syntax error
cpp: error lispbibl.d:2540: syntax error
cpp: error lispbibl.d:3199: syntax error
cpp: error lispbibl.d:3247: syntax error
cpp: error lispbibl.d:3344: syntax error
cpp: error spvw.d:2395: syntax error
cpp: error spvw.d:7616: missing endif
cc -O -DNO_MULTIMAP_SHM -c spvw.i
ccom: Error: lispbibl.d, line 2325: syntax error
       (((8)==8)||((8)==16)||((8)==32)||((8)==32)) && ( (0xEF000000 >> 24) == (1<<(8))-1))
      ----^
ccom: Error: lispbibl.d, line 3159: syntax error
                       object car; }
      -----------------------------^
ccom: Error: lispbibl.d, line 3161: redeclaration of cons_
      typedef cons_ *  Cons;
      --------------^
ccom: Error: lispbibl.d, line 3161: syntax error
      typedef cons_ *  Cons;
      --------------^
ccom: Error: lispbibl.d, line 3197: syntax error
        ((24) / (8))==  ((24+8) / (8)))
      -----^
ccom: Error: endif, line 3: syntax error
      typedef struct {                 union { object _GCself;
uintB flags[sizeof(object)];                      } header;

-----------------------------------------------------------------------------------------
------------------------------------------^
ccom: Error: endif, line 9: syntax error
                     }
      ---------------^
ccom: Error: endif, line 11: redeclaration of symbol_
      typedef symbol_ *  Symbol;
      ----------------^
ccom: Error: endif, line 11: syntax error
      typedef symbol_ *  Symbol;
      ----------------^
ccom: Error: lispbibl.d, line 3343: syntax error
       (((16)==8)||((16)==16)||((16)==32)||((16)==32))))
      -----^
ccom: Error: lispbibl.d, line 3499: syntax error
      typedef struct {                 union { object _GCself;
uintB flags[sizeof(object)];                      } header;

-----------------------------------------------------------------------------------------
------------------------------------------^
ccom: Error: lispbibl.d, line 3502: syntax error
                     }
      ---------------^
ccom: Error: lispbibl.d, line 3504: redeclaration of bignum_
      typedef bignum_ *  Bignum;
      ----------------^
ccom: Error: lispbibl.d, line 3504: syntax error
      typedef bignum_ *  Bignum;
      ----------------^
ccom: Error: constsym.d, line 32: syntax error
             symbol_ S_nil;
      -------------^
(ccom): constsym.d, line 32: cannot recover from earlier errors: goodbye!
             symbol_ S_nil;
      -------------------^
*** Error code 1

Stop.

------------------- end of gratuitous error messages -------------------
Len Wanger
lrw@sdsc.edu
From dudeyp@storm.cs.orst.edu  Wed Jul 21 00:57:13 1993
Return-Path: <dudeyp@storm.cs.orst.edu>
Received: from storm.cs.orst.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02615; Wed, 21 Jul 93 00:57:13 +0200
Received: by storm.cs.orst.edu (5.65/1.34)
	id AA02231; Tue, 20 Jul 93 15:54:07 -0700
Date: Tue, 20 Jul 1993 15:53:54 -0700 (PDT)
From: Peter Dudey <dudeyp@storm.cs.orst.edu>
Subject: unsubscribe
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9307202241.AA10772@zippy.sdsc.edu.sdsc.edu>
Message-Id: <Pine.3.07.9307201553.A2152-4100000@storm.cs.orst.edu>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

unsubscribe


From P2043742@csdvax.csd.unsw.EDU.AU  Wed Jul 21 07:29:28 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02711; Wed, 21 Jul 93 07:29:28 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H0T4WQ8LV48WWIBG@csdvax.csd.unsw.EDU.AU>; Wed,
 21 Jul 1993 15:25:31 +1000
Date: Wed, 21 Jul 1993 15:25:31 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Problem with Garnet!
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0T4WQ955E8WWIBG@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

I've just built garnet on SGI IRIS INDIGO (IRIX Release 4.0.5F System V)
and everything went just fine. The problem came when I wanted to use it. I 
wanted to test it with the demos supplied with the system but every time I 
try to type the commands listed in tourcommands.lsp I get the following 
error message.

*** - UNIX error 9 (EBADF): Bad file number 

For example:

> (create-instance 'mywindow inter:interactor-window (:width 500)) Object
MYWINDOW Warning - create-schema is destroying the old #k<MYWINDOW>.
#k<MYWINDOW> 
> (opal:update mywindow) 

*** - UNIX error 9 (EBADF): Bad file number
1. Break> (create-instance 'myagg opal:aggregate)
Object MYAGG
#k<MYAGG>
1. Break> (s-value mywindow :aggregate myagg)
#k<MYAGG>
1. Break> (create-instance 'myrect moving-rectangle)
Object MYRECT
#k<MYRECT>
1. Break> (opal:add-component myagg myrect)
#k<MYRECT>
1. Break> (opal:update mywindow)

*** - UNIX error 9 (EBADF): Bad file number
2. Break>

And the same with GILT

> (gilt::do-go)

*** - UNIX error 9 (EBADF): Bad file number
1. Break> 

Michael Caro has just reported today that for him everything works perfectly.
Although I don't know which machine he is using I can assume that something
might be wrong with my machine or CLISP but the funny thing that the compilation
went perfectly fine.

I am using the sept92f (newest) version of clx and pcl so I think CLISP is OK.
And anyway the errors are UNIX errors so I assume the errors are UNIX related
although I am unfortunately not an UNIX expert.

If somebody out there can figure out what's wrong please help me.

Thanks for your help in advance.

I look forward to hearing from you.

Yours,
Bela Pecsek
From haible  Wed Jul 21 23:44:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01429; Wed, 21 Jul 93 23:44:43 +0200
Date: Wed, 21 Jul 93 23:44:43 +0200
From: haible (Bruno Haible)
Message-Id: <9307212144.AA01429@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: can't compile CLISP on a DecStation 5000

Len Wanger <lrw@sdsc.edu> writes:

> I am having the following problem compiling the latest version of CLISP
> on my DecStation 5000. Does anyone know what is causing the following
> problems:
> (echo "# 1 \"spvw.i\"" ; cc -E -O -DNO_MULTIMAP_SHM -USINGLE_PASS_COMPILER spvw.c | ./mergestrings) > spvw.i
> cpp: warning /usr/include/stdlib.h:64: NULL redefined
> cpp: error lispbibl.d:2326: syntax error
> cpp: error lispbibl.d:2509: syntax error

This is caused by a C preprocessor that does not expand macros with arguments
within preprocessor directives. The preprocessor is unusable, you have to
use the GNU gcc preprocessor included in the CLISP distribution.

In src/makemake.in (around line 394) you can read

  if [ "$TSYSOS" = coherent ] ; then
    # If one cannot use the default cc preprocessor: Use GNU cpp instead.

You have to replace this by

  if true; then

and restart the "target" command.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Thu Jul 22 00:08:48 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01490; Thu, 22 Jul 93 00:08:48 +0200
Date: Thu, 22 Jul 93 00:08:48 +0200
From: haible (Bruno Haible)
Message-Id: <9307212208.AA01490@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Patches to CLISP

I just got a good patch for CLISP, implementing X3J13 vote <149>, i.e.
fixing the SUBSEQ function. The patch was made by Thomas Kirk
<tk@research.att.com> and reached me six weeks later, having travelled
through two other people's mailbox. This delay is unnecessary.

So, please, if you have a useful patch for CLISP, come and share it with us!


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From ambrisko@kpc.com  Thu Jul 22 04:02:25 1993
Return-Path: <ambrisko@kpc.com>
Received: from horn.kpc.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01739; Thu, 22 Jul 93 04:02:25 +0200
Received: by horn.kpc.com (5.65/kpc-930707);
	id AA03040; Wed, 21 Jul 93 18:59:13 -0700
Received: from pine by kpc.com (5.65/kpc-930604)
	id AA17582; Wed, 21 Jul 93 19:00:35 -0700
Received: from tasha by mailbox.kpc.com (4.1/kpc-930604)
	id AA14925; Wed, 21 Jul 93 18:59:22 PDT
From: ambrisko@kpc.com (Douglas Ambrisko)
Message-Id: <9307220158.AA01565@tasha.kpc.com>
Subject: Re: Problem with Garnet!
To: P2043742@csdvax.csd.unsw.EDU.AU
Date: Wed, 21 Jul 1993 18:58:34 -0800 (PDT)
Cc: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: <01H0T4WQ955E8WWIBG@csdvax.csd.unsw.EDU.AU> from "P2043742@csdvax.csd.unsw.EDU.AU" at Jul 21, 93 03:25:31 pm
X-Mailer: ELM [version 2.4 PL17]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 978       

P2043742@csdvax.csd.unsw.EDU.AU writes:
| 
| Dear CLISP users,
| 
| I've just built garnet on SGI IRIS INDIGO (IRIX Release 4.0.5F System V)
| and everything went just fine. The problem came when I wanted to use it. I 
| wanted to test it with the demos supplied with the system but every time I 
| try to type the commands listed in tourcommands.lsp I get the following 
| error message.
| 
| *** - UNIX error 9 (EBADF): Bad file number 

		[stuff deleted]

I just grabbed the clisp versin of garnet and built it.  I hit the same
problem with the "saveinitmem" oni a DEC alpha box .  The problem 
is that garnet assumes you do a load of all compiled modules including 
opal/defs which calls "initialize-x11-values".  So a work-around that 
I'm doing now is to load the "saveinitmem" version then loading opal/defs. 
Everything seems to works except for the "subseq" problem where 
(subseq "hello" 3 nil) bombs.  I ended up modifying the clisp source to 
make it work.

Doug A.
From schue@ira.uka.de  Thu Jul 22 13:47:02 1993
Return-Path: <schue@ira.uka.de>
Received: from iraun1.ira.uka.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02902; Thu, 22 Jul 93 13:47:02 +0200
Received: from ira.uka.de by iraun1.ira.uka.de with SMTP (PP) 
          id <28612-0@iraun1.ira.uka.de>; Thu, 22 Jul 1993 13:43:20 +0200
Received: from deathstar.iaks.ira.uka.de 
          by walhalla.eiss.ira.uka.de (4.1/SMI-4.1) id AA20254;
          Thu, 22 Jul 93 13:45:24 +0200
Received: from majestix.iaks.ira.uka.de 
          by deathstar.iaks.ira.uka.de (4.1/SMI-4.1) id AA20011;
          Thu, 22 Jul 93 13:39:09 +0200
Date: Thu, 22 Jul 93 13:39:09 +0200
From: schue@ira.uka.de (Joachim Schue)
Message-Id: <9307221139.AA20011@deathstar.iaks.ira.uka.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: unsubscribe

unsubscribe
From P2043742@csdvax.csd.unsw.EDU.AU  Thu Jul 22 14:03:51 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02991; Thu, 22 Jul 93 14:03:51 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H0UWXMAZR48WW40G@csdvax.csd.unsw.EDU.AU>; Thu,
 22 Jul 1993 21:59:46 +1000
Date: Thu, 22 Jul 1993 21:59:46 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Interesting subseq problem with Garnet.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H0UWXMBSOY8WW40G@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

Today I tried Garnet again (after loading opal/defs as Doug reported it seemed
to work fine at least I didn't get the error *** - UNIX error 9 (EBADF)..   as 
I reported yesterday) but of course I got the error with subseq using 0 in 
place of the end specifier.

*** - SUBSEQ: :END should be an integer >=0, not NIL

After this error I grebbed the subseq function from the CMU Common Lisp sources
and compiled and loaded it. I tested it first of course and it seems to work
just fine.

> (subseq "Hello" 3) 
"lo"
>

(I am just testing here!!)
 
> (subseq "Hello" 3 4)
"l"
> (subseq '(a b c d e f) 3 nil)
(D E F)
> (subseq '#(1 2 3 4 5 6) 3 nil)
#(4 5 6)
> (subseq "Hello" 3 0) 

*** - MAKE-STRING: the string length -3 should be nonnegative fixnum 
1. Break>

And now:

> (subseq "Hello" 3 nil)
"lo"
>
Works just fine.

But then I wanted to start up Gilt and guess what happened?
The Gilt Work Window, Gilt Commands and Gilt Motif Gadgets came up and I was
happier than ever and then the shock came.

> (gilt:do-go)

*** - SUBSEQ: :END should be an integer >=0, not NIL
1. Break>

I realy don't know where this error comes from but hopefully somebody out there
knows about it.

But anyway the sources for subseq are here.

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(in-package 'lisp) 

;;; SUBSEQ cannot default end to the length of sequence since it is not 
;;; an error to supply nil for its value.  We must test for end being nil 
;;; in the body of the function, and this is actually done in the support 
;;; routines for other reasons (see above). 
(defun subseq (sequence start &optional end)
  "Returns a copy of a subsequence of SEQUENCE starting with element number 
   START and continuing to the end of SEQUENCE or the optional END."
  (seq-dispatch sequence
                (list-subseq* sequence start end) 
                (vector-subseq* sequence start end)))

(defun vector-subseq* (sequence start &optional end
  (declare (vector sequence) (fixnum start))
  (when (null end) (setf end (length sequence)))
  (do ((old-index start (1+ old-index))
       (new-index 0 (1+ new-index))
       (copy (make-sequence-like sequence (- end start)))
      ((= old-index end) copy)
    (declare (fixnum old-index new-index))
    (setf (aref copy new-index) (aref sequence old-index))))

(defun list-subseq* (sequence start &optional end)
  (declare (list sequence) (fixnum start))
  (if (and end (>= start (the fixnum end)))
      ()
      (let* ((groveled (nthcdr start sequence))
             (result (list (car groveled))))
        (if groveled
            (do ((list (cdr groveled) (cdr list))
                 (splice result (cdr (rplacd splice (list (car list))))
                 (index (1+ start) (1+ index)))
                ((or (atom list) (and end (= index (the fixnum end))))
                 result)
              (declare (fixnum index)))))))


(defun make-sequence-of-type (type length)
  "Returns a sequence of the given TYPE and LENGTH."
  (declare (fixnum length))
  (case (type-specifier-atom type)
    (list (make-list length))
    ((bit-vector simple-bit-vector) (make-array length :element-type '(mod 2)))
    ((string simple-string base-string simple-base-string)
     (make-string length))
    (simple-vector (make-array length))
    ((array simple-array vector)
     (if (listp type)
         (make-array length :element-type (cadr type))
         (make-array length)))
    (t
     (make-sequence-of-type (result-type-or-lose type) length))))

(defun result-type-or-lose (type &optional nil-ok)
  (cond
   ((subtypep type 'nil)
    (if nil-ok
        nil
        (error "NIL output type invalid for this sequence function.")))
   ((dolist (seq-type '(list bit-vector string vector) nil)
     (when (subtypep type seq-type)
        (return seq-type))))
   (t
    (error "~S is a bad type specifier for sequence functions." type))))

;;; Seq-Dispatch does an efficient type-dispatch on the given Sequence.

(defmacro seq-dispatch (sequence list-form array-form)
  `(if (listp ,sequence)
       ,list-form
       ,array-form))

(defmacro elt-slice (sequences n)
  "Returns a list of the Nth element of each of the sequences.  Used by MAP
   and friends."
  `(mapcar #'(lambda (seq) (elt seq ,n)) ,sequences))

(defmacro make-sequence-like (sequence length)
  "Returns a sequence of the same type as SEQUENCE and the given LENGTH.
  `(make-sequence-of-type (type-of ,sequence) ,length))

(defmacro type-specifier-atom (type)
  "Returns the broad class of which TYPE is a specific subclass."
  `(if (atom ,type) ,type (car ,type)))


If somebody knows what's wrong now please tell me.

I look forward to hearing from you.

Yours,
Bela.  
From eich@crunch.ikp.physik.th-darmstadt.de  Thu Jul 22 14:13:46 1993
Return-Path: <eich@crunch.ikp.physik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03047; Thu, 22 Jul 93 14:13:46 +0200
Received: from crunch (crunch.ikp.physik.th-darmstadt.de) by rs2.hrz.th-darmstadt.de with SMTP id AA32133
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Thu, 22 Jul 1993 14:10:17 +0200
Received: by crunch (AIX 3.2/UCB 5.64/Client-1.5/HRZ-THD)
	id AA17068; Thu, 22 Jul 1993 14:10:17 +0200
Date: Thu, 22 Jul 1993 14:10:17 +0200
From: Egbert Eich <eich@crunch.ikp.physik.th-darmstadt.de>
Message-Id: <9307221210.AA17068@crunch>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: unsubscribing from this list


Dear CLISP users,

When I subscribed to this list I received a mail saying (among other things):
 
 To unsubscribe from the clisp-list mailing list, send mail to
                listserv@ma2s2.mathematik.uni-karlsruhe.de
  including the two words "unsubscribe clisp-list" as message body.

Maybe everybody who has lost that mail should keep these lines in a
save place. This could avoid flooding peoples mailboxes with useless
messages.

Egbert.
From UNM42E@IBM.rhrz.uni-bonn.de  Fri Jul 23 15:58:32 1993
Return-Path: <UNM42E@IBM.rhrz.uni-bonn.de>
Received: from IBM.rhrz.uni-bonn.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04750; Fri, 23 Jul 93 15:58:32 +0200
Resent-Message-Id: <9307231358.AA04750@ma2s2.mathematik.uni-karlsruhe.de>
Received: from DBNRHRZ1.BITNET by IBM.rhrz.uni-bonn.de (IBM VM SMTP V2R2)
   with BSMTP id 2997; Fri, 23 Jul 93 15:54:10 MEZ
Received: from DBNRHRZ1 (UNM42E) by DBNRHRZ1.BITNET (Mailer R2.08 R208004) with
 BSMTP id 3856; Fri, 23 Jul 93 15:54:09 MEZ
Resent-Date:  Fri, 23 Jul 93 15:53:09 MEZ
Resent-From: Michael Stoll <UNM42E@IBM.rhrz.uni-bonn.de>
Resent-To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Received: from sfb256.iam.uni-bonn.de by IBM.rhrz.uni-bonn.de (IBM VM SMTP V2R2)
   with TCP; Fri, 23 Jul 93 15:51:41 MEZ
Received: from rhein by sfb256.iam.uni-bonn.de (5.64/0.0)
	id AA25062; Fri, 23 Jul 93 16:01:08 +0200
Received: by rhein.iam.uni-bonn.de (920330.SGI/911001.SGI)
	for @sfb256.iam.uni-bonn.de:UNM42E@ibm.rhrz.uni-bonn.de id AA01355; Fri, 23 Jul
 93 16:01:04 +0200
Date: Fri, 23 Jul 93 16:01:04 +0200
From: michael@rhein.iam.uni-bonn.de (Michael Stoll)
Message-Id: <9307231401.AA01355@rhein.iam.uni-bonn.de>
To: UNM42E@IBM.rhrz.uni-bonn.de
Subject: Problem with subseq



----------------------------Original message----------------------------
Bela Pecsek  <P2043742@csdvax.csd.unsw.EDU.AU>  writes:

[Stuff deleted]

> *** - SUBSEQ: :END should be an integer >=0, not NIL
>
> After this error I grebbed the subseq function from the CMU Common Lisp
 sources
> and compiled and loaded it. I tested it first of course and it seems to work
> just fine.

[Tests deleted]

> But then I wanted to start up Gilt and guess what happened?
> The Gilt Work Window, Gilt Commands and Gilt Motif Gadgets came up and I was
> happier than ever and then the shock came.
>
> > (gilt:do-go)
>
> *** - SUBSEQ: :END should be an integer >=0, not NIL
> 1. Break>
>
> I realy don't know where this error comes from but hopefully somebody out
 there
> knows about it.

[Stuff deleted]

Propbably the calls to `subseq' have been compiled inline, so that the built-in
subseq function is called even if you have redifed subseq later.

Try to declare subseq notinline (for example,  (proclaim '(notinline subseq)) )
and recompile.

Michael
From haible  Fri Jul 23 16:16:36 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04828; Fri, 23 Jul 93 16:16:36 +0200
Date: Fri, 23 Jul 93 16:16:36 +0200
From: haible (Bruno Haible)
Message-Id: <9307231416.AA04828@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Garnet, SUBSEQ

Douglas Ambrisko <ambrisko@kpc.com> writes:

> | *** - UNIX error 9 (EBADF): Bad file number 
> I just grabbed the clisp versin of garnet and built it.  I hit the same
> problem with the "saveinitmem" on a DEC alpha box .  The problem 
> is that garnet assumes you do a load of all compiled modules including 
> opal/defs which calls "initialize-x11-values".

Ouch. Open file descriptors don't survive a "saveinitmem", of course.

> So a work-around that 
> I'm doing now is to load the "saveinitmem" version then loading opal/defs. 

(opal::initialize-x11-values (opal::get-full-display-name))
should work, too.

Bela Pecsek <P2043742@csdvax.csd.unsw.EDU.AU> writes:

> *** - SUBSEQ: :END should be an integer >=0, not NIL

As I noted, this will be fixed in the next release. Meanwhile, you can
also use the following patch:

(in-package "LISP")
(proclaim '(notinline subseq))
(setf (symbol-function 'old-subseq) (symbol-function 'subseq))
(defun subseq (seq start &optional (end nil))
  (if (null end)
    (old-subseq seq start)
    (old-subseq seq start end)
) )

> I was happier than ever and then the shock came.
> *** - SUBSEQ: :END should be an integer >=0, not NIL
> I really don't know where this error comes from but hopefully somebody
> out there knows about it.

You have to  (proclaim '(notinline subseq))  before compiling Garnet.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

!! To unsubscribe from the clisp-list mailing list, send mail to     !!
!!           listserv@ma2s2.mathematik.uni-karlsruhe.de              !!
!! including the two words "unsubscribe clisp-list" as message body. !!
From P2043742@csdvax.csd.unsw.EDU.AU  Tue Jul 27 09:53:50 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08060; Tue, 27 Jul 93 09:53:50 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H11NN0DYCW8WX9AC@csdvax.csd.unsw.EDU.AU>; Tue,
 27 Jul 1993 17:48:33 +1000
Date: Tue, 27 Jul 1993 17:48:33 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: 
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H11NN0GWGI8WX9AC@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear CLISP users,

Thanks for your help to get Garnet up on CLISP for me.
                             
After proclaiming subseq notinline, recompiling Garnet and loading opal/defs
everything seems to be fine but the speed that is a bit slow on my SGI however
in an accaptable range.

Thanks again,

I look forward to hearing from you.

Yours,
Bela.
From reggie@muon.phys.washington.edu  Thu Aug  5 05:19:48 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17234; Thu, 5 Aug 93 05:19:48 +0200
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA00145; Wed, 4 Aug 93 20:13:51 -0700
Message-Id: <9308050313.AA00145@muon.phys.washington.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Clarification Please.
Date: Wed, 04 Aug 1993 20:13:51 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	I found this while lurking on the net in comp.compilers in the FAQ:

language:	Common Lisp
package:	CLISP
version:	?
parts:		bytecode compiler, translator(->C), runtime, library, editor
                                   ^^^^^^^^^^^^^^^
author:		Bruno Haible <haible@ma2s2.mathematik.uni-karlsruhe.de>,
		Michael Stoll <michael@rhein.iam.uni-bonn.de>
location:	ftp pub/lisp/clisp from ma2s2.mathematik.uni-karlsruhe.de
description:	CLISP is a Common Lisp (CLtL1) implementation by Bruno Haible
		of Karlsruhe University and Michael Stoll of Munich University,
		both in Germany.  It needs only 1.5 MB of RAM.  German and
		English versions are available, French coming soon.  Packages
		running in CLISP include PCL and, on Unix machines, CLX.
_____________

	Is there really a translator to C for clisp? Thanks for the info.


					Reggie

-------------------
Reginald S. Perry -- University of Washington, Department of Physics FM-15
                     Seattle, Washington 98195
reggie@muon.phys.washington.edu     (General-Mail) 
reggie@u.washington.edu             (General-Mail) 
reggie@quantum.phys.washington.edu  (NeXTMail)  



From haible  Thu Aug  5 15:27:18 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17686; Thu, 5 Aug 93 15:27:18 +0200
Date: Thu, 5 Aug 93 15:27:18 +0200
From: haible (Bruno Haible)
Message-Id: <9308051327.AA17686@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Clarification Please

Reggie Perry <reggie@muon.phys.washington.edu> writes:

> 	I found this while lurking on the net in comp.compilers in the FAQ:
> package:	CLISP
> parts:	bytecode compiler, translator(->C), runtime, library, editor
>                                  ^^^^^^^^^^^^^^^

No, CLISP compiles to bytecode only, not to C.

> Is there really a translator to C for clisp?

No.

AKCL is a Common Lisp system that compiles to C, then uses the machine's
C compiler to compile to machine code, and AKCL can load such machine code
mudules into the running image.

CLiCC on the other hand can build stand-alone executables from Common Lisp
programs, again using the machine's C compiler.


The CLiCC README file:

    CLiCC is a Common Lisp to C Compiler.  It generates C-executables 
    from Common Lisp application programs. CLiCC is not a Common Lisp 
    system.  Hence it does  not  include any  program  development or 
    debugging support.  CLiCC is intended to  be used as an  addon to 
    existing Common Lisp systems for generating portable applications.
    
    CLiCC supports a subset of Common Lisp + CLOS, which we call CL_0
    (CommonLisp_0).  CL_0  is a strict and very large  subset of full
    Common Lisp + CLOS, without  (EVAL ...) and friends.  At present,
    CL_0 is based on CLtL1,  but  we  are  working towards  CLtL2 and
    ANSI-CL.
    
    The target language is a subset of C. CLiCC is adaptable to gene-
    rate ANSI-C or K&R-C by using a compiler option.  The generated C 
    code is compilable using  a conventional C compiler on the target 
    machine,  and must be  linked with the  CLiCC runtime library  in
    order to generate executables. 
    
    -----------------------------------------------------------------
    
              CLiCC is available via anonymous ftp from
    
              ftp.informatik.uni-kiel.de  (134.245.15.113) 
              file: kiel/apply/clicc-0.6.1.tar.Z
    
    -----------------------------------------------------------------
    
               Wolfgang Goerigk, wg@informatik.uni-kiel.de
               Ulrich Hoffman, uho@informatik.uni-kiel.de
               Heinz Knutzen, hk@informatik.uni-kiel.de
    
    
                 Christian-Albrechts-Universitaet zu Kiel, 
            Institut fuer Informatik und Praktische Mathematik
                            Preusserstr. 1-9
                         D-24105 Kiel, Germany
    
    -----------------------------------------------------------------


CLiCC runs in CLISP without any modification, but you need at least 8 MB RAM.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Fri Aug 13 16:56:36 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA24897; Fri, 13 Aug 93 16:56:36 +0200
Date: Fri, 13 Aug 93 16:56:36 +0200
From: haible (Bruno Haible)
Message-Id: <9308131456.AA24897@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: CLISP on MS Windows

Mr Ralf Muschall <prm@rz.uni-jena.de> told me how CLISP can be made to
run under Microsoft Windows. From his information I compiled the following
instructions. Can someone please verify whether these instructions are
correct? Please try it and tell me about your success or failure.

Installation under Microsoft Windows:
-------------------------------------

CLISP also runs in the DOS box of Microsoft Windows 3.1.
To achieve this, the following additional steps are necessary:

1. Get and install
     ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/dos/clisp-english.zip
   as described above. Also get
     ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/dos/delay.exe
   Then

   copy delay.exe d:\lib\lisp

2. Get and install
     ftp.uni-kl.de:/pub/pc/dos/programming/c/dpmigcc1.zip

3. Create a batch file that starts lisp:

   copy con c:\bat\winclisp.bat
   d:\lib\lisp\delay.exe 1
   c:\rsx\bin\rsx.exe d:\lib\lisp\lisp.exe -M d:\lib\lisp\lispinit.mem %1 %2 %3 %4 %5 %6 %7 %8 %9
   [Ctrl-Z]

   (The paths of course depend on your installation.)

4. Call the PIF editor and input the following:

   Program file name:      c:\bat\winclisp.bat
   Program title:          COMMON LISP
   Program parameters:     
   Start directory:        e:\lisp
   Screen:                 Text
   Memory requirements:    requires:  500      maximum:  640
   EMS memory:             requires:    0      maximum:    0
   XMS memory:             requires: 1024      maximum:   -1
   Display:                        [as you like]
   Quit_closes_window:             [as you like]
   Execution:                      [as you like]
   other_options:                  [as you like]

   (You will probably choose the directory which contains your lisp programs
   as start directory, instead of e:\lisp.)

   Save it under the name WINCLISP.PIF.

5. In the program manager, in a suitable group:

   Menu "File" -> "New" -> "Program", window "program properties".
   Input there:

   Description:            COMMON LISP
   Command line:           winclisp.pif
   Start directory:        e:\lisp
   Key combination:        Ctrl+Alt+Shift+L      [as you like]

Clicking with the mouse on the such created icon or pressing the key
combination given above will now start CLISP.

Remarks:

* If you want to provide command line parameters for CLISP, set the
  "Program parameters" field in the PIF editor to "?". You will then
  always be asked to input arguments for WINCLISP.BAT.

* Cut & Paste in DOS boxes (via menu "Edit" -> "Mark" resp.
  menu "Edit" -> "Insert") inserts an <Enter> at the end. Therefore one
  cannot re-edit a pasted line.

* But the editing facilities mentioned in CLISP.MAN work.

* Bugs in Microsoft Windows and/or RSX can cause system crashes.
  (That's also the reason for DELAY.EXE.) Good luck!


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From simmons@cs.washington.edu  Tue Aug 17 21:30:52 1993
Received: from june.cs.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26638; Tue, 17 Aug 93 21:30:52 +0200
Received: by june.cs.washington.edu (5.65b/7.1ju)
	id AA17328; Tue, 17 Aug 93 12:22:35 -0700
Date: Tue, 17 Aug 93 12:22:35 -0700
From: simmons@cs.washington.edu (Dave Simmons)
Return-Path: <simmons@cs.washington.edu>
Message-Id: <9308171922.AA17328@june.cs.washington.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Clisp and Microsoft Windows


I am part of a group at the University of Washington (Seattle, USA) that
is writing image processing software to be used for mathematics education.

One of our projects is to set up an image processing environment using
Microsoft Windows.  We want to have Clisp running in one window, and have
it send data and commands to another MS Windows application that manages
a set of image windows.  To do this, Clisp needs to be compiled as a
Windows application so that it can call a C dynamic-link library and
perhaps use the Dynamic Data Exchange functions.

Has anyone tried making Clisp into a windows application (perhaps
using Borland software's "EasyWin" code)?  

Also, is there any way to make the existing Dos executables run
under Windows?

Any information or advice would be appreciated.

---Dave

David Simmons | CS grad student | U of W Dept. Computer Science

From ae1181t@stnfor.ae.ge.com  Wed Aug 18 13:53:18 1993
Return-Path: <ae1181t@stnfor.ae.ge.com>
Received: from stnfor.ae.ge.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26993; Wed, 18 Aug 93 13:53:18 +0200
Received: by stnfor.ae.ge.com (5.65/DEC-Ultrix/4.3)
	id AA11354; Wed, 18 Aug 1993 07:42:47 -0400
Date: Wed, 18 Aug 1993 07:42:47 -0400
From: ae1181t@stnfor.ae.ge.com (Osman F Buyukisik)
Message-Id: <9308181142.AA11354@stnfor.ae.ge.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: <9308171922.AA17328@june.cs.washington.edu> (simmons@cs.washington.edu)
Subject: Re: Clisp and Microsoft Windows

I think it would take a lot of work. Win3.x is 16 bit and Clisp is based on 32
bits. Since now Clisp can run in a DOS window, may be you can still cut and
paste (but probab. just text).
Osman
From blake@netcom.com  Thu Aug 19 06:24:15 1993
Return-Path: <blake@netcom.com>
Received: from netcom4.netcom.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27316; Thu, 19 Aug 93 06:24:15 +0200
Received: by netcom4.netcom.com (5.65/SMI-4.1/Netcom)
	id AA04535; Wed, 18 Aug 93 21:16:33 -0700
From: blake@netcom.com (Blake McBride)
Message-Id: <9308190416.AA04535@netcom4.netcom.com>
Subject: Re: Clisp and Microsoft Windowsi]
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Wed, 18 Aug 93 21:16:32 PDT
In-Reply-To: <9308181142.AA11354@stnfor.ae.ge.com>; from "Osman F Buyukisik" at Aug 18, 93 1:54 pm
X-Mailer: ELM [version 2.3 PL11]

> 
> I think it would take a lot of work. Win3.x is 16 bit and Clisp is based on 32
> bits. Since now Clisp can run in a DOS window, may be you can still cut and
> paste (but probab. just text).
> Osman
> 
> 

The best way to make CLISP a windows app is by the use of Win32s.
Develop a full 32 bit version under Windows NT using Microsofts
32 bit NT C compiler.  When linked with the Win32s libary it'll
run in true 32 bit mode under Windows 3.1!

-- 
Blake McBride				(615) 790-8521
3020 Liberty Hills Drive		
Franklin, TN  37064			blake@netcom.com
U.S.A.
From haible  Sun Aug 22 19:50:25 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04260; Sun, 22 Aug 93 19:50:25 +0200
Date: Sun, 22 Aug 93 19:50:25 +0200
From: haible (Bruno Haible)
Message-Id: <9308221750.AA04260@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

Excerpt from the change log:

Important note
--------------

* Changed bytecode format. All .fas files generated by previous CLISP versions
  are invalid and must be recompiled.

User visible changes
--------------------

* X3J13 vote <12> is partially implemented: Native CLOS. New package CLOS
  containing the macros
    DEFCLASS, DEFMETHOD, DEFGENERIC, GENERIC-FUNCTION, GENERIC-FLET,
    GENERIC-LABELS, WITH-SLOTS, WITH-ACCESSORS,
  the functions
    FIND-CLASS, (SETF FIND-CLASS), CLASS-OF, CLASS-NAME, (SETF CLASS-NAME),
    SLOT-VALUE, SLOT-BOUNDP, SLOT-MAKUNBOUND, SLOT-EXISTS-P,
    CALL-NEXT-METHOD, NEXT-METHOD-P,
    NO-APPLICABLE-METHOD, NO-PRIMARY-METHOD, NO-NEXT-METHOD,
    FIND-METHOD, ADD-METHOD, REMOVE-METHOD, COMPUTE-APPLICABLE-METHODS,
    METHOD-QUALIFIERS, FUNCTION-KEYWORDS, SLOT-MISSING, SLOT-UNBOUND,
    PRINT-OBJECT, DESCRIBE-OBJECT, MAKE-INSTANCE, INITIALIZE-INSTANCE,
    REINITIALIZE-INSTANCE, SHARED-INITIALIZE,
  the classes
    STANDARD-CLASS, STRUCTURE-CLASS, BUILT-IN-CLASS, STANDARD-OBJECT,
    STANDARD-GENERIC-FUNCTION, STANDARD-METHOD and all predefined classes,
  and the method combination
    STANDARD.
  See impnotes.txt for details. X3J13 vote <13> is implemented, too.

* X3J13 vote <63> is implemented: DESCRIBE receives the output stream as
  optional argument. New function CLOS:DESCRIBE-OBJECT.

* X3J13 vote <149> is implemented: The second argument to SUBSEQ may now
  be NIL. Thanks to Thomas Kirk.

* X3J13 vote <175> is implemented: TAILP now also works on dotted lists.

* X3J13 vote <124> is implemented: (DECLARE (OPTIMIZE (DEBUG ...))) is legal.

* The type specifier (EQL object), a synonym for (MEMBER object), is now
  implemented.

* New DEFSTRUCT option :INHERIT which is exactly like :INCLUDE except that it
  doesn't create new accessors for the inherited slots. Use this option to
  avoid the problems that occur when using the same :CONC-NAME for the new
  and the inherited structure.

* Fixed EXPORT and USE-PACKAGE: Don't signal a name conflict between the
  symbol being exported and a symbol accessible in the using package if
  the latter symbol is on the list of shadowing symbols of the using package.

* Fixed VECTOR-PUSH-EXTEND. It now works on vectors of dimension 0 and
  on bit-vectors.

* Fixed PRINT-UNREADABLE-OBJECT: Don't output adjacent spaces.

* Fixed a bug in the reader that caused an endless loop or endless recursion
  when resolving #n=/#n# references in objects that already contained cyclic
  data structures, e.g. when reading (#1=a #.'#2=(b . #2#) #1#).

* Fixed a bogus error message in the complex number reader.

Portability
-----------

* The DOS README explains how to run CLISP in the DOS box of Microsoft
  Windows. Thanks to Ralf Muschall.

* Added Sinix support. Thanks to Manfred Weichel.

* Improved installation on OS/2.

Other modifications
-------------------

* A function proclaimed INLINE will be taken inline in a wider set of
  circumstances. (Previously INLINE worked only when that function was being
  used in the same file or in a file that REQUIREd the file defining the
  function.)

* The compiler now produces better code for (APPLY (FUNCTION fun) args).

* Changed the default memory size from 2 megabytes to 2.5 megabytes.

* Miscellaneous documentation updates.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From reggie@muon.phys.washington.edu  Sun Aug 22 23:29:16 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05606; Sun, 22 Aug 93 23:29:16 +0200
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA11238; Sun, 22 Aug 93 14:20:40 -0700
Message-Id: <9308222120.AA11238@muon.phys.washington.edu>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: New CLISP version 
In-Reply-To: Your message of "Sun, 22 Aug 1993 19:52:15 +0200."
             <9308221750.AA04260@ma2s2.mathematik.uni-karlsruhe.de> 
Date: Sun, 22 Aug 1993 14:20:39 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	Hi there. I am compiling clisp on an SGI Indigo running IRIX
4.0.5F. I am having problems compiling your latest clisp. here is the
problem

lisparit0.d:19231: warning: integer overflow in expression
lisparit0.d:19231: warning: statement with no effect
lisparit0.d:19231: warning: statement with no effect
lisparit0.d:19234: warning: address of register variable `ziffern' requested
libmld--as0: Error: lisparit0.d, line 20723: cannot write cur table


	I am using gcc 2.4.5 . Thanks for your help.


-------------------
Reginald S. Perry -- University of Washington, Department of Physics FM-15
                     Seattle, Washington 98195
reggie@muon.phys.washington.edu     (General-Mail) 
reggie@u.washington.edu             (General-Mail) 
reggie@quantum.phys.washington.edu  (NeXTMail)  

From haible  Sun Aug 22 23:43:32 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05702; Sun, 22 Aug 93 23:43:32 +0200
Date: Sun, 22 Aug 93 23:43:32 +0200
From: haible (Bruno Haible)
Message-Id: <9308222143.AA05702@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Reginald S. Perry <reggie@muon.phys.washington.edu> writes:

> I am having problems compiling your latest clisp. here is the problem
>
> lisparit0.d:19234: warning: address of register variable `ziffern' requested
> libmld--as0: Error: lisparit0.d, line 20723: cannot write cur table

The warnings are OK. The error probably comes from the fact that your
temporary directory ($TMPDIR or /usr/tmp or /tmp) is full. Temporary
files for lisparit0.d may well be one or two megabytes in size.

Bruno Haible
From matthias@intellektik.informatik.th-darmstadt.de  Mon Aug 23 18:08:40 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06310; Mon, 23 Aug 93 18:08:40 +0200
Received: from aida.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA25009
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Mon, 23 Aug 1993 17:59:56 +0200
Received: by aida.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA02642; Mon, 23 Aug 93 17:59:51 +0200
Date: Mon, 23 Aug 93 17:59:51 +0200
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9308231559.AA02642@aida.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Clisp and Microsoft Windows

> > 
> > I think it would take a lot of work. Win3.x is 16 bit and Clisp is based on 32
> > bits. Since now Clisp can run in a DOS window, may be you can still cut and
> > paste (but probab. just text).
> > Osman
> > 
> > 
> 
> The best way to make CLISP a windows app is by the use of Win32s.
> Develop a full 32 bit version under Windows NT using Microsofts
> 32 bit NT C compiler.  When linked with the Win32s libary it'll
> run in true 32 bit mode under Windows 3.1!
> 

Hi,

did someone out there really do this - or is ist just an idea how it
might work? If there are versions of CLISP floating around, that run
as real win3.x-applications (not in a DOS-window!) please let me know.

Thanx

--Matthias

------------------------------------------------------------------------------
Matthias Lindner
FG Intellektik, FB Informatik
Technische Hochschule Darmstadt
Alexanderstr.10, D-64283 Darmstadt
TEL: +49 6151 166651
FAX: +49 6151 165326
NET: matthias@intellektik.informatik.th-darmstadt.de
------------------------------------------------------------------------------
From matthias@intellektik.informatik.th-darmstadt.de  Tue Aug 24 14:49:08 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07017; Tue, 24 Aug 93 14:49:08 +0200
Received: from aida.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA38376
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Tue, 24 Aug 1993 14:40:15 +0200
Received: by aida.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA05026; Tue, 24 Aug 93 14:40:10 +0200
Date: Tue, 24 Aug 93 14:40:10 +0200
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9308241240.AA05026@aida.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  New CLISP version


Hi,

yesterday I fetched and compiled the new version of CLISP. Everything worked
fine, except for the make-instance function in the new CLOS package. 
I think the built-in C-function sys::%make-instance does not call 
initialize-instance on the newly created object. The wrapping lisp-function
clos:make-instance does not accept any keyword arguments, that are not
defined as :initarg-options to slot definitions in clos:defclass.

Is this a bug, or did I misinstall something?

--Matthias

From haible  Tue Aug 24 15:20:35 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07145; Tue, 24 Aug 93 15:20:35 +0200
Date: Tue, 24 Aug 93 15:20:35 +0200
From: haible (Bruno Haible)
Message-Id: <9308241320.AA07145@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list, haible@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de> writes

> I think the built-in C-function sys::%make-instance does not call
> initialize-instance on the newly created object. The wrapping lisp-function
> clos:make-instance does not accept any keyword arguments, that are not
> defined as :initarg-options to slot definitions in clos:defclass.

Yes, this is the current behaviour. I noted in impnotes.txt:

MAKE-INSTANCE does not call INITIALIZE-INSTANCE and SHARED-INITIALIZE, but does
everything itself. Defining methods on INITIALIZE-INSTANCE or SHARED-INITIALIZE
therefore does not modify the behaviour of MAKE-INSTANCE.

> Is this a bug, or did I misinstall something?

You may call it a bug. I chose this approach to reduce the costs of calling
MAKE-INSTANCE. For now, it's 1 generic function call and dispatch and 2
built-in function calls. If MAKE-INSTANCE is required to go through
INITIALIZE-INSTANCE and SHARED-INITIALIZE, the costs will be at least 3 GF
calls and about 10 other function calls. Unless I do some ugly hacks,
modifying #'MAKE-INSTANCE every time a method is added to
#'INITIALIZE-INSTANCE or #'SHARED-INITIALIZE.

What is common practice in CLOS programs? Are methods for INITIALIZE-INSTANCE
frequent or not? What about methods for SHARED-INITIALIZE ?


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

From matthias@intellektik.informatik.th-darmstadt.de  Tue Aug 24 17:00:32 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07620; Tue, 24 Aug 93 17:00:32 +0200
Received: from aida.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA29928
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Tue, 24 Aug 1993 16:51:38 +0200
Received: by aida.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA05498; Tue, 24 Aug 93 16:51:32 +0200
Date: Tue, 24 Aug 93 16:51:32 +0200
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9308241451.AA05498@aida.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Bruno Haible wrote:
> 
> You may call it a bug. I chose this approach to reduce the costs of calling
> MAKE-INSTANCE. For now, it's 1 generic function call and dispatch and 2
> built-in function calls. If MAKE-INSTANCE is required to go through
> INITIALIZE-INSTANCE and SHARED-INITIALIZE, the costs will be at least 3 GF
> calls and about 10 other function calls. Unless I do some ugly hacks,
> modifying #'MAKE-INSTANCE every time a method is added to
> #'INITIALIZE-INSTANCE or #'SHARED-INITIALIZE.
> 
> What is common practice in CLOS programs? Are methods for INITIALIZE-INSTANCE
> frequent or not? What about methods for SHARED-INITIALIZE ?
> 
> 
My experience in CLOS-programming is not very extensive, however many programs,
I saw used INITIALIZE-INSTANCE to do most of the work. I use CLOS (and used 
PCL before) to build a simple window system based on the StdWin interface
of CLISP (which I've finished). 
I think it is very desirable, to be able to do something like

(make-instance 'menu-window 
               :title "Lisps" 
               :items (list "CLISP" "LUCID" "ALLEGRO"))

to create a pop-up-menu. Of course it is possible, to write a wrapping
function MAKE-MENU-WINDOW, that explicitly calls initialize-instance, but
why should this be necessary? CLtL2 (sorry I don't have CLtL1) says on page 847:

"The generic function initialize-instance is called by make-instance to
initialize a newly created instance."

The same can be found in the PCL documentation "Functions in the
Programmer Interface" page 2-57. I think ist's not a good idea to
pay with incompatibilty for sparing a few function calls.
However - that's *my* opinion - of course.

Anyway - after changing MAKE-INSTANCE - everything worked fine. The
performance of the new CLOS is very impressing - compared to PCL.
Pretty good work - thanks!

--Matthias

------------------------------------------------------------------------------
Matthias Lindner
FG Intellektik, FB Informatik
Technische Hochschule Darmstadt
Alexanderstr.10, D-64283 Darmstadt
TEL: +49 6151 166651
FAX: +49 6151 165326
NET: matthias@intellektik.informatik.th-darmstadt.de
------------------------------------------------------------------------------
From egdorf@zaphod.lanl.gov  Tue Aug 24 18:37:03 1993
Return-Path: <egdorf@zaphod.lanl.gov>
Received: from mailhost.lanl.gov by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07737; Tue, 24 Aug 93 18:37:03 +0200
Received: from zaphod.lanl.gov by mailhost.lanl.gov (5.65/1.14)
	id AA02142; Tue, 24 Aug 93 10:27:13 -0600
Received: by zaphod.lanl.gov.a7-mimsy (4.1/SMI-4.1)
	id AA01529; Tue, 24 Aug 93 10:28:11 MDT
Date: Tue, 24 Aug 93 10:28:11 MDT
From: egdorf@zaphod.lanl.gov (Skip Egdorf)
Message-Id: <9308241628.AA01529@zaphod.lanl.gov.a7-mimsy>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: Bruno Haible's message of Tue, 24 Aug 93 15:21:18 +0200 <9308241320.AA07145@ma2s2.mathematik.uni-karlsruhe.de>
Subject: RE: New CLISP version (and make-instance)


   You may call it a bug. I chose this approach to reduce the costs of calling
   MAKE-INSTANCE. For now, it's 1 generic function call and dispatch and 2
   built-in function calls. If MAKE-INSTANCE is required to go through
   INITIALIZE-INSTANCE and SHARED-INITIALIZE, the costs will be at least 3 GF
   calls and about 10 other function calls. Unless I do some ugly hacks,
   modifying #'MAKE-INSTANCE every time a method is added to
   #'INITIALIZE-INSTANCE or #'SHARED-INITIALIZE.

   What is common practice in CLOS programs? Are methods for INITIALIZE-INSTANCE
   frequent or not? What about methods for SHARED-INITIALIZE ?

One data point: Yes, frequent to both!

If make-instance does not call initialize-instance as described in the
spec, it will not work for ANY CLOS programs in my current suite.

Modifying the behaviour of initialize-instance and shared-initialize
is a very basic mechanism used throughout every CLOS program of which
I am aware.

Sorry Bruno, that is probably not the answer you wanted to hear...

					Skip Egdorf
					hwe@lanl.gov
From lrw@sdsc.edu  Tue Aug 24 23:52:16 1993
Return-Path: <lrw@sdsc.edu>
Received: from mailserver.sdsc.edu (rosebud.sdsc.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07880; Tue, 24 Aug 93 23:52:16 +0200
Received: from toastman.sdsc.edu by mailserver.sdsc.edu (4.1/4.8)  id AA23109; Tue, 24 Aug 93 14:43:45 PDT
Received: by toastman.sdsc.edu (5.65/DEC-OSF1/4.3-sdsc)
	id AA03779; Tue, 24 Aug 1993 14:43:13 -0700
Message-Id: <9308242143.AA03779@toastman.sdsc.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de (clisp-list)
Subject: Re: New CLISP version (and make-instance)  
In-Reply-To: Your message of "Tue, 24 Aug 93 18:38:39 +0200."
             <9308241628.AA01529@zaphod.lanl.gov.a7-mimsy> 
Date: Tue, 24 Aug 93 14:43:13 +28416
From: lrw@sdsc.edu
X-Mts: smtp

>   What is common practice in CLOS programs? Are methods for
>INITIALIZE-INSTANCE frequent or not? What about methods for SHARED-INITIALIZE ?

I am just a CLOS beginner but I have used one or both of those
methods in every CLOS class I have written.

Len Wanger
San Diego Supercomputer Center.
From loewenst@paul.rutgers.edu  Wed Aug 25 00:16:28 1993
Return-Path: <loewenst@paul.rutgers.edu>
Received: from att.att.com (att-out.att.com) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07938; Wed, 25 Aug 93 00:16:28 +0200
From: David.Loewenstern@att.com (David Loewenstern, Bell Labs, 201-386-6516)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Received: by cbfsb.cb.att.com (4.1/EMS main.cf 1.23 3/29/93 (SMI-4.1))
	id AA04197; Tue, 24 Aug 93 10:54:40 EDT
Received: from hogpa.ho.att.com by cbfsb (4.1/EMS main.cf 1.23 3/29/93 (SMI-4.1))
	id AA04180; Tue, 24 Aug 93 10:54:01 EDT
Received: from hogpb.ho.att.com by hogpa.ho.att.com (4.1/SMI-4.0)
	id AA28790; Tue, 24 Aug 93 10:53:53 EDT
Received: by hogpb.ho.att.com using UUCP (4.1/6.0c-FWP);
	   id AA16498; Tue, 24 Aug 93 10:53:52 EDT
Received: from paul.rutgers.edu by att.att.com; Tue, 24 Aug 93 16:42 EDT
Date: Tue, 24 Aug 93 10:53:52 EDT
Content-Length: 876
Content-Type: text
Message-Id: <9308241453.AA16498@hogpb.ho.att.com>
Original-From: att.com!David.Loewenstern (David Loewenstern, Bell Labs, 201-386-6516) 
Original-To: ma2s2.mathematik.uni-karlsruhe.de!clisp-list 
In-Reply-To: Bruno Haible's message of Tue, 24 Aug 93 15:21:18 +0200 <9308241320.AA07145@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: New CLISP version
Reply-To: loewenst@paul.rutgers.edu (David Loewenstern)

... On Tue, 24 Aug 93 15:21:18 +0200, haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible) said:

} What is common practice in CLOS programs? Are methods for INITIALIZE-INSTANCE
} frequent or not? What about methods for SHARED-INITIALIZE ?

I've written methods for both INITIALIZE-INSTANCE and
SHARED-INITIALIZE, to derive default slot values from other slot
values.  I haven't had a situation in which I couldn't have easily
switched from INITIALIZE-INSTANCE to SHARED-INITIALIZE or vice versa.

Perhaps you could make the compliant version standard, and provide
the non-compliant .fas file for people who needed the speed?

(Or you could get really fancy and add a non-compliant-class
metaclass.)

These opinions are shareware.  If you like the product,
please send your $0.02 to
               David Loewenstern
<loewenst@paul.rutgers.edu || David.Loewenstern@att.com>
From michael@ifki50.informatik.fh-muenchen.de  Wed Aug 25 08:18:58 1993
Return-Path: <michael@ifki50.informatik.fh-muenchen.de>
Received: from ifki50.informatik.fh-muenchen.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08386; Wed, 25 Aug 93 08:18:58 +0200
Received: by ifki50.informatik.fh-muenchen.de (AIX 3.2/UCB 5.64/4.03)
          id AA22978; Wed, 25 Aug 1993 08:09:48 +0200
Date: Wed, 25 Aug 1993 08:09:48 +0200
From: michael@ifki50.informatik.fh-muenchen.de
Message-Id: <9308250609.AA22978@ifki50.informatik.fh-muenchen.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Port fuer RS6000 ?

Ich habe versuht Clisp auf die RS6000 zu portieren.
Ich komme aber nicht weiter als bis zum Interpreter. 
Der Compiler luft nicht, sonern produziert nur ser viele Meldungen.

Mache ich Arbeit doppelt?
Giebt es eine Quellcodedukomentation

Vielen Dank

Michael Kirstein


From haible  Thu Aug 26 12:23:51 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA09901; Thu, 26 Aug 93 12:23:51 +0200
Date: Thu, 26 Aug 93 12:23:51 +0200
From: haible (Bruno Haible)
Message-Id: <9308261023.AA09901@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version (and make-instance)

OK, enough feedback. I thank you all! I asked

! What is common practice in CLOS programs? Are methods for INITIALIZE-INSTANCE
! frequent or not? What about methods for SHARED-INITIALIZE ?

Matthias Lindner and Joerg Hoehle pointed out that INITIALIZE-INSTANCE
methods are very frequent. Skip Egdorf, Len Wanger and David Loewenstern
mentioned SHARED-INITIALIZE as well.

So, I have rewritten MAKE-INSTANCE so that it behaves as if it were calling
INITIALIZE-INSTANCE, and I'll probably do the same for SHARED-INITIALIZE.

David Loewenstern:
> Perhaps you could make the compliant version standard, and provide
> the non-compliant .fas file for people who needed the speed?

No, the new MAKE-INSTANCE is even faster than the old one.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From deleeuw@stat.ucla.edu  Sat Aug 28 10:39:02 1993
Received: from julia.math.ucla.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA11327; Sat, 28 Aug 93 10:39:02 +0200
Received: from laplace.stat.ucla.edu by julia.math.ucla.edu via SMTP 
	(Sendmail 5.61/1.07) id AA26180; Sat, 28 Aug 93 01:30:32 -0700
Return-Path: <deleeuw@stat.ucla.edu>
Received: by laplace.stat.ucla.edu 
	(Sendmail 4.1/1.08) id AA00210; Sat, 28 Aug 93 01:23:57 PDT
Date: Sat, 28 Aug 93 01:23:57 PDT
From: Jan Deleeuw <deleeuw@stat.ucla.edu>
Message-Id: <9308280823.AA00210@laplace.stat.ucla.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: clue problem

Hello,

I setup clisp, clx, pcl, garnet, maxima without problems. They all
seem to function well. But clue gets me into trouble. I have
directories foo/clx foo/pcl foo/clue and foo/clio, and both clx.mem
and pcl.mem are sitting confortable in their directories. I then say
make -f Makefile.clisp in the clue directory, and things start to
compile and load, but then screech to a halt with

*** - FIND-CLASS: WINDOW does not name a class

when compiling intrinsics.lsp. My system is SunOS 4.1.3 on a Sun
470 server, but I guess that is sort of irrelevant since I only
use what comes with clisp.

It is a known problem, with a known solution, or should I become
more specific.

--- Jan
From haible  Sat Aug 28 15:45:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA11510; Sat, 28 Aug 93 15:45:43 +0200
Date: Sat, 28 Aug 93 15:45:43 +0200
From: haible (Bruno Haible)
Message-Id: <9308281345.AA11510@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: clue problem

Jan Deleeuw <deleeuw@stat.ucla.edu> has a problem compiling CLUE:

> *** - FIND-CLASS: WINDOW does not name a class
> 
> when compiling intrinsics.lsp.

CLX can define its types using DEFSTRUCT or DEFCLASS. You won't notice a
difference when running only CLX. But CLUE requires that CLX has used
DEFCLASS. In the pcl+clx.sept92f.clisp distribution, CLX uses DEFCLASS
only if PCL is present. So you need to rebuild clx.mem, starting from
pcl.mem.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From deleeuw@stat.ucla.edu  Tue Aug 31 05:48:28 1993
Received: from julia.math.ucla.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16988; Tue, 31 Aug 93 05:48:28 +0200
Received: from laplace.stat.ucla.edu by julia.math.ucla.edu via SMTP 
	(Sendmail 5.61/1.07) id AA05336; Mon, 30 Aug 93 20:39:34 -0700
Return-Path: <deleeuw@stat.ucla.edu>
Received: by laplace.stat.ucla.edu 
	(Sendmail 4.1/1.08) id AA04493; Mon, 30 Aug 93 20:32:45 PDT
From: Jan Deleeuw <deleeuw@stat.ucla.edu>
Message-Id: <9308310332.AA04493@laplace.stat.ucla.edu>
Subject: batch mode
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Mon, 30 Aug 1993 20:32:44 -0700 (PDT)
X-Mailer: ELM [version 2.4 PL20]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 683       

+ Jan Deleeuw <deleeuw@stat.ucla.edu> has a problem compiling CLUE:
+ 
+ > *** - FIND-CLASS: WINDOW does not name a class
+ >
+ > when compiling intrinsics.lsp.
+ 
+ CLX can define its types using DEFSTRUCT or DEFCLASS. You won't notice a
+ difference when running only CLX. But CLUE requires that CLX has used
+ DEFCLASS. In the pcl+clx.sept92f.clisp distribution, CLX uses DEFCLASS
+ only if PCL is present. So you need to rebuild clx.mem, starting from
+ pcl.mem.

Sorry to be so dense, but I do build clx.mem with the Makefile.clisp
that comes with the clx distribution, and that uses clisp -M ../pcl/pcl.mem
when doing compile-clx. Isn't this "starting from pcl.mem" ?

--- Jan
From P2043742@csdvax.csd.unsw.EDU.AU  Wed Sep  1 05:58:53 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17753; Wed, 1 Sep 93 05:58:53 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H2FQ4DG6CW91WY1G@csdvax.csd.unsw.EDU.AU>; Wed,
 1 Sep 1993 13:58:32 +1000
Date: Wed, 01 Sep 1993 13:58:32 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Clisp and Garnet-2.2
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H2FQ4DJE3M91WY1G@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp Users,

I am using Garnet-2.1 on SGI and I have just realised that Garnet-2.2 is
available.

Before spending time to bild it myself (I have restricted time and disk space!)
I would like to ask some question about it.

Has anybody been able to bild it with Clisp?
Is it really 2-3 times faster then Garnet-2.1?

Thanks for your repply in advanced.

Yours,
Bela Pecsek
From rbfeens@cs.vu.nl  Wed Sep  1 10:34:01 1993
Return-Path: <rbfeens@cs.vu.nl>
Received: from top.cs.vu.nl by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18029; Wed, 1 Sep 93 10:34:01 +0200
Received: from fluit.cs.vu.nl by top.cs.vu.nl id aa07399; 1 Sep 93 10:33 MET DST
Date:     Wed, 1 Sep 93 10:33:26 MET DST
From: RB Feenstra <rbfeens@cs.vu.nl>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject:  Re:  Clisp and Garnet-2.2
Message-Id:  <9309011033.aa12364@fluit.cs.vu.nl>

Dear CLISP users,


Today I tried to compile Garnet version 2.2 beta, which, according
to its documentation, has CLISP support.
Unfortunately, when following the instructions in src/README.CLISP,
the compilation halts with a message indicating a compiler bug:

> (load "garnet-compiler.lsp")
;; Loading file garnet-compiler.lsp ...
  %%%%%%%%%%%%%%  Compiling Utils %%%%%%%%%%%%%%% 
;; Loading file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/utils-compiler.lsp ...
Compiling file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/general.lsp ...
WARNING in function PROBE-DIRECTORY-1 :
variable ARGS is not used.
Misspelled or missing IGNORE declaration?

Compilation of file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/general.lsp is finished.
0 errors, 1 warning
;; Loading file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/general.fas ...
;; Loading of file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/general.fas is finished.
;; Loading of file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/utils/utils-compiler.lsp is finished.
  %%%%%%%%%%%%%%  Compiling KR %%%%%%%%%%%%%%% 
;; Loading file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr-compiler.lsp ...
Compiling file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr-macros.lsp ...

Compilation of file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr-macros.lsp is finished.
0 errors, 0 warnings
The following functions were used but not defined:
 PRINT-THE-SCHEMA PRINT-THE-SLOT TYPE-TO-FN SCHEMA-P VALUE-FN S-VALUE-FN
 PROCESS-SLOTS CREATION-MESSAGE
;; Loading file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr-macros.fas ...
;; Loading of file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr-macros.fas is finished.
Compiling file /tmp_mnt/net/tmp/tmp/rbfeens/garnet/src/kr/kr.lsp ...
*** - Compiler bug!! Occurred in OPTIMIZE-LABEL.
1. Break> where

EVAL frame for form (COMPILE-FILE (MERGE-PATHNAMES USER::FILE USER::GARNET-KR-SRC))
1. Break> 


I'm running a CLISP with (machine-version) equal to "SUN4C",
(lisp-implementation-version) is "June 1993".
I didn't have encounter this problem with garnet 2.1.

Any suggestions of what may be wrong?

Remco Feenstra
(rbfeens@cs.vu.nl)


From haible  Wed Sep  1 16:05:32 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA22528; Wed, 1 Sep 93 16:05:32 +0200
Date: Wed, 1 Sep 93 16:05:32 +0200
From: haible (Bruno Haible)
Message-Id: <9309011405.AA22528@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: New CLISP version

There is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

It fixes the shortcomings/bugs regarding the CLOS of the previous version.
The compiler bug uncovered by Garnet 2.2 isn't fixed yet, I haven't had
time to look at it.

>From now on, CLISP will also be available via anonymous ftp from
Mark Kantrowitz' Lisp repository, host ftp.cs.cmu.edu, directory
user/ai/lang/lisp/impl/clisp/. Please save FTP bandwidth by using this
ftp server if you are in USA.

Excerpt from the change log:

Important note
--------------

* Changed bytecode format. All .fas files generated by previous CLISP versions
  are invalid and must be recompiled.

User visible changes
--------------------

* Unix version only: The command line option -M now also accepts memory images
  that were compressed using GNU gzip.

* Fixed a CLOS bug: MAKE-INSTANCE now behaves as if it were calling
  INITIALIZE-INSTANCE, and INITIALIZE-INSTANCE and REINITIALIZE-INSTANCE
  behave as if they were calling SHARED-INITIALIZE.

* Fixed a CLOS bug: NO-APPLICABLE-METHOD failed to be called in some cases
  when no method was applicable.

* Relating to X3J13 vote <89>: The first argument to the functions FUNCALL and
  APPLY, denoting a function, may now also be a list (SETF symbol).

* Fixed a bogus error message that occurred when storing an out-of-range
  integer into an array of element-type (UNSIGNED-BYTE 32).

Portability
-----------

* Added NetBSD support. Thanks to Charles Hannum.

Other modifications
-------------------

* Added Jeff Dalton's "brief CLOS guide".

* Miscellaneous documentation updates.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From P2043742@csdvax.csd.unsw.EDU.AU  Fri Sep  3 06:16:40 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25815; Fri, 3 Sep 93 06:16:40 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H2IJACZOU891X4LN@csdvax.csd.unsw.EDU.AU>; Fri,
 3 Sep 1993 14:16:01 +1000
Date: Fri, 03 Sep 1993 14:16:01 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: String to List coerceing
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H2IJAD0HS291X4LN@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp Users,

I have a seemingly trivial question I do not know the answere for.

I'd like to read a line from a file and coerce it to list.
Say, I have a file with a line:

100 1.3 4.2 5.8

I'd like the line to be converted to (100 1.3 4.2 5.8) when I read it in.

What is the simplest way to do it?

Thanks for your help in addvance.

Yours,
Bela Pecsek  
From loewenst@paul.rutgers.edu  Fri Sep  3 07:56:40 1993
Return-Path: <loewenst@paul.rutgers.edu>
Received: from paul.rutgers.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25906; Fri, 3 Sep 93 07:56:40 +0200
Received: by paul.rutgers.edu (5.59/SMI4.0/RU1.5/3.08) 
	id AA27062; Fri, 3 Sep 93 01:56:03 EDT
Date: Fri, 3 Sep 93 01:56:03 EDT
From: loewenst@paul.rutgers.edu (David Loewenstern)
Message-Id: <9309030556.AA27062@paul.rutgers.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: P2043742@csdvax.csd.unsw.edu.au
In-Reply-To: <01H2IJAD0HS291X4LN@csdvax.csd.unsw.EDU.AU> "P2043742@csdvax.csd.unsw.edu.au"
Subject: Re: String to List coerceing
Reply-To: loewenst@paul.rutgers.edu (David Loewenstern)

... On 3 Sep 93, P2043742 (whoever that is) said:
} I have a seemingly trivial question I do not know the answere for.

} I'd like to read a line from a file and coerce it to list.
} Say, I have a file with a line:

} 100 1.3 4.2 5.8

} I'd like the line to be converted to (100 1.3 4.2 5.8) when I read it in.

} What is the simplest way to do it?

} Thanks for your help in addvance.

;;;I'll ignore the question of detecting the end-of-file.

;;;If you know how many numbers are on each line:
(DEFUN Read-Into-List (filestream length)
  (LOOP repeat length collect (READ filestream)))
;;; ... it's pretty easy to do this without the LOOP macro, too.

;;;If you don't: 
(DEFUN Readline-Into-List (filestream)
  (READ-FROM-STRING (CONCATENATE 'STRING "(" (READ-LINE filestream) ")")))


These opinions are shareware.  If you like the product,
please send your $0.02 to
               David Loewenstern
<loewenst@paul.rutgers.edu>||<d.loewenstern@att.com>


From deleeuw@stat.ucla.edu  Fri Sep  3 09:00:10 1993
Received: from julia.math.ucla.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25982; Fri, 3 Sep 93 09:00:10 +0200
Received: from laplace.stat.ucla.edu by julia.math.ucla.edu 
	(Sendmail 4.1/1.07) id AA28028; Fri, 3 Sep 93 00:00:30 PDT
Return-Path: <deleeuw@stat.ucla.edu>
Received: by laplace.stat.ucla.edu 
	(Sendmail 4.1/1.08) id AA13134; Thu, 2 Sep 93 23:53:26 PDT
From: Jan Deleeuw <deleeuw@stat.ucla.edu>
Message-Id: <9309030653.AA13134@laplace.stat.ucla.edu>
Subject: batch mode
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Thu, 2 Sep 1993 23:53:25 -0700 (PDT)
X-Mailer: ELM [version 2.4 PL20]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 586       

I have the following problem (Sun Sparc Server 470, SunOS 4.1.3).
I have compiled pcl and clx from the sept92 clisp version, which
means that the clisp used to compile clx loads pcl.mem. In
the dumped clx, I can do
	> pcl::*defclass-times*
	(COMPILE LOAD EVAL)
	> xlib::*def-clx-class-use-defclass*
	(XLIB:WINDOW XLIB:DRAWABLE XLIB:PIXMAP)
Now I want to use the dumped clx, which contains pcl, to compile
clue. This fails
	; Compiling intrinsics.lsp
	Compiling file /m1/lisp/clisp/packages/xit/clue/intrinsics.lsp ...
	*** - FIND-CLASS: WINDOW does not name a class
Any ideas ?

--- Jan
From pet@prip.tuwien.ac.at  Sun Sep  5 15:36:06 1993
Return-Path: <pet@prip.tuwien.ac.at>
Received: from email.tuwien.ac.at by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00503; Sun, 5 Sep 93 15:36:06 +0200
Received: from prip5.prip.tuwien.ac.at by email.tuwien.ac.at with SMTP (PP) 
          id <15953-0@email.tuwien.ac.at>; Sun, 5 Sep 1993 15:34:56 +0200
Received: from prip9.prip.tuwien.ac.at.tuwien.ac.at 
          by prip.tuwien.ac.at (4.1/SMI-4.1) id AA00193;
          Sun, 5 Sep 93 15:35:09 +0200
Date: Sun, 5 Sep 93 15:35:09 +0200
From: pet@prip.tuwien.ac.at (Johann Petrak)
Message-Id: <9309051335.AA00193@prip.tuwien.ac.at>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Has anyone compiled the new CLISP version for OS/2 ????????
I am unable to do that myself, I don't have the disk space...

From haible  Tue Sep  7 13:13:08 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02147; Tue, 7 Sep 93 13:13:08 +0200
Date: Tue, 7 Sep 93 13:13:08 +0200
From: haible (Bruno Haible)
Message-Id: <9309071113.AA02147@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: Re: Clisp and Garnet-2.2

Remco Feenstra <rbfeens@cs.vu.nl> observed a CLISP compiler bug when trying
to compile Garnet-2.2. Here is a patch for it. After applying it, recompile
compiler.lsp and rebuild lispinit.mem as described in the README file.

*** clisp-1993-09-01/src/compiler.lsp	Sun Aug 29 22:00:23 1993
--- clisp/src/compiler.lsp	Tue Sep  7 00:56:57 1993
***************
*** 9952,9958 ****
                (optimize-part code) ; weitere mgliche Optimierung
                ; weitere mgliche Optimierungen:
                (optimize-label false-label) ; wegen verringerter Referenzen
!               (optimize-short index code) ; wegen obigem optimize-part
              )
              (FALSE
                ; Referenz auf true-label streichen
--- 9952,9958 ----
                (optimize-part code) ; weitere mgliche Optimierung
                ; weitere mgliche Optimierungen:
                (optimize-label false-label) ; wegen verringerter Referenzen
!               (optimize-short index) ; wegen obigem optimize-part
              )
              (FALSE
                ; Referenz auf true-label streichen
***************
*** 9967,9973 ****
                (optimize-part code) ; weitere mgliche Optimierung
                ; weitere mgliche Optimierungen:
                (optimize-label true-label) ; wegen verringerter Referenzen
!               (optimize-short index code) ; wegen obigem optimize-part
        ) ) ) )
        (JMP
          (let ((label (second item)))
--- 9967,9973 ----
                (optimize-part code) ; weitere mgliche Optimierung
                ; weitere mgliche Optimierungen:
                (optimize-label true-label) ; wegen verringerter Referenzen
!               (optimize-short index) ; wegen obigem optimize-part
        ) ) ) )
        (JMP
          (let ((label (second item)))


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From ckclark@MIT.EDU  Tue Sep  7 21:12:30 1993
Return-Path: <ckclark@MIT.EDU>
Received: from MIT.EDU (MIT.MIT.EDU) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03275; Tue, 7 Sep 93 21:12:30 +0200
Received: from M16-034-18.MIT.EDU by MIT.EDU with SMTP
	id AA27012; Tue, 7 Sep 93 15:09:59 EDT
Date: Tue, 7 Sep 93 15:09:59 EDT
Message-Id: <9309071909.AA27012@MIT.EDU>
From: Calvin Clark <ckclark@MIT.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: What does "No more room for LISP objects" mean?

This is probably a stupid question, but bear with me; I'm new to Common
Lisp.  Sometimes, when compiling large packages like garnet, I get the
error:

	No more room for LISP objects

and I'm not sure what this means.  What boundary am I hitting?  This
occurs even when the clisp process is not taking up a lot of memory
compared to the real memory of the system.  If this error indicates that
the process is hitting a system resource limit, which one is it?  If
not, is there some way I can modify the source so that this won't happen?

(BTW, I've only seen this error on DECstation/ULTRIX, not on Sparc/Solaris.)

A (possibly) related question: can someone explain the output of the clisp
``room'' function, which seems to be still CLtL1, since it takes no
arguments?

-Calvin
From haible  Tue Sep  7 22:07:01 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03337; Tue, 7 Sep 93 22:07:01 +0200
Date: Tue, 7 Sep 93 22:07:01 +0200
From: haible (Bruno Haible)
Message-Id: <9309072007.AA03337@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: What does "No more room for LISP objects" mean?

Calvin Clark <ckclark@MIT.EDU> asks:

>	No more room for LISP objects
> What boundary am I hitting?

Some versions of clisp allocate their memory at startup time. The amount
of memory can be specified by the -m command line option. (See the manual
page clisp.man.) When this memory is filled up, you will get the error
you described.

Other versions of clisp allocate memory dynamically. Until the OS refuses
to grant more memory to clisp. (The drawback of this strategy is that some
Unices crash when their RAM or swap space is filled up. The clisp process
will be aborted without any opportunity to save the computation's results.)

> I've only seen this error on DECstation/ULTRIX, not on Sparc/Solaris.

SunOS has a working mmap() system call, which clisp uses for its memory
allocation. This results in the dynamic strategy. On Ultrix, clisp
apparently chooses shared memory (SystemV IPC) for its memory allocation,
and there are so many limits on shared memory that a fixed memory size
is inevitable.

> can someone explain the output of the clisp ``room'' function

The first value is the number of bytes currently occupied by Lisp objects.
The second value is the number of bytes that can be allocated before the
next garbage collection occurs.

Well, this could have been explained in impnotes.txt, but I hate to bother
users with such low-level details.

> ``room'' function, which seems to be still CLtL1, since it takes no
> arguments?

Would you really prefer some more verbose ROOM function?
If you want to reduce your program's memory consumption, you should use
the TIME macro. Perhaps some more sophisticated metering facility should
be invented? - I think that the global values output by ROOM cannot give
useful hints.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From @serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de  Wed Sep  8 10:57:09 1993
Return-Path: <@serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de>
Received: from uni-kl.de (stepsun.uni-kl.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03751; Wed, 8 Sep 93 10:57:09 +0200
Received: from serv-200.dfki.uni-kl.de by stepsun.uni-kl.de id aa26288;
          8 Sep 93 10:55 MET DST
Received: from serv-300.dfki.uni-kl.de by serv-200.dfki.uni-kl.de id aa06439;
          8 Sep 93 8:55 GMT
Date:     Wed, 8 Sep 93 8:55:41 GMT
From: Bjoern Hoefling <hoefling@dfki.uni-kl.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: hoefling@dfki.uni-kl.de
Subject:  connection to tcl/tk
Organization:  DFKI, University of Kaiserslautern, Germany
Message-Id:  <9309080855.aa14487@serv-300.dfki.uni-kl.de>

Hello everybody!
I have the following problem concerning the connection between clisp and the 
tcl/tk toolkit. Tcl/tk is a GUI which I want to use to build a graphical user 
interface for a program written in clisp. Until now I have discovered 2 possibi-
lities to realize a connection between a CommonLisp and tcl/tk. The first is to
create a bidirectional stream between Lisp and the tcl/tk shell wish. 
For example in Lucid Common Lisp this can be realized in the following way:

(defun init-interface ()
  (setq *lisp-to-wish-stream*  (run-program "wish"
                                            :input :stream
                                            :output :stream
                                            :wait nil)))

After that Lisp can send messages to wish by the created stream and the output 
of wish is sent to Lisp. Unfortunately run-program does not exist in clisp and 
until now I discovered only the possibility to realize a communication via 2 
files, one for the messages from lisp to tcl and one for the way back and Lisp 
and wish must explicitly read from/write on that files.
Does anybody know a solution for clisp which is more elegant and more like the 
Lucid solution? If this problem can only be solved on the operating system 
level, I am using both clisp under Linux on a PC (486) and under Unix on Sun.
Thanks in advance for any help.

*********************************************************************
Bjoern HOEFLING, DFKI, Postfach 2080, W-67608 Kaiserslautern, Germany
hoefling@dfki.uni-kl.de   Phone: +49-631-205-3487         Fax:  -3210
*********************************************************************
From haible  Fri Sep 10 12:52:18 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06445; Fri, 10 Sep 93 12:52:18 +0200
Date: Fri, 10 Sep 93 12:52:18 +0200
From: haible (Bruno Haible)
Message-Id: <9309101052.AA06445@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: connection to tcl/tk

Bjoern Hoefling <hoefling@dfki.uni-kl.de> asks how to realize a connection
between a CommonLisp and tcl/tk.

> create a bidirectional stream between Lisp and the tcl/tk shell wish.

CLISP supports unidirectional streams to other programs through the
functions MAKE-PIPE-INPUT-STREAM and MAKE-PIPE-OUTPUT-STREAM. I haven't
implemented bidirectional streams because that could lead to deadlocks.
See impnotes.txt for details.

> I discovered only the possibility to realize a communication via 2 files,
> one for the messages from lisp to tcl and one for the way back and Lisp 
> and wish must explicitly read from/write on that files.

You may simplify this by using FIFOs (named pipes) instead of ordinary files.
Try something like that:

  (shell "mkfifo /tmp/wish-in")
  (shell "mkfifo /tmp/wish-out")
  (setq *lisp-to-wish-stream*
    (make-two-way-stream (open "/tmp/wish-out" :direction :input)
                         (open "/tmp/wish-in" :direction :output)
  ) )
  (shell "wish < /tmp/wish-in > /tmp/wish-out")
  (delete-file "/tmp/wish-in")
  (delete-file "/tmp/wish-out")

> I am using both clisp under Linux on a PC (486) and under Unix on Sun.

mkfifo is contained in the GNU file utilities.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From brent@amber.ssd.csd.harris.com  Fri Sep 10 14:04:06 1993
Return-Path: <brent@amber.ssd.csd.harris.com>
Received: from travis.csd.harris.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06835; Fri, 10 Sep 93 14:04:06 +0200
Received: from amber.ssd.csd.harris.com by travis.csd.harris.com (5.61/harris-5.1)
	id AA24425; Fri, 10 Sep 93 08:01:52 -0400
Received: by amber (5.61/CX/UX-5.0)
	id AA23702; Fri, 10 Sep 93 08:01:51 -0400
Date: Fri, 10 Sep 93 08:01:51 -0400
From: brent@amber.ssd.csd.harris.com (Brent Benson)
Message-Id: <9309101201.AA23702@amber>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: <9309101052.AA06445@ma2s2.mathematik.uni-karlsruhe.de> (haible@ma2s2.mathematik.uni-karlsruhe.de)
Subject: Re: connection to tcl/tk

# From: haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible)
# 
# CLISP supports unidirectional streams to other programs through the
# functions MAKE-PIPE-INPUT-STREAM and MAKE-PIPE-OUTPUT-STREAM. I haven't
# implemented bidirectional streams because that could lead to deadlocks.
# See impnotes.txt for details.
...
# You may simplify this by using FIFOs (named pipes) instead of ordinary files.
# Try something like that:
# 
#   (shell "mkfifo /tmp/wish-in")
#   (shell "mkfifo /tmp/wish-out")
#   (setq *lisp-to-wish-stream*
#     (make-two-way-stream (open "/tmp/wish-out" :direction :input)
#                          (open "/tmp/wish-in" :direction :output)
#   ) )
#   (shell "wish < /tmp/wish-in > /tmp/wish-out")
#   (delete-file "/tmp/wish-in")
#   (delete-file "/tmp/wish-out")
#

Why not implement MAKE-PIPE-IO-STREAM in terms of this solution and
make it part of CLISP?

From haible  Fri Sep 10 16:46:50 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00531; Fri, 10 Sep 93 16:46:50 +0200
Date: Fri, 10 Sep 93 16:46:50 +0200
From: haible (Bruno Haible)
Message-Id: <9309101446.AA00531@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2

index
From haible  Fri Sep 10 19:58:00 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01098; Fri, 10 Sep 93 19:58:00 +0200
Date: Fri, 10 Sep 93 19:58:00 +0200
From: haible (Bruno Haible)
Message-Id: <9309101758.AA01098@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: connection to tcl/tk

> Why not implement MAKE-PIPE-IO-STREAM in terms of this solution and
> make it part of CLISP?

Because it can lead to deadlocks. When process A waits for process B and
process B waits for process A to put something onto the pipe, both
processes will block.
Besides, such cycles in the data flow graph between processes can normally
be avoided. If the contents of either pipe can be determined a priori,
then use a file.

Furthermore, I can't implement it for the OS/2 version of CLISP, only for
Unix.

                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

PS: I apologize for my last `message'. The archive of this mailing list can
    be retrieved via anonymous FTP from ma2s2.mathematik.uni-karlsruhe.de,
    file /pub/lisp/clisp/mailing-list-archive, and now also by sending mail to
                listserv@ma2s2.mathematik.uni-karlsruhe.de
    including the three words "get clisp-list mailing-list-archive" as message
    body.
From haible  Mon Sep 13 10:38:11 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00502; Mon, 13 Sep 93 10:38:11 +0200
Date: Mon, 13 Sep 93 10:38:11 +0200
From: haible (Bruno Haible)
Message-Id: <9309130838.AA00502@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: New CLISP version

Some time ago, Johann Petrak <pet@prip.tuwien.ac.at> asked:

> Has anyone compiled the new CLISP version for OS/2 ????????
> I am unable to do that myself, I don't have the disk space...

Yes. It's on ma2s2:/pub/lisp/clisp/binaries/os2/clisp.zip .


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From P2043742@csdvax.csd.unsw.EDU.AU  Thu Sep 16 05:50:54 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03668; Thu, 16 Sep 93 05:50:54 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H30O51BHGW91Z394@csdvax.csd.unsw.EDU.AU>; Thu,
 16 Sep 1993 13:48:24 +1000
Date: Thu, 16 Sep 1993 13:48:24 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Problems with Garnet-2.2
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H30O51CAEQ91Z394@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp Users,

I have just built Garnet2.2 on SGI Indigo and it runs 2-3 times faster 
then version 2.1.

First I tested it with my application I am developing and everything seemed to
be just fine.

After this I saved the memory image. When I start up Garnet using this
memory image, sometimes I get the following continuable error:

** - Continuable Error 
X-Error: Asynchronous FONT-ERROR in request 2395 (last request was 2535) Code 5
6.0 [ChangeGC] ID #x2800001 
If you continue (by typing 'continue'): Ignore 
1. Break>

I got this error when I am using the saved memory image "only".(as far as I can
tell now without extensive testing)
When I start up the system loading the modules everything seemes to be OK.

The other problem is with agate. When I trying to start it up I get this:

> (agate:do-go)

*** - index too large 
1. Break>

Has anybody encountered this problaims or something is wrong with my system.

I am using Clisp that is available from the pub/lisp/clisp/binaries/sgi-irix4
and the jun 7 pcl+clx.sept92f.clisp.tar.z.

Has anyone built clisp  using the newest sources for SGI Indigo if yes please 
make the image available for me somehow because I haven't got gcc on my machine
and Clisp as far as I know can't be built using the Irix native cc compiler.
If someone built it allready please place it into
ma2s2.mathematik.uni-karlsruhe.de where I can download it from. I'd approciate
it very mutch.
 
Yours,
Bela Pecsek. 
From rbfeens@cs.vu.nl  Fri Sep 17 16:55:50 1993
Return-Path: <rbfeens@cs.vu.nl>
Received: from top.cs.vu.nl by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02151; Fri, 17 Sep 93 16:55:50 +0200
Received: from fluit.cs.vu.nl by top.cs.vu.nl id aa26107;
          17 Sep 93 16:52 MET DST
Date:     Fri, 17 Sep 93 16:51:59 MET DST
From: RB Feenstra <rbfeens@cs.vu.nl>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject:  Re:  Problems with Garnet-2.2
Message-Id:  <9309171651.aa05995@fluit.cs.vu.nl>

[Bela Pecsek describes problems (X FONT-ERROR) with garnet2.2beta & CLISP,
that occur only if a saved lisp image is restarted.]

I have encountered the same problems you described on a sun4.
I suppose the cause is that you did a plain (saveinitmem) to save your
Lisp image instead of using the special garnet functions
opal:disconnect-garnet before saving the image, and using
opal::initialize-x11-values after startup instead of the special
opal:reconnect-garnet call, which was designed for this purpose.

The Garnet 2.2 beta changes document also mentions a new call
opal:Make-Image (see section 5.12) which does all this, but
it seems that the current version doesn't support CLISP.
Adding a (saveinitmem) at the right spot in utils.lsp won't
be difficult though, but I haven't had the time to try this.
If this solves your problems, it would be convenient to merge this
fix to the main garnet source and adapt garnets README.CLISP to suggest
using this new function.


Remco Feenstra
From syali@cs.Buffalo.EDU  Mon Sep 20 01:28:30 1993
Return-Path: <syali@cs.Buffalo.EDU>
Received: from hydra.cs.Buffalo.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03581; Mon, 20 Sep 93 01:28:30 +0200
Received: by hydra.cs.Buffalo.EDU (4.1/1.01)
	id AA04374; Sun, 19 Sep 93 19:24:34 EDT
Date: Sun, 19 Sep 93 19:24:34 EDT
From: syali@cs.Buffalo.EDU (Sy Ali)
Message-Id: <9309192324.AA04374@hydra.cs.Buffalo.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: CHANGE-CLASS not implemented?


Is this not implemented in the latest version of CLISP? I can't seem to
find it, and before I go writing it want to make sure its not there.

Thanks, Sy
From P2043742@csdvax.csd.unsw.EDU.AU  Mon Sep 20 04:34:01 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03717; Mon, 20 Sep 93 04:34:01 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H366LWMYW09202JC@csdvax.csd.unsw.EDU.AU>; Mon,
 20 Sep 1993 12:31:02 +1000
Date: Mon, 20 Sep 1993 12:31:02 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Re: Problems with Garnet-2.2
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H366LWOB429202JC@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Remco,

Thanks for your fast reply to my mail.

I tried out the suggested opal:Make-Image to save the image and it works just
fine. I guess I should have tried it out before asking questions but I thought
saveinitmem should work too. (It was working with Garnet-2.1)

This function is implemented in Garnet-2.2 for Clisp too allready thanks to
Bruno.

Allthough the problem with Agate (*** - index too large) is still remained.

Thanks for your help again.

Yours,
Bela   
From haible  Mon Sep 20 16:27:24 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04684; Mon, 20 Sep 93 16:27:24 +0200
Date: Mon, 20 Sep 93 16:27:24 +0200
From: haible (Bruno Haible)
Message-Id: <9309201427.AA04684@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CHANGE-CLASS not implemented?

Sy Ali <syali@cs.Buffalo.EDU> asks:

> Is this not implemented in the latest version of CLISP?

No, I didn't implement CHANGE-CLASS. It is hardly ever used, and it violates
a fundamental property of Lisp: an object's type must be constant as time
passes.
(Would you be happy if a string could be "changed" to become a number?)

If you really need CHANGE-CLASS, you may use PCL. It's bigger and slower
than CLISP's native CLOS, but it has CHANGE-CLASS.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From syali@cs.Buffalo.EDU  Mon Sep 20 18:08:27 1993
Return-Path: <syali@cs.Buffalo.EDU>
Received: from hydra.cs.Buffalo.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04977; Mon, 20 Sep 93 18:08:27 +0200
Received: by hydra.cs.Buffalo.EDU (4.1/1.01)
	id AA11354; Mon, 20 Sep 93 12:04:24 EDT
Date: Mon, 20 Sep 93 12:04:24 EDT
From: syali@cs.Buffalo.EDU (Sy Ali)
Message-Id: <9309201604.AA11354@hydra.cs.Buffalo.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CHANGE-CLASS not implemented?

	From clisp-list@ma2s2.mathematik.uni-karlsruhe.de Mon Sep 20 10:30:32 1993
	Date: Mon, 20 Sep 93 16:27:35 +0200
	Errors-To: haible@ma2s2.mathematik.uni-karlsruhe.de
	Originator: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
	Errors-To: haible@ma2s2.mathematik.uni-karlsruhe.de
	Reply-To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
	Sender: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
	Version: 5.5 -- Copyright (c) 1991/92, Anastasios Kotsikonas
	From: haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible)
	To: Multiple recipients of list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
	Subject: Re: CHANGE-CLASS not implemented?

	Sy Ali <syali@cs.Buffalo.EDU> asks:

	> Is this not implemented in the latest version of CLISP?

	No, I didn't implement CHANGE-CLASS. It is hardly ever used, and it violates
	a fundamental property of Lisp: an object's type must be constant as time
	passes.
	(Would you be happy if a string could be "changed" to become a number?)

	If you really need CHANGE-CLASS, you may use PCL. It's bigger and slower
	than CLISP's native CLOS, but it has CHANGE-CLASS.


	                    Bruno Haible
	                    haible@ma2s2.mathematik.uni-karlsruhe.de


---

I'm familiar with all the above arguments. I'm also capable of writing
a CHANGE-CLASS of my own.

I was just wondering if this was an oversight on your part, since it is
part of the specification. It's your lisp (which I'm happy for) and you
can decide if you want to be conformant or not.

Thanks, Sy
From P2043742@csdvax.csd.unsw.EDU.AU  Tue Sep 21 09:52:28 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05825; Tue, 21 Sep 93 09:52:28 +0200
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H37S3K97409207LB@csdvax.csd.unsw.EDU.AU>; Tue,
 21 Sep 1993 15:57:20 +1000
Date: Tue, 21 Sep 1993 15:57:20 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Problem with Garnet2.2 again.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H37S3KASZ69207LB@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp users,

I am using Garnet2.2 and when I want to change a slot in a  property window I
get the following error:

*** - FUNCALL: the function GARNET-GADGETS::CONDITION is undefined
1. Break>

I think this error comes from the Careful-Eval macro where It seemes to me that
the condition system is used and Clisp does not now how to handle handler-case
and (error (condition) ....

Or am I missing something?
If this is the case has somebody changed this macro jet?
If yes please tell me how to do it.

Another problem:
I can not find the CLISP.README file for Garnet2.2!! Where is it?

Yours,
Bela. 
From haible  Tue Sep 21 14:52:08 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06440; Tue, 21 Sep 93 14:52:08 +0200
Date: Tue, 21 Sep 93 14:52:08 +0200
From: haible (Bruno Haible)
Message-Id: <9309211252.AA06440@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Problem with Garnet2.2 again.

Bela Pecsek <P2043742@csdvax.csd.unsw.EDU.AU> tests Garnet 2.2:

> *** - FUNCALL: the function GARNET-GADGETS::CONDITION is undefined
> 1. Break>
> 
> I think this error comes from the Careful-Eval macro where It seemes to me
> that the condition system is used and Clisp does not now how to handle
> handler-case

Yes. This is the problem. I am sending patches for this and some other
problems to the Garnet developers.

Anyone wants to implement the condition system (HANDLER-CASE etc.) for clisp?

> I can not find the CLISP.README file for Garnet2.2!! Where is it?

The Garnet developers are trying to make the README.CLISP obsolete.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From jasont@cs.tamu.edu  Fri Sep 24 00:14:25 1993
Return-Path: <jasont@cs.tamu.edu>
Received: from clavin (clavin.cs.tamu.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08899; Fri, 24 Sep 93 00:14:25 +0200
Received: from cs.tamu.edu (slx5.cs.tamu.edu) by clavin (AA03912); Thu, 23 Sep 93 17:07:35 CDT
Date: Thu, 23 Sep 93 17:07:35 CDT
From: jasont@cs.tamu.edu (Jason T Tobias)
Message-Id: <9309232207.AA03912@clavin>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: documentation?
X-Sun-Charset: US-ASCII


   Sorry if this is an FAQ, but is there any documentation of general commands
for CLISP?  I have the PC load of CLISP.
Thanks

-Jason
  
From reggie@muon.phys.washington.edu  Mon Sep 27 00:56:11 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16824; Mon, 27 Sep 93 00:56:11 +0100
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA18784; Sun, 26 Sep 93 16:52:38 -0700
Message-Id: <9309262352.AA18784@muon.phys.washington.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Problems compiling clisp under A/UX.
Date: Sun, 26 Sep 1993 16:52:38 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	Hi there. I am trying to compile clisp on a Mac Workgroup
Server 95 running A/UX 3.0.1. I get this error that baffles me. I will
provide the transcript. Any help would be grately appreciated. Thanks.

					Reggie
	gcc -O -W -Wswitch -Wcomment -Wpointer-arith -Wimplicit -Wreturn-type -fomit-frame-pointer -O2 -DNO_MULTIMAP_SHM -c spvw.c
spvw.d: In function `gc_compact_from_varobject_page':
spvw.d:3116: warning: `p2' may be used uninitialized in this function
spvw.d:3117: warning: `l2' may be used uninitialized in this function
spvw.d: In function `gc_compact_from_cons_page':
spvw.d:3170: warning: `p2' may be used uninitialized in this function
spvw.d:3171: warning: `l2' may be used uninitialized in this function
spvw.d: In function `gc_compact_heap':
spvw.d:3231: warning: address of register variable `pages_sorted' requested
spvw.d: In function `sigwinch_handler':
spvw.d:5278: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d: In function `interrupt_handler':
spvw.d:5293: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d: In function `alarm_handler':
spvw.d:5313: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d: In function `main':
spvw.d:6389: warning: integer overflow in expression
spvw.d:6868: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d:6911: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d:6913: warning: passing arg 2 of `signal' from incompatible pointer type
spvw.d:6293: warning: variable `argv_memneed' may be clobbered by `longjmp' or `vfork'
spvw.c:3589:"Malformed operand" -- Statement 'movel #symbol_tab_data+536875808,a4@+' ignored
spvw.c:3613:"Malformed operand" -- Statement 'movel #symbol_tab_data+536875808,a4@+' ignored
spvw.c:3731:"Malformed operand" -- Statement 'movel %sp@(188),a4@+' ignored
spvw.c:3761:"Malformed operand" -- Statement 'movel a4@-,%a0@(16)' ignored
spvw.c:4252:"Malformed operand" -- Statement 'movel %sp@(196),a4@+' ignored
spvw.c:4253:"Malformed operand" -- Statement 'movel %sp@(192),a4@+' ignored
spvw.c:4287:"Malformed operand" -- Statement 'movel a4@-,%a0@' ignored
spvw.c:4288:"Malformed operand" -- Statement 'movel a4@-,%a0@(4)' ignored
spvw.c:4307:"Malformed operand" -- Statement 'movel %sp@(192),a4@+' ignored
spvw.c:4308:"Malformed operand" -- Statement 'movel %sp@(188),a4@+' ignored
spvw.c:4338:"Malformed operand" -- Statement 'movel a4@-,%a0@' ignored
spvw.c:4339:"Malformed operand" -- Statement 'movel a4@-,%a0@(4)' ignored
spvw.c:4394:"Malformed operand" -- Statement 'movel a4@-,%d0' ignored
spvw.c:4647:"Malformed operand" -- Statement 'movel %d0,a4@+' ignored
spvw.c:5327:"Malformed operand" -- Statement 'movel %d0,a4@+' ignored
spvw.c:5333:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:10221:"Malformed operand" -- Statement 'movel %a0@(4),a4@+' ignored
spvw.c:10249:"Malformed operand" -- Statement 'movel %a6,a4@+' ignored
spvw.c:10264:"Malformed operand" -- Statement 'movel a4@-,%d0' ignored
spvw.c:11594:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:11614:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:11620:"Malformed operand" -- Statement 'movel mv_space,a4@+' ignored
spvw.c:12115:"Malformed operand" -- Statement 'movel #0,a4@+' ignored
spvw.c:12116:"Malformed operand" -- Statement 'movel #0,a4@+' ignored
spvw.c:12194:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:12221:"Malformed operand" -- Statement 'movel mv_space,a4@+' ignored
spvw.c:12227:"Malformed operand" -- Statement 'movel a4@-,%d0' ignored
spvw.c:12245:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:12267:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:12268:"Malformed operand" -- Statement 'movel #symbol_tab_data+536894816,a4@+' ignored
spvw.c:12276:"Malformed operand" -- Statement 'movel %d0,a4@+' ignored
spvw.c:12296:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored
spvw.c:12372:"Malformed operand" -- Statement 'movel object_tab+1028,a4@+' ignored
spvw.c:12400:"Malformed operand" -- Statement 'movel %d1,a4@+' ignored
Make: *** Error: Update of `spvw.o' terminated with exit code 1


-------------------
Reginald S. Perry -- University of Washington, Department of Physics FM-15
                     Seattle, Washington 98195
reggie@muon.phys.washington.edu     (General-Mail) 
reggie@u.washington.edu             (General-Mail) 
reggie@quantum.phys.washington.edu  (NeXTMail)  

From haible  Mon Sep 27 14:27:20 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17211; Mon, 27 Sep 93 14:27:20 +0100
Date: Mon, 27 Sep 93 14:27:20 +0100
From: haible (Bruno Haible)
Message-Id: <9309271327.AA17211@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

Excerpt from the change log:

User visible changes
--------------------

* COMPILE-FILE now handles top-level forms as described in CLtL2 p. 90:
  The macroexpansion of a top-level form is considered a top-level form.
  When a top-level form is a PROGN, LOCALLY, COMPILER-LET, SYMBOL-MACROLET
  or MACROLET form, the subforms of its body are considered top-level forms
  too and are compiled separately.
  This allows things like
    (PROGN (DEFCONSTANT X 3141) (DEFUN GET-X () X))
  or
    (PROGN (DEFCLASS SHIP () ()) (DEFUN SHIP-P (X) (TYPEP X 'SHIP)))
  to work.
  Warning: If you want to inhibit this splitting into separate forms (for
  example, because several of the forms refer to the same uninterned symbol),
  you have to use (LET () (PROGN ...)) instead of (PROGN ...).

* X3J13 vote <144> is implemented: New macro DECLAIM.

* X3J13 vote <113> is implemented: The macro LOCALLY is now a special form.

* Fixed a serious bug in the compiler: When compiling functions inline
  whose parameters are special variables, incorrect code could be generated.

* Fixed a bug in the compiler which caused the compiler to crash in some
  rare cases, notably when compiling Garnet-2.2.

* Fixed a bug that prevented the debugger commands DOWN and BOTTOM from
  working on Linux and SunOS.

* Fixed a CLOS bug: Specifying &KEY without &REST in generic function
  lambda lists didn't have the desired effect.

* DEFCLASS supports both :DEFAULT-INITARGS syntaxes.

* DEFGENERIC is more tolerant about invalid declarations.

Portability
-----------

* Added Dynix/ptx Sequent support. Thanks to Esther Davis.

* Added support for RS/6000 CPU and AIX. Thanks to Gabor Herr.

Other modifications
-------------------

* Made the memory allocation and (ROOM), (TIME ...) more virtual memory
  efficient (less paging on Unix and DOS). Thanks to Don Cohen.

* Added Geoffrey Gordon's "LISP tutorial".

* Renamed stdwin.lsp to stdwin2.lsp.

* Miscellaneous documentation updates.


Binaries have been rebuilt for the following architectures:
from clisp-1993-09-27:
   Linux                 928808 Sep 26 00:37 linux/clisp-english.tar.z
from clisp-1993-09-01:
   Sun4, SunOS 4        1015709 Sep 24 22:57 sun4-sunos4/clisp-english.tar.z
   Atari ST              916677 Sep 17 17:01 atari/clisp.tar.z
   OS/2                 1109019 Sep 13 11:08 os2/clisp.zip
   Sun4, Solaris 2.1    1165140 Sep  7 22:30 sun4-solaris2/clisp.tar.z


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Sep 27 15:28:46 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17372; Mon, 27 Sep 93 15:28:46 +0100
Date: Mon, 27 Sep 93 15:28:46 +0100
From: haible (Bruno Haible)
Message-Id: <9309271428.AA17372@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Problems compiling clisp under A/UX.

Reggie Perry <reggie@muon.phys.washington.edu> has trouble compiling
clisp on Apple's A/UX 3.0.1:

> I get this error that baffles me.
> spvw.c:12245:"Malformed operand" -- Statement 'movel %a0,a4@+' ignored

My speedups for clisp on 680x0 processors require GNU C and are written
in the MIT assembly language syntax of the 680x0. Apple's assembler
apparently uses another syntax (maybe the Motorola syntax). You may
- either rewrite the 680x0 __asm__ stuff to use the other syntax, or
- pretend to clisp the CPU were something like an 680x0, but not an
  680x0 proper (modify lispbibl.d for that purpose), or
- pretend to clisp the compiler were not GNU C (use "gcc -U__GNUC__"
  as compiler instead of "gcc").


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From reggie@muon.phys.washington.edu  Mon Sep 27 19:33:15 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17924; Mon, 27 Sep 93 19:33:15 +0100
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA21839; Mon, 27 Sep 93 11:29:27 -0700
Message-Id: <9309271829.AA21839@muon.phys.washington.edu>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: Problems compiling clisp under A/UX. 
In-Reply-To: Your message of "Mon, 27 Sep 1993 15:30:35 BST."
             <9309271428.AA17372@ma2s2.mathematik.uni-karlsruhe.de> 
Date: Mon, 27 Sep 1993 11:29:26 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	Thanks for the fix. Now for the next problem :-)

I had this happen:

        gcc -O -U__GNUC__ -W -Wswitch -Wcomment -Wpointer-arith -Wimplicit -Wreturn-type -fomit-frame-pointer -O2 -c lisparit0.c
lisparit0.d:1663: ari68020.c: No such file or directory
Make: *** Error: Update of `lisparit0.o' terminated with exit code 1
Make:            [line 789 in /root/src/clisp-1993-09-27/aux/makefile]


I did this:

 ./comment5 ../src/ari68020.mot.d | ./ansidecl > ari68020.d


and then this happened:

        gcc -O -U__GNUC__ -W -Wswitch -Wcomment -Wpointer-arith -Wimplicit -Wreturn-type -fomit-frame-pointer -O2  -L. spvw.o  spvwtabf.o  spvwtabs.o  spvwtabo.o  eval.o  control.o  pathname.o  stream.o  socket.o  io.o  array.o  hashtabl.o list.o  package.o  record.o  sequence.o  charstrg.o  debug.o  misc.o  predtype.o  symbol.o  lisparit0.o  stdwin.o  graph.o  unixaux.o -lreadline  -ltermcap -L/usr/lib -lX11 -o lisp.run
ld warning: Multiply defined symbol PC, in /lib/libtermcap.a, has more than onesize
undefined               first referenced
 symbol                     in file
pttob                           spvw.o
tcgetattr                       stream.o
mulu32_                         array.o
copy_loop_up                    lisparit0.o
copy_loop_down                  lisparit0.o
fill_loop_down                  lisparit0.o
or_loop_up                      lisparit0.o
xor_loop_up                     lisparit0.o
and_loop_up                     lisparit0.o
eqv_loop_up                     lisparit0.o
nand_loop_up                    lisparit0.o
nor_loop_up                     lisparit0.o
andc2_loop_up                   lisparit0.o
orc2_loop_up                    lisparit0.o
not_loop_up                     lisparit0.o
and_test_loop_up                lisparit0.o
clear_loop_down                 lisparit0.o
shift1left_loop_down            lisparit0.o
shiftleft_loop_down             lisparit0.o
shift1right_loop_up             lisparit0.o
shiftrightsigned_loo            lisparit0.o
test_loop_up                    lisparit0.o
addto_loop_down                 lisparit0.o
neg_loop_down                   lisparit0.o
subfrom_loop_down               lisparit0.o
compare_loop_up                 lisparit0.o
shiftrightcopy_loop_            lisparit0.o
clear_loop_up                   lisparit0.o
mulu_loop_down                  lisparit0.o
muluadd_loop_down               lisparit0.o
add_loop_down                   lisparit0.o
dec_loop_down                   lisparit0.o
inc_loop_down                   lisparit0.o
divucopy_loop_up                lisparit0.o
shiftleftcopy_loop_d            lisparit0.o
divu_6432_3232_                 lisparit0.o
mulusub_loop_down               lisparit0.o
shiftright_loop_up              lisparit0.o
sub_loop_down                   lisparit0.o
divu_loop_up                    lisparit0.o
mulusmall_loop_down             lisparit0.o
subx_loop_down                  lisparit0.o
fill_loop_up                    lisparit0.o
tcsetattr                       unixaux.o
tcdrain                         unixaux.o
tcflush                         unixaux.o
ld fatal: Symbol referencing errors. No output written to lisp.run
collect: ld returned 13 exit status


	What little thing am I missing?


					Reggie

-------------------
Reginald S. Perry -- University of Washington, Department of Physics FM-15
                     Seattle, Washington 98195
reggie@muon.phys.washington.edu     (General-Mail) 
reggie@u.washington.edu             (General-Mail) 
reggie@quantum.phys.washington.edu  (NeXTMail)  

From johnm@netcom.com  Tue Oct  5 23:53:12 1993
Return-Path: <johnm@netcom.com>
Received: from netcom.netcom.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA29583; Tue, 5 Oct 93 23:53:12 +0100
Received: by netcom.netcom.com (5.65/SMI-4.1/Netcom)
	id AA14616; Tue, 5 Oct 93 15:53:17 -0700
Date: Tue, 5 Oct 93 15:53:17 -0700
From: johnm@netcom.com (J_Gerard Malecki)
Message-Id: <9310052253.AA14616@netcom.netcom.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

get CLISP-LIST mailing-list-archive
From puolamak@cc.helsinki.fi  Wed Oct  6 13:23:59 1993
Return-Path: <puolamak@cc.helsinki.fi>
Received: from kruuna.helsinki.fi by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00125; Wed, 6 Oct 93 13:23:59 +0100
Received: from klaava.Helsinki.FI by kruuna.helsinki.fi with SMTP id AA27923
  (5.65c8/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Wed, 6 Oct 1993 14:22:54 +0200
Received: by klaava.Helsinki.FI (4.1/SMI-4.1)
	id AA07423; Wed, 6 Oct 93 14:02:22 +0200
From: puolamak@cc.helsinki.fi (Kai Rainer Puolamaki)
Message-Id: <9310061202.AA07423@klaava.Helsinki.FI>
Subject: Re: your mail
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Wed, 6 Oct 1993 14:02:21 +0200 (EET)
In-Reply-To: <9310052253.AA14616@netcom.netcom.com> from "J_Gerard Malecki" at Oct 5, 93 11:55:37 pm
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 38        


get CLISP-LIST mailing-list-archive

From puolamak@cc.helsinki.fi  Tue Oct 12 09:36:36 1993
Return-Path: <puolamak@cc.helsinki.fi>
Received: from kruuna.helsinki.fi by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06844; Tue, 12 Oct 93 09:36:36 +0100
Received: from klaava.Helsinki.FI by kruuna.helsinki.fi with SMTP id AA01870
  (5.65c8/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Tue, 12 Oct 1993 10:34:38 +0200
Received: by klaava.Helsinki.FI (4.1/SMI-4.1)
	id AA23881; Tue, 12 Oct 93 10:34:37 +0200
From: puolamak@cc.helsinki.fi (Kai Rainer Puolamaki)
Message-Id: <9310120834.AA23881@klaava.Helsinki.FI>
Subject: get clisp-list archieve
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Tue, 12 Oct 1993 10:34:36 +0200 (EET)
In-Reply-To: <9310052253.AA14616@netcom.netcom.com> from "J_Gerard Malecki" at Oct 5, 93 11:55:37 pm
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 37        

get CLISP-LIST mailing-list-archive

From @serv-200.dfki.uni-kl.de:elsbernd@dfki.uni-kl.de  Tue Oct 12 10:23:09 1993
Return-Path: <@serv-200.dfki.uni-kl.de:elsbernd@dfki.uni-kl.de>
Received: from uni-kl.de (stepsun.uni-kl.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07028; Tue, 12 Oct 93 10:23:09 +0100
Received: from serv-200.dfki.uni-kl.de by stepsun.uni-kl.de id aa17500;
          12 Oct 93 10:21 MET
Received: from isg-200.dfki.uni-kl.de by serv-200.dfki.uni-kl.de id aa15070;
          12 Oct 93 9:21 GMT
Date:     Tue, 12 Oct 93 9:21:43 GMT
From: Klaus Elsbernd <elsbernd@dfki.uni-kl.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject:  get CLISP-LIST mailing-list-archive
Organization:  German Research Center for AI (DFKI)
Message-Id:  <9310120921.aa20878@isg-200.dfki.uni-kl.de>

From tom@jsk.t.u-tokyo.ac.jp  Tue Oct 12 11:50:30 1993
Received: from monoceros (jsk.t.u-tokyo.ac.jp) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07278; Tue, 12 Oct 93 11:50:30 +0100
Received: from aquila.jsk.t.u-tokyo.ac.jp by monoceros (4.1/6.4J.6-MX)
	id AA06214; Tue, 12 Oct 93 19:48:56 JST
Received: by aquila.jsk.t.u-tokyo.ac.jp (4.1/6.4J.6-MX)
	id AA00294; Tue, 12 Oct 93 19:51:06 JST
Date: Tue, 12 Oct 93 19:51:06 JST
From: tom@jsk.t.u-tokyo.ac.jp (Tomohiro Shibata)
Return-Path: <tom@jsk.t.u-tokyo.ac.jp>
Message-Id: <9310121051.AA00294@aquila.jsk.t.u-tokyo.ac.jp>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Q:Xit and usage of make-socket-stream

Hello everyone!
  I am new to this mailing list and now trying to install
clue+clio+xit on clisp into SparcIPX. It seems to have succeeded making
clx because demo worked correctly. But below message logged while makeing
clue.
----------- begin -------------
clisp -m 5MB -M ../clx/clx.mem -q -i defsystem -x '(compile-clue)'
;; Loading file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/defsystem.fas ...
;; Loading of file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/defsystem.fas is finished.
; Loading   clue.fas
; Loading   clx-patch.fas
; Loading   window-doc.fas
; Loading   event-parse.fas
; Loading   defcontact.fas
; Compiling intrinsics.lsp
Compiling file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/intrinsics.lsp ...
*** - FIND-CLASS: WINDOW does not name a class
touch stamp-fas
rm clue.mem
rm: override protection 644 for clue.mem? y
clisp -m 5MB -M ../clx/clx.mem -q -i defsystem -x '(load-clue) (saveinitmem)'
;; Loading file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/defsystem.fas ...
;; Loading of file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/defsystem.fas is finished.
; Loading   clue.fas
; Loading   clx-patch.fas
; Loading   window-doc.fas
; Loading   event-parse.fas
; Loading   defcontact.fas
; Loading   intrinsics.fas
*** - UNIX error 13 (EACCES): Permission denied
2721264 ;
1360632
mv lispinit.mem clue.mem
---------end------------------

  I don't know what above error is. Produced binary is 2.8MB which is
almost same as clx. Please tell me what I should do.

  There is another question. I found SYSTEM function MAKE-SOCKET-STREM,
but couldn't find its usage. Please tell me any information, or does
anyone has programmed a function which return two-way-stream between
clisp and forked executable program?

  Thanks in advance.

p.s. I receive mail which contents is "get CLISP-LISP
     mailing-list-archive" many times. I'm sure to have get it by ftp.
     Why those mail come frequently?

--------------------------------
Tomohiro Shibata (email: tom@jsk.t.u-tokyo.ac.jp)
Inoue-Inaba Laboratory,
Department of Mechano-informatics,
University of Tokyo; Japan
From jbishop@babel.ling.nwu.edu  Tue Oct 12 13:53:10 1993
Received: from relay.acns.nwu.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07524; Tue, 12 Oct 93 13:53:10 +0100
Received: from babel.ling.nwu.edu by relay.acns.nwu.edu (4.1/SMI-ACNS-relay-1.7)
	id AA15126; Tue, 12 Oct 93 07:51:45 CDT
Return-Path: <jbishop@babel.ling.nwu.edu>
Received: by babel.ling.nwu.edu (4.1/SMI-4.0)
	id AA10140; Tue, 12 Oct 93 07:51:23 CDT
Date: Tue, 12 Oct 1993 07:50:55 -0500 (CDT)
From: Jeff Bishop <jbishop@nwu.edu>
Sender: Jeff Bishop <jbishop@nwu.edu>
Reply-To: Jeff Bishop <jbishop@nwu.edu>
Subject: "get" messages
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9310121051.AA00294@aquila.jsk.t.u-tokyo.ac.jp>
Message-Id: <Pine.3.85.9310120734.E10118-0100000@babel.ling.nwu.edu>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII

I have also received numerous "get ..." messages.  Apparently, some 
users are mistaking the clisp-list address for a file server.  I don't 
know if there is an email address which supports "get" but everything can 
be received by anonymous ftp from what I can tell.

Jeff Bishop
jbishop@nwu.edu




From haible  Tue Oct 12 16:10:43 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07821; Tue, 12 Oct 93 16:10:43 +0100
Date: Tue, 12 Oct 93 16:10:43 +0100
From: haible (Bruno Haible)
Message-Id: <9310121510.AA07821@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Q:Xit and usage of make-socket-stream

Mr Tomohiro Shibata has problems when compiling CLUE:

> ; Compiling intrinsics.lsp
> Compiling file /home/monoceros/tshibata/Softs/clisp/packages/clue+clio+xit/clue/intrinsics.lsp ...
> *** - FIND-CLASS: WINDOW does not name a class

Mr Jan Deleeuw had the same problem. It may come from the buggy top-level
form handling in CLISP versions older than 1993-09-27. Please try getting
that newest CLISP version.

> Produced binary is 2.8MB which is almost same as clx.

Note also that you should be able to use CLISP's native CLOS instead of PCL
when building CLX for CLUE. The resulting memory image will be much smaller.

> I found SYSTEM function MAKE-SOCKET-STREAM, but couldn't find its usage.

It is the low-level function for building the connection to the X server.
See clx/dependent.lsp for its usage.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

PS: Send administrative request such as "get clisp-list mailing-list-archive"
    or "unsubscribe clisp-list" to listserv@ma2s2.mathematik.uni-karlsruhe.de
                                   ^^^^^^^^
From deleeuw@math.ucla.edu  Tue Oct 12 19:52:41 1993
Received: from julia.math.ucla.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA08430; Tue, 12 Oct 93 19:52:41 +0100
Received: from sonia.math.ucla.edu by julia.math.ucla.edu 
	(Sendmail 4.1/1.07) id AA23757; Tue, 12 Oct 93 11:52:34 PDT
Return-Path: <deleeuw@math.ucla.edu>
Received: by sonia.math.ucla.edu 
	(Sendmail 4.1/1.07) id AA00313; Tue, 12 Oct 93 11:52:33 PDT
From: Jan Deleeuw <deleeuw@math.ucla.edu>
Message-Id: <9310121852.AA00313@sonia.math.ucla.edu>
Subject: clue
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Tue, 12 Oct 1993 11:52:33 -0700 (PDT)
X-Mailer: ELM [version 2.4 PL22]
Content-Type: text
Content-Length: 736       

The intrinsics.lsp compiling error in building CLUE is not due to the
version of clisp. It also happens with the newest version. I shall try
to go through the native CLOS next.
......
I have tried. Better, but no cigar. I now get

; Compiling ./intrinsics.lsp
Compiling file /m1/lisp/clisp/packages/clue/intrinsics.lsp ...
*** - DEFCLASS BASIC-CONTACT: superclass #<STRUCTURE-CLASS WINDOW> should
belong
 to class STANDARD-CLASS

This seems to be the same problem in a slightly different form. 

--- Jan
-- 
Jan de Leeuw; UCLA Statistics; phone (310)-825-9550; fax (310)-206-6673      
mail: 405 Hilgard Ave, Los Angeles, CA 90024-1555
home: 130 Vista Place, Venice, CA 90291-3224; phone (310)-396-3171
INTERNET: deleeuw@stat.ucla.edu 
From tom@jsk.t.u-tokyo.ac.jp  Wed Oct 13 13:50:51 1993
Received: from monoceros (jsk.t.u-tokyo.ac.jp) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA09323; Wed, 13 Oct 93 13:50:51 +0100
Received: from delphinus (delphinus.jsk.t.u-tokyo.ac.jp) by monoceros (4.1/6.4J.6-MX)
	id AA19155; Wed, 13 Oct 93 21:49:13 JST
Received: by delphinus (4.1/6.4J.6-MX)
	id AA03198; Wed, 13 Oct 93 21:49:14 JST
Date: Wed, 13 Oct 93 21:49:14 JST
From: tom@jsk.t.u-tokyo.ac.jp (Tomohiro Shibata)
Return-Path: <tom@jsk.t.u-tokyo.ac.jp>
Message-Id: <9310131249.AA03198@delphinus>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: Bruno Haible's message of Tue, 12 Oct 93 16:13:19 +0100 <9310121510.AA07821@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: Q:Xit and usage of make-socket-stream

   >>> ; Compiling intrinsics.lsp
   >>> Compiling file /home/monoceros/tshibata/Softs/clisp/packages/clue\
   >>>clio+xit/clue/intrinsics.lsp ...
   >>> *** - FIND-CLASS: WINDOW does not name a class
   >>
   >>Mr Jan Deleeuw had the same problem. It may come from the buggy top-level
   >>form handling in CLISP versions older than 1993-09-27. Please try getting
   >>that newest CLISP version.

  OK, I got newest CLISP version by ftp and made it. Then, I decoded
'pcl+clx.sept92f.clisp.tar.z' to make pcl and clx. It seemed to be
succeed making them. But after all the same error occured when making
CLUE which source is clisp/packages/clue.clisp.tar.z or
clisp/packages/clue+clio+xit.clisp.tar.z

  Is there anyone out who could succeed making clue+clio+xit on Sun4?

   >>> I found SYSTEM function MAKE-SOCKET-STREAM, but couldn't find its usage.
   >>It is the low-level function for building the connection to the X server.
   >>See clx/dependent.lsp for its usage.

  I believe provided MAKE-SOCKET-STREAM is only for connetion with X.
I want a function which is :
   >>>but couldn't find its usage. Please tell me any information, or does
   >>>anyone has programmed a function which return two-way-stream between
   >>>clisp and forked executable program?

   Should I implement it by remake?

p.s. Should I mail it only to Mr. Haible like this case(issues of
making binaries)?
--------------------------------
Tomohiro Shibata (email: tom@jsk.t.u-tokyo.ac.jp)
Inoue-Inaba Laboratory,
Department of Mechano-informatics,
University of Tokyo; Japan
From vargasje@charlie.ece.scarolina.edu  Wed Oct 13 15:18:25 1993
Return-Path: <vargasje@charlie.ece.scarolina.edu>
Received: from woodstock.ece.scarolina.edu ([129.252.22.23]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA09466; Wed, 13 Oct 93 15:18:25 +0100
Received: by woodstock.ece.scarolina.edu (5.65/DEC-Ultrix/4.3)
	id AA06420; Wed, 13 Oct 1993 10:16:46 -0400
Date: Wed, 13 Oct 1993 10:16:46 -0400
From: vargasje@charlie.ece.scarolina.edu (Dr J. E. Vargas)
Message-Id: <9310131416.AA06420@woodstock.ece.scarolina.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Q:Xit and usage of make-socket-stream


I am trying to build CLX on top of CLISP, on a DECstation 3100.  First I tried the
make clx, but CLISP is invoked and nothing happens.  Then I started clisp, loaded
defsystem.lsp, and then give the command (compile-clx), which so far runs fine, but 
since this is not what the README file says I am supposed to do, I wonder if, at the
end, I will get some error.

So the question is:  Is the Makefile in the .../clx directory (from clx-for-clisp.tar)
wrong?  I am doing the right thing bypassing it?

	vargasje@ece.scarolina.edu

From haible  Wed Oct 13 18:45:07 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13883; Wed, 13 Oct 93 18:45:07 +0100
Date: Wed, 13 Oct 93 18:45:07 +0100
From: haible (Bruno Haible)
Message-Id: <9310131745.AA13883@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Building CLX

> Is the Makefile in the .../clx directory (from clx-for-clisp.tar)
> wrong?  I am doing the right thing bypassing it?

Instead of using the CLX makefile you can as well do each of these steps:

	clisp -q -c defsystem
	clisp -m 4MB -q -i defsystem
	> (compile-clx)
	clisp -m 4MB -q -i defsystem
	> (load-clx "" :macrosp t)
	> (saveinitmem)
	mv lispinit.mem clx.mem

Works as well.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From tom@jsk.t.u-tokyo.ac.jp  Thu Oct 14 14:16:27 1993
Received: from monoceros (jsk.t.u-tokyo.ac.jp) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA14883; Thu, 14 Oct 93 14:16:27 +0100
Received: from aquila.jsk.t.u-tokyo.ac.jp by monoceros (4.1/6.4J.6-MX)
	id AA28750; Thu, 14 Oct 93 22:14:32 JST
Received: by aquila.jsk.t.u-tokyo.ac.jp (4.1/6.4J.6-MX)
	id AA00869; Thu, 14 Oct 93 22:16:47 JST
Date: Thu, 14 Oct 93 22:16:47 JST
From: tom@jsk.t.u-tokyo.ac.jp (Tomohiro Shibata)
Return-Path: <tom@jsk.t.u-tokyo.ac.jp>
Message-Id: <9310141316.AA00869@aquila.jsk.t.u-tokyo.ac.jp>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: Bruno Haible's message of Fri, 10 Sep 93 12:52:18 +0200 <9309101052.AA06445@ma2s2.mathematik.uni-karlsruhe.de>
Subject: mkfifo

Hello.
  There has been some discuttion on the mailing list on how to make
bidirectional communication between clisp and other programs using Unix.

  below is one solutoin provided by Mr. Haible.
   >>  (shell "mkfifo /tmp/wish-in")
   >>  (shell "mkfifo /tmp/wish-out")
   >>  (setq *lisp-to-wish-stream*
   >>	 (make-two-way-stream (open "/tmp/wish-out" :direction :input)
   >>			      (open "/tmp/wish-in" :direction :output)
   >>  ) )
   >>  (shell "wish < /tmp/wish-in > /tmp/wish-out")
   >>  (delete-file "/tmp/wish-in")
   >>  (delete-file "/tmp/wish-out")

  As for my check, it doesn't work as they are seen above.
when (open pipename-out :direction :input) is entered, prompt never comes.
But (open pipename-in :direction :output) is entered, I can get #<FILE-HANDLE-STREAM #"out">.
  I think only it can work in case of `:direction :io '. And I tried:
	   >>  (shell "command < pipename-in > pipename-out") ,
but I couln't succeed. Has Mr. Hoefling already succeeded to connect
with WISH?

  Any suggestion and information are welcome.

--------------------------------
Tomohiro Shibata (email: tom@jsk.t.u-tokyo.ac.jp)
Inoue-Inaba Laboratory,
Department of Mechano-informatics,
University of Tokyo; Japan
From matthias@intellektik.informatik.th-darmstadt.de  Thu Oct 14 14:43:10 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15011; Thu, 14 Oct 93 14:43:10 +0100
Received: from aida.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA16216
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Thu, 14 Oct 1993 14:41:26 +0100
Received: by aida.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA20042; Thu, 14 Oct 93 14:41:21 +0100
Date: Thu, 14 Oct 93 14:41:21 +0100
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9310141341.AA20042@aida.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  mkfifo

hi,

I don't know, if my solution to the problem ist the most elegant one, but
anyway - it works (at least for me ;):

(defun RUN-PROGRAM (prog &key
                         arguments
                         input
                         output
                         (if-output-exists :overwrite)
                         (wait             t))
  (let* ((outf  (cond ((stringp output) output)
                      ((pathnamep output) (namestring output))
                      ((eq :stream  output)
                       (do ((pn (symbol-name (gensym "/tmp/clrpO"))
                                (symbol-name (gensym "/tmp/clrpO"))))
                           ((null (probe-file pn))
                            (unless (zerop (shell (format NIL "~A ~A"
                                                          *mkfifo-prog* pn)))
                              (error "Can't create fifo - sorry!"))
                            pn)))
                      (T NIL)))
         (inf   (cond ((or (stringp input) (pathnamep input)) input)
                      ((eq :stream  input)
                       (do ((pn (symbol-name (gensym "/tmp/clrpI"))
                                (symbol-name (gensym "/tmp/clrpI"))))
                           ((null (probe-file pn))
                            (unless (zerop (shell (format NIL "~A ~A"
                                                          *mkfifo-prog* pn)))
                              (error "Can't create fifo - sorry!"))
                            (open pn
                                  :direction :output
                                  :if-exists :overwrite))))
                      (T NIL)))
         (cmd   (format NIL "~A~{ ~A~}~@[ < ~A~]~@[ ~A~] 2>&1 ~@[ &~]"
                        prog arguments (and inf (namestring inf))
                        (and outf
                             (format
                              NIL "~A ~A"
                              (case if-output-exists
                                (:append ">> ")
                                (:overwrite "> ")
                                (:error
                                 (when (probe-file outf)
                                   (error "Outfile ~A exists!" outf))
                                 "> ")
                                (otherwise
                                 (error
                                  "Strange if-output-exists spec ~A"
                                  if-output-exists)))
                              outf))
                        (or (not wait)
                            (eq :stream input)
                            (eq :stream output))))
         (res  (shell (format NIL "exec /bin/sh -c ~S" cmd))))
    (cond ((and (eq :stream input) (eq :stream output))
           (let ((outs (open outf :direction :input)))
             (values (make-two-way-stream outs inf) outs inf)))
          ((eq :stream input)
           inf)
          ((eq :stream output)
           (open outf :direction :input))
          (T res))))


(defun START-WISH (&key (wish *wish-prog*) (arguments NIL))
  (multiple-value-setq (*wish* *wish-i-stream* *wish-o-stream*)
    (run-program wish
                 :arguments arguments
                 :input     :stream
                 :output    :stream
                 :wait      NIL)))


START-WISH returns a two way stream, that may be used to read from and write to
the wish process. However, you should never try to use "read" or "read-line"
on this stream, but use your own reader, that is implemented in terms of
read-char-no-hang and/or listen. Also remember to use "flush output" on the 
wish-side, after every output-operation, or you will not see anything on the
lisp-stream (until the io-buffer gets filled).

Have fun

--Matthias

------------------------------------------------------------------------------
Matthias Lindner
FG Intellektik, FB Informatik
Technische Hochschule Darmstadt
Alexanderstr.10, D-64283 Darmstadt
TEL: +49 6151 166651
FAX: +49 6151 165326
NET: matthias@intellektik.informatik.th-darmstadt.de
------------------------------------------------------------------------------
From @serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de  Thu Oct 14 16:48:55 1993
Return-Path: <@serv-200.dfki.uni-kl.de:hoefling@dfki.uni-kl.de>
Received: from uni-kl.de (stepsun.uni-kl.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15319; Thu, 14 Oct 93 16:48:55 +0100
Received: from serv-200.dfki.uni-kl.de by stepsun.uni-kl.de id aa28395;
          14 Oct 93 16:47 MET
Received: from serv-300.dfki.uni-kl.de by serv-200.dfki.uni-kl.de id aa01663;
          14 Oct 93 15:47 GMT
Received: from ws-302.dfki.uni-kl.de by serv-300.dfki.uni-kl.de id aa16165;
          14 Oct 93 15:47 GMT
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: hoefling@dfki.uni-kl.de
Subject: Re: mkfifo
Date: Thu, 14 Oct 1993 16:46:59 +0100
From: Bjoern Hoefling <hoefling@dfki.uni-kl.de>
Message-Id:  <9310141547.aa16165@serv-300.dfki.uni-kl.de>


Tomohiro Shibata wrote:

>  There has been some discuttion on the mailing list on how to make
> bidirectional communication between clisp and other programs using Unix.
> below is one solutoin provided by Mr. Haible.
   >>  (shell "mkfifo /tmp/wish-in")
   >>  (shell "mkfifo /tmp/wish-out")
   >>  (setq *lisp-to-wish-stream*
   >>	 (make-two-way-stream (open "/tmp/wish-out" :direction :input)
   >>			      (open "/tmp/wish-in" :direction :output)
   >>  ) )
   >>  (shell "wish < /tmp/wish-in > /tmp/wish-out")
   >>  (delete-file "/tmp/wish-in")
   >>  (delete-file "/tmp/wish-out")
>
>  As for my check, it doesn't work as they are seen above.
> when (open pipename-out :direction :input) is entered, prompt never comes.
> But (open pipename-in :direction :output) is entered, I can get 
> #<FILE-HANDLE-STREAM #"out">.
> I think only it can work in case of `:direction :io '. And I tried:
	   >>  (shell "command < pipename-in > pipename-out") ,
> but I couln't succeed. Has Mr. Hoefling already succeeded to connect
> with WISH?
> Any suggestion and information are welcome.

As I am directly adressed, here my response. In my masters thesis I am using 
clisp under linux and UNIX (Sun). The graphical user interface for my program
is written in tcl/tk by another student and he has tried to explain his solution
for the problem for you. His solution is rather special and is realized mostly 
in tcl and not in clisp, but it could be done in a similar way in C with another
UNIX-process.
Here is his solution:
________________________________________________________________________________

My solution works completely the other way round:
I don't call wish from within lisp, but start the lisp interpreter from
within the wish. I think this is more useful because normally i want to evaluate
lisp functions in response to tk events.
I need the "addinput patch" which is available at harbor.ecn.purdue.edu.

The following code works with tcl7.0/tk3.3 and a widget shell with the appropriate patch applied.

# the proc ChildProcess forks a new process from exec file cmd
# and sets it's stdio to inPipe/outPipe

proc ChildProcess {cmd inPipe outPipe } {
    if {[set childPid [fork]] == 0} {
	   # overwrite stdin with inPipe
           dup $inPipe stdin
           # close the inPipe at the lisp side
           close $inPipe
	   # do the same with stdout/stderr
           dup $outPipe stdout
           dup $outPipe stderr
           close $outPipe
           # disconnect process from terminal (useful for signal handling)
           id process group set
           # run cmd (lisp,shell, or whatever)
           execl $cmd
           # will never make it here...
       }
    return $childPid
}

# create fifo (named pipe)
# set your path to the mknod binary here!
proc mkfifo name {
#  set mknod /bin/mknod # linux
  set mknod /usr/etc/mknod # sun
   catch { exec $mknod $name p } msg
   if { "$msg" != "" } { puts stderr $msg }
}

# send lisp command to lisp interp.
proc to-lisp {cmd} {
    global tclOutPipe
    puts $tclOutPipe $cmd
    flush $tclOutPipe
}

# signal handler
proc quitCmd  { } {
    global tclOutPipe tclInPipe tclDataInPipe
    catch {
        to-lisp "(quit)"
        removeinput $tclInPipe
        removeinput $tclDataInPipe
        close $tclOutPipe
        close $tclInPipe
        close $tclDataInPipe
        unlink [format "/tmp/wishin-%d" [pid] ]
    }
    destroy .
}

# handlers for receiving input from one of the pipes
# the catch is needed for suns where i get some strange error message
proc process-toplevel {event fileid} {
    catch {
        if { [gets $fileid line] < 0 } {
            quitCmd
        } else { 
		echo toplevel: $line
        }
    }
}

proc process-data {event fileid} {
    catch {
        if { [lgets $fileid line] < 0 } {
            quitCmd
        } else { 
		echo data: $line
        }
    } msg
    if { "$msg" != "" } { puts stderr $msg }
}

# main program:
# first i create two pipes for communication to/from lisp *terminal-io*.

    pipe lispInPipe tclOutPipe
    pipe tclInPipe lispOutPipe 

# next i create a named pipe for data communication lisp -> wish (i want to read lisp data
# from within tcl)
    set pipename [format "/tmp/wishin-%d" [pid] ]
    mkfifo $pipename
# the named pipe MUST be opened non-blocking, because otherwise it will hang
# until the other side is opened (see unix manual) 
    set tclDataInPipe [open $pipename {RDONLY NONBLOCK} ]
# sorry, but i don't know if this is really necessary - at least it doesn't cause harm ....
    fcntl $tclInPipe NONBLOCK 1
    fcntl $tclDataInPipe NONBLOCK 0
# install addinput handlers
    addinput -read $tclInPipe "process-toplevel %E %F"
    addinput -read $tclDataInPipe "process-data %E %F"
# fork off clisp

    ChildProcess clisp $lispInPipe $lispOutPipe
# set signal handler so that clisp gets terminated when you kill wish
    signal trap { SIGTERM SIGQUIT SIGINT } quitCmd

________________________________________________________________________________

I hope this answer helps at least those who use the combination wish/clisp.

*********************************************************************
Bjoern HOEFLING, DFKI, Postfach 2080, W-67608 Kaiserslautern, Germany
hoefling@dfki.uni-kl.de   Phone: +49-631-205-3487         Fax:  -3210
*********************************************************************
From tom@jsk.t.u-tokyo.ac.jp  Fri Oct 15 03:19:07 1993
Received: from monoceros (jsk.t.u-tokyo.ac.jp) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16027; Fri, 15 Oct 93 03:19:07 +0100
Received: from lupus.jsk.t.u-tokyo.ac.jp by monoceros (4.1/6.4J.6-MX)
	id AA01115; Fri, 15 Oct 93 11:17:06 JST
Received: by lupus.jsk.t.u-tokyo.ac.jp (4.1/6.4J.6-MX)
	id AA00353; Fri, 15 Oct 93 11:19:21 JST
Date: Fri, 15 Oct 93 11:19:21 JST
From: tom@jsk.t.u-tokyo.ac.jp (Tomohiro Shibata)
Return-Path: <tom@jsk.t.u-tokyo.ac.jp>
Message-Id: <9310150219.AA00353@lupus.jsk.t.u-tokyo.ac.jp>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: Matthias Lindner's message of Thu, 14 Oct 93 14:45:52 +0100 <9310141341.AA20042@aida.intellektik.informatik.th-darmstadt.de>
Subject: Re: mkfifo

Mr. Matthias wrote:
   >>I don't know, if my solution to the problem ist the most elegant one, but
   >>anyway - it works (at least for me ;):
   >>START-WISH returns a two way stream, that may be used to read from
   >>and write to
   >>the wish process. However, you should never try to use "read" or
   >>"read-line"
   >>on this stream, but use your own reader, that is implemented in terms of
   >>read-char-no-hang and/or listen. Also remember to use "flush output" on
   >>the wish-side, after every output-operation, or you will not see
   >>anything on the lisp-stream (until the io-buffer gets filled).
   >>
   >>Have fun
   >>--Matthias

  Thank you for your answer and your careful notes!
At last I could succeed inter proccess communicating(of course I don't
mention about IPC :-).
  I also thank you Mr. Haible and Mr. Hoefling for your quick reply.

  Now I will try to make a communication between Clisp and Transputer
both of under Unix. I also have a dream to buy 486-machine and use Linux.:-)

  With BEST regards,

--------------------------------
Tomohiro Shibata (email: tom@jsk.t.u-tokyo.ac.jp)
Inoue-Inaba Laboratory,
Department of Mechano-informatics,
University of Tokyo; Japan
From P2043742@csdvax.csd.unsw.EDU.AU  Sat Oct 16 03:06:31 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17006; Sat, 16 Oct 93 03:06:31 +0100
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H46HANCMV48WZF36@csdvax.csd.unsw.EDU.AU>; Sat,
 16 Oct 1993 12:06:18 +1000
Date: Sat, 16 Oct 1993 12:06:18 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: I need the newest version of Clisp for SGI!!
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H46HAND65E8WZF36@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Clisp Users,

I am useing an old version of Clisp on a SGI Iris Indigo that is available
from ma2s2.mathematik.uni-karsruhe.de because due to space limitation I am not
allowed to have GCC on my machine and with the Irix native CC compiler Clisp 
can not be built.

If somebody has allready built the newest version of clisp for SGI please post
it to the above mentioned depository to make me able to download and use it on
my machine. I'd approciate it.

Yours,
Bela Pecsek.
From reggie@muon.phys.washington.edu  Sat Oct 16 03:41:22 1993
Return-Path: <reggie@muon.phys.washington.edu>
Received: from muon.phys.washington.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17079; Sat, 16 Oct 93 03:41:22 +0100
Received: by muon.phys.washington.edu via SMTP (920330.SGI/911001.SGI)
	for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA09503; Fri, 15 Oct 93 19:40:20 -0700
Message-Id: <9310160240.AA09503@muon.phys.washington.edu>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: I need the newest version of Clisp for SGI!! 
In-Reply-To: Your message of "Sat, 16 Oct 1993 03:08:17 BST."
             <01H46HAND65E8WZF36@csdvax.csd.unsw.EDU.AU> 
Date: Fri, 15 Oct 1993 19:40:19 -0700
From: Reggie Perry <reggie@muon.phys.washington.edu>

	If Bruno tells me how he wants it set up, I would be glad to
upload the system for you.

-Reggie

From tom@jsk.t.u-tokyo.ac.jp  Sat Oct 16 14:53:55 1993
Received: from monoceros.jsk.t.u-tokyo.ac.jp (jsk.t.u-tokyo.ac.jp) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17284; Sat, 16 Oct 93 14:53:55 +0100
Received: by monoceros.jsk.t.u-tokyo.ac.jp (4.1/6.4J.6-MX)
	id AA02684; Sat, 16 Oct 93 22:51:36 JST
Date: Sat, 16 Oct 93 22:51:36 JST
From: tom@jsk.t.u-tokyo.ac.jp (Tomohiro Shibata)
Return-Path: <tom@jsk.t.u-tokyo.ac.jp>
Message-Id: <9310161351.AA02684@monoceros.jsk.t.u-tokyo.ac.jp>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
In-Reply-To: Bruno Haible's message of Fri, 10 Sep 93 12:52:18 +0200 <9309101052.AA06445@ma2s2.mathematik.uni-karlsruhe.de>
Subject: pipe communication

Here is a summary to realize making CLISP communicate other process
using named pipe.

Mr. Haible wrote:
   >>  (shell "mkfifo /tmp/wish-in")
   >>  (shell "mkfifo /tmp/wish-out")
   >>  (setq *lisp-to-wish-stream*
   >>	 (make-two-way-stream (open "/tmp/wish-out" :direction :input)
   >>			      (open "/tmp/wish-in" :direction :output)
   >>  ) )
   >>  (shell "wish < /tmp/wish-in > /tmp/wish-out")
   >>  (delete-file "/tmp/wish-in")
   >>  (delete-file "/tmp/wish-out")
But it doesn't work at the (open .... :input).

I got a Mr.Matthias's program which works correctly by this mailing-list,
and found differece of two programs, that is:
  1. opening named pipe for input can succeed if it has already
     connected to output of any program.
  2. Order to open two streams must be that fist output and second input.

(defun open-test nil
  (setq cmd (format NIL "program < /tmp/in > /tmp/out 2>&1 &"))
  (shell (format NIL "exec /bin/sh -c ~S" cmd))
  (setq outf (open "/tmp/in" :direction :output))
  (setq inf (open "/tmp/out" :direction :input)))

So, simple example is a above function which can succeed. 

Sincerely.

--------------------------------
Tomohiro Shibata (email: tom@jsk.t.u-tokyo.ac.jp)
Inoue-Inaba Laboratory,
Department of Mechano-informatics,
University of Tokyo; Japan
From marcusli@io.org  Sun Oct 17 00:29:24 1993
Return-Path: <marcusli@io.org>
Received: from io.org by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17770; Sun, 17 Oct 93 00:29:24 +0100
Received: by io.org (Smail3.1.28.1 #4)
	id m0ooL0M-0004cVC; Sat, 16 Oct 93 19:25 EDT
Message-Id: <m0ooL0M-0004cVC@io.org>
From: marcusli@io.org (Marcus Li)
Subject: clisp for MacOS?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Sat, 16 Oct 1993 19:25:46 -0400 (EDT)
X-Mailer: ELM [version 2.4 PL22]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 127       

Hello,

I am looking for a MacOS version of clisp.

Please email info if there is such a thing.

Thanks in advance.

Marcus Li
From jbishop@babel.ling.nwu.edu  Sun Oct 17 17:38:26 1993
Received: from relay.acns.nwu.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18064; Sun, 17 Oct 93 17:38:26 +0100
Received: from babel.ling.nwu.edu by relay.acns.nwu.edu (4.1/SMI-ACNS-relay-1.7)
	id AA04070; Sun, 17 Oct 93 11:36:05 CDT
Return-Path: <jbishop@babel.ling.nwu.edu>
Received: by babel.ling.nwu.edu (4.1/SMI-4.0)
	id AA21478; Sun, 17 Oct 93 11:35:36 CDT
Date: Sun, 17 Oct 1993 11:32:54 -0500 (CDT)
From: Jeff Bishop <jbishop@nwu.edu>
Subject: Illegal characters/ .LSP files
To: Clisp List <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Cc: Bruno Haible <haible@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.85.9310171154.C21468-0100000@babel.ling.nwu.edu>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I have found that whenever I edit any Lisp files on the OS/2 system 
editor (or any of several other text editors which run on the same 
platform) I get an error message when I attempt to load them.  It says 
;; Loading file C:\Common Lisp\chapter5.lsp ...
*** - READ from #<STRING-CHAR-FILE-STREAM #"C:\\Common 
Lisp\\chapter5.lsp">: ill
egal character #\

Jeff Bishop
jbishop@nwu.edu


From jbishop@babel.ling.nwu.edu  Sun Oct 17 17:42:29 1993
Received: from relay.acns.nwu.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18118; Sun, 17 Oct 93 17:42:29 +0100
Received: from babel.ling.nwu.edu by relay.acns.nwu.edu (4.1/SMI-ACNS-relay-1.7)
	id AA04433; Sun, 17 Oct 93 11:40:11 CDT
Return-Path: <jbishop@babel.ling.nwu.edu>
Received: by babel.ling.nwu.edu (4.1/SMI-4.0)
	id AA21484; Sun, 17 Oct 93 11:39:42 CDT
Date: Sun, 17 Oct 1993 11:37:10 -0500 (CDT)
From: Jeff Bishop <jbishop@nwu.edu>
Subject: Illegal characters/ .LSP files
To: Clisp List <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Cc: Bruno Haible <haible@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.85.9310171110.D21468-0100000@babel.ling.nwu.edu>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


I have found that whenever I edit any Lisp files on the OS/2 system 
editor (or any of several other text editors which run on the same 
platform) I get an error message when I attempt to load them.  It says 
;; Loading file C:\Common Lisp\chapter5.lsp ...
*** - READ from #<STRING-CHAR-FILE-STREAM #"C:\\Common 
Lisp\\chapter5.lsp">: ill
egal character #\

I *suspect* it might have something to do with ^M at the end of a line, 
since I have experienced no such problems with the Unix version.  Does 
anyone know how to edit the files to make them readable in a DOS, 
Windows, or OS/2 environment?

Jeff Bishop
jbishop@nwu.edu



From LARSSON@ntcclu.ntc.nokia.com  Mon Oct 18 09:47:42 1993
Return-Path: <LARSSON@ntcclu.ntc.nokia.com>
Received: from NTC02.TELE.NOKIA.FI by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18517; Mon, 18 Oct 93 09:47:42 +0100
Date:    Mon, 18 Oct 1993 10:46:26 +0300 (EET)
From: LARSSON@ntcclu.ntc.nokia.com
Message-Id: <931018104626.208065b8@ntcclu.ntc.nokia.com>
Subject: RE: Illegal characters/ .LSP files
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vmsmail-To: SMTP%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

Jeff Bishop <jbishop@nwu.edu> asked:

I have found that whenever I edit any Lisp files on the OS/2 system 
editor (or any of several other text editors which run on the same 
platform) I get an error message when I attempt to load them.  It says 
;; Loading file C:\Common Lisp\chapter5.lsp ...
*** - READ from #<STRING-CHAR-FILE-STREAM #"C:\\Common 
Lisp\\chapter5.lsp">: ill
egal character #\

I *suspect* it might have something to do with ^M at the end of a line, 
since I have experienced no such problems with the Unix version.  Does 
anyone know how to edit the files to make them readable in a DOS, 
Windows, or OS/2 environment?

	This problem is caused by the End Of File character (Ctrl-Z
	in DOS and OS/2). You can avoid it by using the TE/2 editor
	(download from ftp-os2.cdrom.com or nic.funet.fi), which does
	NOT write Ctrl-Z at the end of files.

	I think GNU Emacs will do the same service, but I haven't 
	tested it yet.

	Arne
*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
Arne Larsson			Nokia Telecommunications
Translator			Transmission Systems, Customer Services
larsson@ntc02.tele.nokia.fi	P.O. Box 12, SF-02611 Espoo, Finland
larsson@ntcclu.ntc.nokia.com	Phone +358 0 5117476, Fax +358 0 51044287
Arne.Larsson@ntc.nokia.com
*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
From johann@mail4.ai.univie.ac.at  Mon Oct 18 13:38:23 1993
Return-Path: <johann@mail4.ai.univie.ac.at>
Received: from milano.ai.univie.ac.at by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18836; Mon, 18 Oct 93 13:38:23 +0100
Received: by milano.ai.univie.ac.at id AA08273
  (5.65c/IDA-1.4.4 for clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Mon, 18 Oct 1993 13:35:27 +0100
Date: Mon, 18 Oct 1993 13:35:27 +0100
From: Johann Petrak <johann@mail4.ai.univie.ac.at>
Message-Id: <199310181235.AA08273@milano.ai.univie.ac.at>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: RE: Illegal characters/ .LSP files
In-Reply-To: <931018104626.208065b8@ntcclu.ntc.nokia.com>
References: <931018104626.208065b8@ntcclu.ntc.nokia.com>

LARSSON@ntcclu.ntc.nokia.com writes:
 > Jeff Bishop <jbishop@nwu.edu> asked:
 > 
 > I have found that whenever I edit any Lisp files on the OS/2 system 
 > editor (or any of several other text editors which run on the same 
 > platform) I get an error message when I attempt to load them.  It says 
 > ;; Loading file C:\Common Lisp\chapter5.lsp ...
 > *** - READ from #<STRING-CHAR-FILE-STREAM #"C:\\Common 
 > Lisp\\chapter5.lsp">: ill
 > egal character #\
 > 
 > I *suspect* it might have something to do with ^M at the end of a line, 
 > since I have experienced no such problems with the Unix version.  Does 
 > anyone know how to edit the files to make them readable in a DOS, 
 > Windows, or OS/2 environment?
 > 
 > 	This problem is caused by the End Of File character (Ctrl-Z
 > 	in DOS and OS/2). You can avoid it by using the TE/2 editor
 > 	(download from ftp-os2.cdrom.com or nic.funet.fi), which does
 > 	NOT write Ctrl-Z at the end of files.
 > 
 > 	I think GNU Emacs will do the same service, but I haven't 
 > 	tested it yet.

Another way is to tell the LISP reader to treat Ctrl-Z as whitespace:
	(set-syntax-from-char #\Code26 #\Space)

Johann Petrak,                           Email: johann@ai.univie.ac.at
                                         Phone:       +43/222/533-61-12
Austrian Research Institute for                         Schottengasse 3
Artificial Intelligence                          A-1010 Vienna, Austria

From laytonj@sun.soe.clarkson.edu  Tue Oct 19 00:23:47 1993
Return-Path: <laytonj@sun.soe.clarkson.edu>
Received: from omnigate.clarkson.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20226; Tue, 19 Oct 93 00:23:47 +0100
Received: from sun.soe.clarkson.edu by omnigate.clarkson.edu with SMTP (PP) 
          id <06454-0@omnigate.clarkson.edu>; Mon, 18 Oct 1993 19:23:05 -0400
Received: from eagle1.mie.clarkson.edu.noname 
          by sun.soe.clarkson.edu (4.1/SMI-4.1) id AA02827;
          Mon, 18 Oct 93 19:20:51 EDT
Date: Mon, 18 Oct 93 19:20:51 EDT
From: laytonj@sun.soe.clarkson.edu (jeffrey b.layton)
Message-Id: <9310182320.AA02827@sun.soe.clarkson.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Real Newbie Question


Sorry to bother everyone,

   I just joined the list (actually several days) and didn't see any postings,
so I thought I would ask a question. I just got the clisp sources and tried
to compile them on my Sparc10 under SunOS 4.1.3. I followed the instructions
in the INSTALL file in the unix subdirectory. However, when I went the directory
where I'm going to install clisp, I couldn't makemake. I've searched in the
src files and I can't find makemake (only makemake.in). I'd really like to
compile this on my machine (rather than downloadthe binaries). Any ideas
what I'm doing wrong?

Thanks very much,

Jeff Layton

(Internet: laytonj@sun.soe.clarkson.edu)

From RLS@waikato.ac.nz  Tue Oct 19 08:44:00 1993
Return-Path: <RLS@waikato.ac.nz>
Received: from grace.waikato.ac.nz by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20424; Tue, 19 Oct 93 08:44:00 +0100
Message-Id: <9310190744.AA20424@ma2s2.mathematik.uni-karlsruhe.de>
Date: Tue, 19 Oct 93 20:26 +1300
From: RLS@waikato.ac.nz
Subject: RE: Illegal characters/ .LSP files
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

In reply to Mr. Bishops problems with loading files, I too have found
the same problem when loading dos format text files into CLisp on Unix.

If you delete the ^M's and ^Z at the end of the file then Unix doesn't mind
them any more---actually it's only the ^Z, the ^M's aren't a problem.
This is because Unix takes ^D as eof while dos takes ^Z (I think!).
However OS/2 CLisp should take files created with an OS/2 editor---otherwise
how could an OS/2-ite survive?

Richard Shepherd.

From haible  Tue Oct 19 17:13:03 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21372; Tue, 19 Oct 93 17:13:03 +0100
Date: Tue, 19 Oct 93 17:13:03 +0100
From: haible (Bruno Haible)
Message-Id: <9310191613.AA21372@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Installation Question

Jeff Layton has a problem when installing clisp:

> However, when I went the directory
> where I'm going to install clisp, I couldn't makemake. I've searched in the
> src files and I can't find makemake (only makemake.in).

The makemake file is created by the "target" command in the directory
you specify as argument to "target". Did you interrupt the "target" command,
or did it fail in some other way?

Retry the "target ..." command and observe if you see any error message.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Tue Oct 19 17:50:50 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21509; Tue, 19 Oct 93 17:50:50 +0100
Date: Tue, 19 Oct 93 17:50:50 +0100
From: haible (Bruno Haible)
Message-Id: <9310191650.AA21509@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Illegal characters/ .LSP files

Some DOS and OS/2 users (Mr. Bishop being one of them) have been affected
by an editor which appends Ctrl-Z to text files, the OS/2 "enhanced" editor
for example.

Richard Shepherd proposes:

> However OS/2 CLisp should take files created with an OS/2 editor---
> otherwise how could an OS/2-ite survive?

Ctrl-Z was used as EOF character 10 years ago. I think it dates back to
operating systems like CP/M which didn't store a file's length in bytes,
only its size in disk blocks. It is of no use at all nowadays.

> This is because Unix takes ^D as eof while dos takes ^Z (I think!).

Yes, with the distinction that Unix doesn't save the Ctrl-D in the file.

My advice is to use an editor which does not append this prehistoric
character to your files. Arne Larsson mentioned one, and there are many
more good editors around.

Only if I can load the clisp executable into an editor, save it, and it
comes out unmodified, only then I consider that editor usable for
day to day work.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From dliu@faraday-gw.njit.edu  Tue Oct 19 19:52:19 1993
Return-Path: <dliu@faraday-gw.njit.edu>
Received: from njitgw.njit.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21818; Tue, 19 Oct 93 19:52:19 +0100
Received: by njitgw.njit.edu (5.57/Ultrix3.0-C)
	id AA20948; Tue, 19 Oct 93 14:49:31 -0400
Received: from ark.njit.edu by faraday-gw.njit.edu (4.1/SMI-4.1)
	id AA29100; Tue, 19 Oct 93 14:49:22 EDT
Date: Tue, 19 Oct 93 14:49:22 EDT
From: dliu@faraday-gw.njit.edu (Dong Liu)
Received: by ark.njit.edu (4.1/SMI-4.1)
	id AA13036; Tue, 19 Oct 93 14:49:22 EDT
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: compiler error when compiling garnet 2.2 
Mailer: VM 5.32 (beta) for GNU Emacs 18.59.5
Message-Id: <DLIU-31326879.93Oct19144547@ark.njit.edu>

I installed clisp-1993-09-01 on both a Sun Sparc2 and a Linux machines,
when compiling the new garnet version 2.2, clisp stops at compiling
kr/kr.lsp, the error message is

*** - Compiler bug!! Occurred in OPTIMIZE-LABEL.

Dose anyone have a solution?

Thanks -dong
From haible  Tue Oct 19 20:03:45 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21890; Tue, 19 Oct 93 20:03:45 +0100
Date: Tue, 19 Oct 93 20:03:45 +0100
From: haible (Bruno Haible)
Message-Id: <9310191903.AA21890@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: compiler error when compiling garnet 2.2

This has already been discussed on this mailing list:

> clisp stops at compiling kr/kr.lsp, the error message is
> *** - Compiler bug!! Occurred in OPTIMIZE-LABEL.

> Does anyone have a solution?

Get clisp-1993-09-27. Same place as usual.


                      Bruno Haible
                      haible@ma2s2.mathematik.uni-karlsruhe.de
From dxs@evolving.com  Thu Oct 21 06:18:50 1993
Return-Path: <dxs@evolving.com>
Received: from csn.org by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA24305; Thu, 21 Oct 93 06:18:50 +0100
Received: by csn.org with UUCP id AA00801
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Wed, 20 Oct 1993 23:15:51 -0600
Received: by kafka (AIX 3.2/UCB 5.64/4.03)
          id AA23474; Mon, 18 Oct 1993 12:50:29 -0600
Date: Mon, 18 Oct 1993 12:50:29 -0600
From: dxs@evolving.com (Dan Stanger)
Message-Id: <9310181850.AA23474@kafka>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: clisp source file expansion


i downloaded the clisp source from  ftp.cs.cmu.edu. the files have a
extension .z. does anyone have source to the program to expand them
or could they tell me where to find the source in the usa?
thanks,
dan stanger
From RLS@waikato.ac.nz  Thu Oct 21 09:08:25 1993
Return-Path: <RLS@waikato.ac.nz>
Received: from truth.waikato.ac.nz by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA24472; Thu, 21 Oct 93 09:08:25 +0100
Message-Id: <9310210808.AA24472@ma2s2.mathematik.uni-karlsruhe.de>
Date: Thu, 21 Oct 93 21:05 +1300
From: RLS@waikato.ac.nz
Subject: RE: clisp source file expansion
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

My gues would be gzip, becoming standard on unix.  If you have access to a unix
machine it may already be there. The syntax is

       gzip -d file

where file.z is your compressed stuff.  gzip can also be obtained for DOS,
the syntax to use it exactly the same as above.  If you don't have gzip
I believe it is available from many ftp sites (though I can't name one for
you!).

Richard Shepherd.

From dxs@evolving.com  Sat Oct 23 13:03:37 1993
Return-Path: <dxs@evolving.com>
Received: from nz11 by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AB26130; Sat, 23 Oct 93 13:03:37 +0100
Received: from co.edu by nz11.rz.uni-karlsruhe.de with SMTP (PP) 
          id <02856-0@nz11.rz.uni-karlsruhe.de>;
          Fri, 22 Oct 1993 22:14:06 +0100
Received: by mail-2.csn.net with UUCP id AA13733 (5.65c/IDA-1.4.4 
          for clisp-list@ma2s2.mathematik.uni-karlsruhe.de);
          Fri, 22 Oct 1993 15:12:42 -0600
Received: from tunabnc by kafka (AIX 3.2/UCB 5.64/4.03) id AA24129;
          Fri, 22 Oct 1993 14:41:13 -0600
Received: by tunabnc (AIX 3.2/UCB 5.64/4.03) id AA41735;
          Fri, 22 Oct 1993 14:40:29 -0600
Date: Fri, 22 Oct 1993 14:40:29 -0600
From: dxs@evolving.com (Dan Stanger)
Message-Id: <9310222040.AA41735@tunabnc>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: building clisp-1993-08-22


i am having a problem building.  there is a problem in the configure
in src where the code is as follows.

# A program that outputs its argument count:
cat > conftest.c <<EOF
#include <stdio.h>
#ifdef __STDC__
main (int argc, char** argv)
#else
main () int argc; char** argv;
#endif
{ printf("%d\n",argc); exit(0); }
EOF
eval $compile

if i dont use the ansi c compiler, then the code fails because the line
containing main should be
main(argc, argv) int argc; char** argv;

is this a error in configure?

if i try to use the ansi c compiler, i get errors in machine.h

i am trying to port this to a rs6000.
From haible  Sat Oct 23 14:36:42 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26378; Sat, 23 Oct 93 14:36:42 +0100
Date: Sat, 23 Oct 93 14:36:42 +0100
From: haible (Bruno Haible)
Message-Id: <9310231336.AA26378@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: building clisp-1993-08-22 on RS6000

Dan Stanger <dxs@evolving.com> notes:

> there is a problem in the configure
> the line containing main should be
> main(argc, argv) int argc; char** argv;

You are right. Mr Wolfgang Golubski told me about it, and it has been fixed
in clisp-1993-09-27.

> i am trying to port this to a rs6000.

There are RS/6000 binaries in ma2s2:/pub/lisp/clisp/binaries/rs6000/. They
have been provided by Gabor Herr <herr@iti.informatik.th-darmstadt.de>.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From rv-server@cs.brown.edu  Sat Oct 23 23:57:08 1993
Return-Path: <rv-server@cs.brown.edu>
Received: from cs.brown.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16488; Sat, 23 Oct 93 23:57:08 +0100
Received: from vegas.cs.brown.edu by cs.brown.edu (5.64+/Bullwinkle-1.7)
	id AA25688; Sat, 23 Oct 93 18:53:41 -0400
Date: Sat, 23 Oct 93 18:53:41 -0400
From: rv-server@cs.brown.edu
Message-Id: <9310232253.AA25688@cs.brown.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: building clisp on Linux box

I tried but failed building clisp on a linux box.  The configure,
though lengthy, completed successfully, but compilation exhausted
virtual memory.  
 
My 386-64k 40MHz 8M ram 8M swap linux box choked when compiling the
file 
 
  spvwtabs.c
 
 
any ideas?
 
 
rodrigo vanegas
rv@cs.brown.edu
 
From haible  Sun Oct 24 00:05:55 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA16554; Sun, 24 Oct 93 00:05:55 +0100
Date: Sun, 24 Oct 93 00:05:55 +0100
From: haible (Bruno Haible)
Message-Id: <9310232305.AA16554@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: building clisp on Linux box

Rodrigo Vanegas <rv@cs.brown.edu> observes:

> My 386-64k 40MHz 8M ram 8M swap linux box choked when compiling the
> file spvwtabs.c

Yes, when using gcc-2.4.5 you need 8 MB RAM and 10 MB swap space.
You can get away with much less memory if you install gcc-2.5.0.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From ian@calvin.ds.boeing.com  Wed Oct 27 00:00:54 1993
Return-Path: <ian@calvin.ds.boeing.com>
Received: from atc.boeing.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20523; Wed, 27 Oct 93 00:00:54 +0100
Received: by atc.boeing.com (5.57) 
	id AA26303; Tue, 26 Oct 93 15:58:13 -0700
Received: from  calvin.ds.boeing.com (calvin.ds.boeing.com) by mercury.boeing.com (4.1/SMI-4.1)
	id AA28874; Tue, 26 Oct 93 16:05:32 PDT
Received: by  calvin.ds.boeing.com (5.57/Ultrix3.0-C)
	id AA21535; Tue, 26 Oct 93 15:57:11 -0700
Date: Tue, 26 Oct 93 15:57:11 -0700
From: ian@calvin.ds.boeing.com (Ian Searle)
Message-Id: <9310262257.AA21535@ calvin.ds.boeing.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Need Help with SVr4 Installation.


Hello, I have successfully installed CLISP on Sun and DEC
workstations, but I am having a very difficult time with CLISP on a
486 running SVr4.0. I get assembler errors using gcc. Using cc I can
get it to compile, but lisp.run won't do anything because it thinks
there is only 66k of memory (this is not correct). I am adding
-DNO_MULTIMAP_SHM to the CFLAGS def in the makefile. I saw the note in
there that says:

(*) The lisp.run you get is a program that reliably crashes your machine.

But I was hoping that this could be resolved.

Can anybody out there help?

Thanks,
Ian Searle
From timcenko@cs.columbia.edu  Wed Oct 27 16:47:50 1993
Return-Path: <timcenko@cs.columbia.edu>
Received: from cs.columbia.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21369; Wed, 27 Oct 93 16:47:50 +0100
Received: from ground.cs.columbia.edu by cs.columbia.edu (5.65c/0.6/jba+ad+jtt for clisp-list@ma2s2.mathematik.uni-karlsruhe.de) with SMTP 
	id AA08033; Wed, 27 Oct 1993 11:43:41 -0400
Received: by ground.cs.columbia.edu id AA18693
  (5.65c/IDA-1.4.4.5/jba/jtt/ad for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Wed, 27 Oct 1993 11:43:40 -0400
Date: Wed, 27 Oct 93 11:43:40 EDT
From: Aleksandar Timcenko <timcenko@cs.columbia.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Question: how to increase the stack
Message-Id: <CMM.0.90.2.751736620.timcenko@ground.cs.columbia.edu>


I am running clisp DOS/windows on a 486 with 8M RAM + 16M swap. The
application that I am trying to port from SUN compiles smoothly but
when it runs I get the following

stack too small!
esp A1A1C top B2000 size 10000

Program terminate by signal 9 , SIGKILL


Is there any way around this? I'd appreciate any
comments/suggestions/condolences.

Thanks,
Alex
From snfeldma%teebox.franken.de@castle.franken.de  Thu Oct 28 05:01:05 1993
Return-Path: <snfeldma%teebox.franken.de@castle.franken.de>
Received: from faui45.informatik.uni-erlangen.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21846; Thu, 28 Oct 93 05:01:05 +0100
Received: from castle.franken.de by uni-erlangen.de with UUCP;
	id AA17361 (5.65c-5/7.3v-FAU); Thu, 28 Oct 1993 04:56:54 +0100
Received: by castle.franken.de (V1.16/wusel)
	  id <7tcw@castle.franken.de>; Thu, 28 Oct 93 01:13:49 MEZ
Received: by teeBox.franken.de (Smail3.1.28.1 #6)
	id m0osL2H-000DCoC; Thu, 28 Oct 93 00:16 GMT
Message-Id: <m0osL2H-000DCoC@teeBox.franken.de>
Date: Thu, 28 Oct 1993 00:16:16 +0000 (GMT)
In-Reply-To: <9310262257.AA21535@ calvin.ds.boeing.com> from "Ian Searle" at Oct 27, 93 00:03:37 am
X-Mailer: ELM [version 2.4 PL21]
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Length: 2839
From: snfeldma@teebox.franken.de (Sebastian Feldmann)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Need Help with SVr4 Installation.

> 
> Hello, I have successfully installed CLISP on Sun and DEC
> workstations, but I am having a very difficult time with CLISP on a
> 486 running SVr4.0. I get assembler errors using gcc. Using cc I can
> get it to compile, but lisp.run won't do anything because it thinks
> there is only 66k of memory (this is not correct). I am adding
> -DNO_MULTIMAP_SHM to the CFLAGS def in the makefile. I saw the note in
> there that says:
> 
> (*) The lisp.run you get is a program that reliably crashes your machine.
> 
[...]

I am using a 486 SVR4.2 and have the same problem. During compilation I get
*many* warnings of the kind:
"
"lispbibl.d", line 6764: warning: trigraph sequence replaced
"spvw.d", line 1784: warning: integer overflow detected: op "<<"
"spvw.d", line 1797: warning: integer overflow detected: op "<<"
"spvw.d", line 1798: warning: integer overflow detected: op "<<"
"spvw.d", line 1817: warning: integer overflow detected: op "<<"
"spvw.d", line 5270: warning: integer overflow detected: op "<<"
...
"spvw.d", line 6027: warning: improper pointer/integer combination: op "="
"spvw.d", line 6029: warning: improper pointer/integer combination: op "="
"spvw.d", line 6135: warning: argument is incompatible with prototype: arg #2
"spvw.d", line 6178: warning: argument is incompatible with prototype: arg #2
"spvw.d", line 6180: warning: argument is incompatible with prototype: arg #2
"spvw.d", line 6733: warning: assignment type mismatch
...
"eval.d", line 2149: warning: integer overflow detected: op "<<"
"eval.d", line 2706: warning: integer overflow detected: op "<<"
"eval.d", line 2777: warning: integer overflow detected: op "<<"

"lisparit0.d", line 2119: warning: integer overflow detected: op "<<"
"lisparit0.d", line 2150: warning: integer overflow detected: op "<<"
"lisparit0.d", line 2150: warning: integer overflow detected: op "U-"
"lisparit0.d", line 2203: warning: integer overflow detected: op "<<"
"lisparit0.d", line 2203: warning: integer overflow detected: op "-"
"lisparit0.d", line 3839: warning: integer overflow detected: op "<<"

"

a first look for the reason directs me to  " oint_addr_shift-addr_shift " 
so it seems to be a wrong definition of oint_addr_shift and/or addr_shift
or some kind of  macro-trouble   in macros using these

I looked at clisp for the first time a few days ago. So chances are not very
high I'll solve that problem soon.

Any help welcome ...

so long
	Sebastian

+-----------------------------------------------------------------------------+
| Sebastian Feldmann   snfeldma@teebox.franken.de    Fax/Data:(49) 9122-61696 |
| do Smalltalk or Scheme to avoid brain damage       ogin: nuucp word: nuucp  |
|                                           InfoFiles als: ~/info or ~/index  |
+-----------------------------------------------------------------------------+
From ian@calvin.ds.boeing.com  Thu Oct 28 16:08:22 1993
Return-Path: <ian@calvin.ds.boeing.com>
Received: from atc.boeing.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23514; Thu, 28 Oct 93 16:08:22 +0100
Received: by atc.boeing.com (5.57) 
	id AA25720; Thu, 28 Oct 93 08:05:22 -0700
Received: from  calvin.ds.boeing.com (calvin.ds.boeing.com) by mercury.boeing.com (4.1/SMI-4.1)
	id AA04640; Thu, 28 Oct 93 08:12:39 PDT
Received: by  calvin.ds.boeing.com (5.57/Ultrix3.0-C)
	id AA13351; Thu, 28 Oct 93 08:04:19 -0700
Date: Thu, 28 Oct 93 08:04:19 -0700
From: ian@calvin.ds.boeing.com (Ian Searle)
Message-Id: <9310281504.AA13351@ calvin.ds.boeing.com>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: 
In-Reply-To: <m0osL2H-000DCoC@teeBox.franken.de> (snfeldma@teebox.franken.de)
Subject: Re: Need Help with SVr4 Installation.


>"lisparit0.d", line 2203: warning: integer overflow detected: op "<<"
>"lisparit0.d", line 2203: warning: integer overflow detected: op "-"
>"lisparit0.d", line 3839: warning: integer overflow detected: op "<<"
>
>"
>
>a first look for the reason directs me to  " oint_addr_shift-addr_shift " 
>so it seems to be a wrong definition of oint_addr_shift and/or addr_shift
>or some kind of  macro-trouble   in macros using these
>
>I looked at clisp for the first time a few days ago. So chances are not very
>high I'll solve that problem soon.
>
>Any help welcome ...
>
>so long
>	Sebastian

I have decided to ignore these compiler warnings for the moment. I got
the same kind of warnings when I compiled CLISP on a Sun-4 and a DEC
5000, and CLISP seems to run OK (at least well enough to support
MAXIMA). 

-Ian Searle
From haible  Thu Oct 28 16:29:22 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23635; Thu, 28 Oct 93 16:29:22 +0100
Date: Thu, 28 Oct 93 16:29:22 +0100
From: haible (Bruno Haible)
Message-Id: <9310281529.AA23635@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Need Help with SVr4 Installation.

> During compilation I get *many* warnings of the kind:
> "lispbibl.d", line 6764: warning: trigraph sequence replaced
> "spvw.d", line 1784: warning: integer overflow detected: op "<<"
> "lisparit0.d", line 2119: warning: integer overflow detected: op "<<"
> ...

All these warnings are harmless. I have seen them all and checked the clisp
source.

On the other hand, if the CLISP compiler emits warnings about your Lisp code,
you should better take a look at them.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de

From xjam@ginkgo.CS.Berkeley.EDU  Fri Oct 29 00:02:36 1993
Return-Path: <xjam@ginkgo.CS.Berkeley.EDU>
Received: from ginkgo.CS.Berkeley.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23912; Fri, 29 Oct 93 00:02:36 +0100
Received: from localhost (xjam@localhost) by ginkgo.CS.Berkeley.EDU (8.6.2/8.5) id PAA14388; Thu, 28 Oct 1993 15:59:07 -0700
Message-Id: <199310282259.PAA14388@ginkgo.CS.Berkeley.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: call-next-method in CLOS
Reply-To: xjam@cork.CS.Berkeley.EDU
Date: Thu, 28 Oct 1993 15:59:06 -0700
From: (The Crossjammer) <xjam@ginkgo.CS.Berkeley.EDU>

While compiling clue/shells.lsp I ran across a call to call-next-method
which actually passes arguments. The builtin CLOS of CLISP seems to
disallow this but my CLTL2 copy says it's applicable. Any quick fixes
and/or clarifications?

xjam@cork.Berkeley.EDU  	Fiiiive Thousand Boomin Watts...... -The JBeez

They can't come on and play me in prime time, 	    | Free Millipede coin op
Cause I know the time, cause I'm gettin' mine.	    | and House music at my
I get on the mix late in the night... -Public Enemy | place! Drop by sometime.


From haible  Fri Oct 29 19:43:57 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25178; Fri, 29 Oct 93 19:43:57 +0100
Date: Fri, 29 Oct 93 19:43:57 +0100
From: haible (Bruno Haible)
Message-Id: <9310291843.AA25178@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: call-next-method in CLOS

Brian Dennis <xjam@ginkgo.CS.Berkeley.EDU> writes:

> While compiling clue/shells.lsp I ran across a call to call-next-method
> which actually passes arguments. The builtin CLOS of CLISP seems to
> disallow this but my CLTL2 copy says it's applicable.

The builtin CLOS of CLISP doesn't support CALL-NEXT-METHOD with arguments.

> Any quick fixes and/or clarifications?

Try this one:

*** clue/shells.lsp%    Fri Oct 29 19:33:11 1993
--- clue/shells.lsp     Fri Oct 29 19:33:11 1993
***************
*** 127,135 ****
  
  (defmethod (setf contact-state) :around (new-state (shell override-shell))
    ;; :iconic is equivalent to :withdrawn for override-shell
!   (call-next-method
!     (if (eq :iconic new-state) :withdrawn new-state)
!     shell))
  
  
  
--- 127,135 ----
  
  (defmethod (setf contact-state) :around (new-state (shell override-shell))
    ;; :iconic is equivalent to :withdrawn for override-shell
!   (if (eq :iconic new-state)
!     ((setf contact-state) :withdrawn shell)
!     (call-next-method)))
  
  
  

One such a usage of CALL-NEXT-METHOD also appeared in the Apply2C compiler,
and it could be patched away like this one. As long as no package
really needs CALL-NEXT-METHOD with arguments, I won't implement it.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From pao@ai.mit.edu  Fri Oct 29 20:21:27 1993
Return-Path: <pao@ai.mit.edu>
Received: from life.ai.mit.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA25320; Fri, 29 Oct 93 20:21:27 +0100
Received: from SLUGGO.AI.MIT.EDU by life.ai.mit.edu (4.1/AI-4.10) for clisp-list@ma2s2.mathematik.uni-karlsruhe.de id AA22023; Fri, 29 Oct 93 15:16:42 EDT
Date: Fri, 29 Oct 1993 15:16-0400
From: Patrick A. O'Donnell <pao@ai.mit.edu>
Subject: Re: call-next-method in CLOS
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9310291843.AA25178@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <19931029191620.0.PAO@SLUGGO.AI.MIT.EDU>

    Date: Fri, 29 Oct 1993 14:45 EDT
    From: haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible)
    Brian Dennis <xjam@ginkgo.CS.Berkeley.EDU> writes:
    > Any quick fixes and/or clarifications?
    Try this one:
    *** clue/shells.lsp%    Fri Oct 29 19:33:11 1993
    --- clue/shells.lsp     Fri Oct 29 19:33:11 1993
    ***************
    *** 127,135 ****
  
      (defmethod (setf contact-state) :around (new-state (shell override-shell))
	;; :iconic is equivalent to :withdrawn for override-shell
    !   (call-next-method
    !     (if (eq :iconic new-state) :withdrawn new-state)
    !     shell))
  
    --- 127,135 ----
  
      (defmethod (setf contact-state) :around (new-state (shell override-shell))
	;; :iconic is equivalent to :withdrawn for override-shell
    !   (if (eq :iconic new-state)
    !     ((setf contact-state) :withdrawn shell)
    !     (call-next-method)))
  
    One such a usage of CALL-NEXT-METHOD also appeared in the Apply2C compiler,
    and it could be patched away like this one. As long as no package
    really needs CALL-NEXT-METHOD with arguments, I won't implement it.
			Bruno Haible
			haible@ma2s2.mathematik.uni-karlsruhe.de

To be fair, you should point out that this changes the operation of
(setf contact-state) for override-shell, specifically for any subclass
of override-shell with daemon methods on (setf contact-state).
		- Pat
From snfeldma%teebox.franken.de@castle.franken.de  Sat Oct 30 22:12:26 1993
Return-Path: <snfeldma%teebox.franken.de@castle.franken.de>
Received: from faui45.informatik.uni-erlangen.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00588; Sat, 30 Oct 93 22:12:26 +0100
Received: from castle.franken.de by uni-erlangen.de with UUCP;
	id AA11426 (5.65c-5/7.3v-FAU); Sat, 30 Oct 1993 22:07:46 +0100
Received: by castle.franken.de (V1.16/wusel)
	  id <7x09@castle.franken.de>; Sat, 30 Oct 93 20:15:53 MEZ
Received: by teeBox.franken.de (Smail3.1.28.1 #6)
	id m0otLqR-000DEZC; Sat, 30 Oct 93 19:20 GMT
Message-Id: <m0otLqR-000DEZC@teeBox.franken.de>
Date: Sat, 30 Oct 1993 19:20:14 +0000 (GMT)
X-Mailer: ELM [version 2.4 PL21]
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Length: 777
From: snfeldma@teebox.franken.de (Sebastian Feldmann)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: HEUREKA  486/SVR4.2

Salve,

just fetched a newer version of clisp ... and all my trouble with that
"66k of memory is not enough for me"  has gone away :-)

my configuration now is:

	486/50 16MB - SVR4.2 (Onsite)
	
	clisp-1993-09-27
	add -DNO_MULTIMAP_SHM -DSVR4 -DUHC (as described in unix/PLATFORMS)
	add -lsocket -lnsl (in the makefile  lisp.run:  ....)

and all went fine

so long
	Sebastian

+-----------------------------------------------------------------------------+
| Sebastian Feldmann   snfeldma@teebox.franken.de    Data: 09122-61696        |
| do Smalltalk or Scheme to avoid brain damage       ogin: nuucp word: nuucp  |
| +clisp                                    InfoFiles als: ~/info or ~/index  |
+-----------------------------------------------------------------------------+
From ROUSSEL@hep.Physics.McGill.CA  Fri Nov  5 04:15:11 1993
Return-Path: <ROUSSEL@hep.Physics.McGill.CA>
Received: from hepvs6.Physics.McGill.CA by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12194; Fri, 5 Nov 93 04:15:11 +0100
Date:    Thu, 4 Nov 1993 22:09:32 -0500 (EST)
From: ROUSSEL@hep.Physics.McGill.CA
Message-Id: <931104220932.22001936@hep.Physics.McGill.CA>
Subject: Problems with compilation of maxima under clisp(os/2 version)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vmsmail-To: SMTP%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

Hello everybody.
	I'm trying to compile maxima under the os/2 version of clisp
but I'm having a problem.  At some point in the compilation of maxima
there is a file, mload.fas, which won't load because "the function
user-homedir-pathname is undefined".  user-homedir-pathname appears
twice in the source code of mload.lsp but indeed, it is not defined.  The
only solution that I've found to this problem was to delete this name.
I would like to know if this is going to give me problems when running
maxima, and if there's another (better) solution to this problem.  Thanks
for any help.

	Harold Roussel
From haible  Mon Nov  8 18:37:03 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA17856; Mon, 8 Nov 93 18:37:03 +0100
Date: Mon, 8 Nov 93 18:37:03 +0100
From: haible (Bruno Haible)
Message-Id: <9311081737.AA17856@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2
Subject: New CLISP version

Once more, there is a new version of CLISP at the usual place:
ma2s2.mathematik.uni-karlsruhe.de:/pub/lisp/clisp/source .

Excerpt from the change log:

User visible changes
--------------------

* The STDWIN library can now be made part of CLISP by calling makemake with
  argument --with-stdwin.

* X3J13 vote <108> is implemented: New packages COMMON-LISP and
  COMMON-LISP-USER.

* X3J13 vote <112> is implemented:
  LOAD binds the variables *LOAD-PATHNAME* and *LOAD-TRUENAME*, COMPILE-FILE
  binds the variables *COMPILE-FILE-PATHNAME* and *COMPILE-FILE-TRUENAME*.
  New variables *LOAD-PATHNAME*, *LOAD-TRUENAME*, *COMPILE-FILE-PATHNAME*,
  *COMPILE-FILE-TRUENAME*.

* X3J13 vote <26> is implemented: COMPILE-FILE has a keyword argument :PRINT.
  New variables *COMPILE-WARNINGS*, *COMPILE-VERBOSE*, *COMPILE-PRINT*.

* Fixed two bugs in DEFPACKAGE: *PACKAGE* is not modified by DEFPACKAGE
  any more, and the :INTERN option now works.

* Fixed FUNCTION-LAMBDA-EXPRESSION such that it works on built-in functions.
  Thanks to France Dacar.

* Fixed a serious bug in GCD on 16-bit processors: (GCD x y) with
  2^k - 2^(k-16) <= |x|,|y| < 2^k could cause a division by zero.

Portability
-----------

* Added support for DEC Alpha AXP running OSF/1 Unix.

* Added support for Apple Mac II running A/UX.

* Added support for Atari ST/TT running MiNT. Thanks to Scott Kolodzieski.

* Support for SunOS4 cc now works.

* The makefile now also works with "parallel" make utilities (e.g. GNU make
  with option -j). Thanks to Rick Sladkey.

* Easier porting: The most dangerous optimizations (inline asm() statements,
  global register allocations, ...) are inhibited if CLISP is compiled with
  option SAFETY=3.

* Some modifications for the sake of gcc-2.5.

Other modifications
-------------------

* Speed up generic function dispatch.

* Some kinds of objects take less space (all CPUs except 680x0).

* The list of X3J13 votes and their current status in CLISP has been moved
  from file `src/defs2.lsp' to file `src/cltl2.txt'.

* The code for setting up a connection to an X server (file `src/socket.d')
  has been completely rewritten.

* Miscellaneous documentation updates.


New binaries have been built for:
   DEC Alpha AXP, OSF 1.3  1375711 Oct 31 02:10 decalpha-osf/clisp.tar.z
   IBM RS/6000, AIX 3.2    1357509 Oct 15 09:40 rs6000/clisp.tar.z

Binaries have been rebuilt for the following architectures:
   Sun3, SunOS 4           1055703 Oct 13 19:08 sun3-sunos4/clisp.tar.z
   HP 9000/800, HP-UX 8    1115787 Oct 23 23:44 hp9000s800/clisp.tar.z
   Sun4, SunOS 4           1044615 Nov  2 19:11 sun4-sunos4/clisp-english.tar.z


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From xjam@ginkgo.CS.Berkeley.EDU  Wed Nov 10 08:02:28 1993
Return-Path: <xjam@ginkgo.CS.Berkeley.EDU>
Received: from ginkgo.CS.Berkeley.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20136; Wed, 10 Nov 93 08:02:28 +0100
Received: from localhost (xjam@localhost) by ginkgo.CS.Berkeley.EDU (8.6.4/8.5) id WAA06569; Tue, 9 Nov 1993 22:56:19 -0800
Message-Id: <199311100656.WAA06569@ginkgo.CS.Berkeley.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Clisp, ilisp and completion
Reply-To: xjam@cork.CS.Berkeley.EDU
Date: Tue, 09 Nov 1993 22:56:18 -0800
From: (The Crossjammer) <xjam@ginkgo.CS.Berkeley.EDU>

Does the command line completion in clisp mess up anyone elses' use of
clisp with ilisp? I'm not using the clisp specific stuff that's in the
archive so that may be the solution.

Alternatively, is there any means to disable the readline library without
rebuilding clisp?
							--Bri
From matthias@intellektik.informatik.th-darmstadt.de  Wed Nov 10 11:51:33 1993
Return-Path: <matthias@intellektik.informatik.th-darmstadt.de>
Received: from rs2.hrz.th-darmstadt.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20362; Wed, 10 Nov 93 11:51:33 +0100
Received: from aida.intellektik.informatik.th-darmstadt.de by rs2.hrz.th-darmstadt.de with SMTP id AA12788
  (5.65c/IDA-1.4.4 for <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Wed, 10 Nov 1993 11:45:02 +0100
Received: by aida.intellektik.informatik.th-darmstadt.de (4.1/Server-1.3/HRZ-THD)
	id AA05066; Wed, 10 Nov 93 11:44:55 +0100
Date: Wed, 10 Nov 93 11:44:55 +0100
From: Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de>
Message-Id: <9311101044.AA05066@aida.intellektik.informatik.th-darmstadt.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re:  Clisp, ilisp and completion

---------  Received message begins Here  ---------

> 
> Does the command line completion in clisp mess up anyone elses' use of
> clisp with ilisp? I'm not using the clisp specific stuff that's in the
> archive so that may be the solution.

I have some trouble, with ILISP and CLISP (which means that I've to type
several 'Ctrl-D's after some ilisp calls e.g. load-file-lisp), but this
did *NOT* go away, when I relinked CLISP without the readline lib.
BTW what's "the clisp specific stuff that's in the archive"?

> 
> Alternatively, is there any means to disable the readline library without
> rebuilding clisp?

No - a '--no-readline' command line switch was nice (Hi Bruno :) )but it
does not exist.

--Matthias

------------------------------------------------------------------------------
Matthias Lindner
FG Intellektik, FB Informatik
Technische Hochschule Darmstadt
Alexanderstr.10, D-64283 Darmstadt
TEL: +49 6151 166651
FAX: +49 6151 165326
NET: matthias@intellektik.informatik.th-darmstadt.de
------------------------------------------------------------------------------
From xjam@ginkgo.CS.Berkeley.EDU  Wed Nov 10 18:31:17 1993
Return-Path: <xjam@ginkgo.CS.Berkeley.EDU>
Received: from ginkgo.CS.Berkeley.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20776; Wed, 10 Nov 93 18:31:17 +0100
Received: from localhost (xjam@localhost) by ginkgo.CS.Berkeley.EDU (8.6.4/8.5) id JAA06894; Wed, 10 Nov 1993 09:25:14 -0800
Message-Id: <199311101725.JAA06894@ginkgo.CS.Berkeley.EDU>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: Clisp, ilisp and completion 
In-Reply-To: Your message of "Wed, 10 Nov 1993 11:54:46 +0100."
             <9311101044.AA05066@aida.intellektik.informatik.th-darmstadt.de> 
Date: Wed, 10 Nov 1993 09:25:13 -0800
From: (The Crossjammer) <xjam@ginkgo.CS.Berkeley.EDU>

>>>>> In article <9311101044.AA05066@aida.intellektik.informatik.th-darmstadt.de>, Matthias Lindner <matthias@intellektik.informatik.th-darmstadt.de> writes:

  Matthias> I have some trouble, with ILISP and CLISP (which means that I've to type
  Matthias> several 'Ctrl-D's after some ilisp calls e.g. load-file-lisp), but this
  Matthias> did *NOT* go away, when I relinked CLISP without the readline lib.
  Matthias> BTW what's "the clisp specific stuff that's in the archive"?

I guess I should be more specific. My problem is that if there are tabs in
a string that commands like "eval-prev-defun" send to clisp, clisp tries to
do expansion and weird things result. I managed to get around it once by
building clisp without readline, but this is a pain if you want to keep up
with latest versions by just getting the binaries.

Meanwhile, in the archives of the clisp list there is some elisp code that
you're supposed to be able to plug into ILISP that'll create a clisp
dialect. I haven't tried it though.

xjam@cork.Berkeley.EDU  	Fiiiive Thousand Boomin Watts...... -The JBeez

They can't come on and play me in prime time, 	    | Free Millipede coin op
Cause I know the time, cause I'm gettin' mine.	    | and House music at my
I get on the mix late in the night... -Public Enemy | place! Drop by sometime.

From haible  Thu Nov 11 22:10:57 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA22824; Thu, 11 Nov 93 22:10:57 +0100
Date: Thu, 11 Nov 93 22:10:57 +0100
From: haible (Bruno Haible)
Message-Id: <9311112110.AA22824@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Clisp, ilisp and completion

> Alternatively, is there any means to disable the readline library without
> rebuilding clisp?

On Unix: Send the output to a pipe, for example

             clisp | tee

For DOS, I don't know.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From cole@elvis.concert.net  Fri Nov 12 14:39:32 1993
Return-Path: <cole@elvis.concert.net>
Received: from elvis.concert.net by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23488; Fri, 12 Nov 93 14:39:32 +0100
Received: by elvis.concert.net (5.65/tas-concert/aug93)
	id AA01422; Fri, 12 Nov 93 08:32:37 -0500
From: Derrick Cole <cole@elvis.concert.net>
Message-Id: <9311121332.AA01422@elvis.concert.net>
Subject: first message to the list, have a newbie question
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Fri, 12 Nov 1993 08:32:37 -0500 (EST)
X-Mailer: ELM [version 2.4 PL23]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 2451      

Greetings!

I've been exposed to c-lisp for a grand total of < 12 hours, so please pardon
my newbie-esque approach.

I just pulled down the 93-11-08 code and attempted to compile.  I'm running
SunOS 4.1.3 on a Sparc10 and compiling with gcc-2.5.2.

First pass, compiling with -DIMMUTABLE failed, but completed without it.  I
looked at spvw.d, made a change, and now -DIMMUTABLE (at least) compiles:

*** spvw.d.orig Thu Nov 11 22:28:44 1993
--- spvw.d      Thu Nov 11 22:28:18 1993
***************
*** 1139,1146 ****
            });
        }
      #define exitmap()  \
!       if (!(bigblock_ptr == &bigblock[0]))
!         close_mapid(bigblock[0].mm_mapid);
    #endif

  #endif # MULTIMAP_MEMORY_VIA_FILE
--- 1139,1147 ----
            });
        }
      #define exitmap()  \
!       { if (!(bigblock_ptr == &bigblock[0])) \
!         close_mapid(bigblock[0].mm_mapid); \
!       }
    #endif

  #endif # MULTIMAP_MEMORY_VIA_FILE

"make test" passes, but "make testsuite" fails with the following alltest.erg
file:

Form: (PRIN1-TO-STRING MOST-POSITIVE-DOUBLE-FLOAT)
SOLL: "8.988465674311579d307"
CLISP: "1.7976931348623157d308"

Form: (PRIN1-TO-STRING LEAST-POSITIVE-DOUBLE-FLOAT)
SOLL: "5.562684646268004d-309"
CLISP: "2.2250738585072014d-308"

Form: (PRIN1-TO-STRING LEAST-NEGATIVE-DOUBLE-FLOAT)
SOLL: "-5.562684646268004d-309"
CLISP: "-2.2250738585072014d-308"

Form: (PRIN1-TO-STRING MOST-NEGATIVE-DOUBLE-FLOAT)
SOLL: "-8.988465674311579d307"
CLISP: "-1.7976931348623157d308"

However, if I invoke lisp.run and execute the forms by hand, I get:

> (PRIN1-TO-STRING MOST-POSITIVE-DOUBLE-FLOAT)
".11111111111111111111111111111111111111111111111111111d1024"
> (PRIN1-TO-STRING LEAST-POSITIVE-DOUBLE-FLOAT)
".10000000000000000000000000000000000000000000000000000d-1021"
> (PRIN1-TO-STRING LEAST-NEGATIVE-DOUBLE-FLOAT)
"-.10000000000000000000000000000000000000000000000000000d-1021"
> (PRIN1-TO-STRING MOST-NEGATIVE-DOUBLE-FLOAT)
"-.11111111111111111111111111111111111111111111111111111d1024"
> 

I'm afraid to susbstitute these values, as I'm unsure as to whether or
not I've got a compilation problem.

Any and all help would certainly be much appreciated!

Thanks,
Derrick
-- 
      |     /   _____/    |    /   _____/  Derrick Cole, KC4WEJ
    / __/  /   /        / |   /   /        MCNC Information Technologies
   /      /   /        /  |  /   /         Research Triangle Park, NC
__/    __/ _______/ __/   __/ _______/     cole@concert.net
From haible  Fri Nov 12 15:26:32 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23606; Fri, 12 Nov 93 15:26:32 +0100
Date: Fri, 12 Nov 93 15:26:32 +0100
From: haible (Bruno Haible)
Message-Id: <9311121426.AA23606@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: first message to the list, have a newbie question

Derrick Cole <cole@elvis.concert.net> was "exposed to c-lisp for a grand
total of < 12 hours" and already found and fixed a bug. Congratulations!

> "make test" passes, but "make testsuite" fails with the following alltest.erg
> file:
> 
> Form: (PRIN1-TO-STRING MOST-POSITIVE-DOUBLE-FLOAT)
> SOLL: "8.988465674311579d307"
> CLISP: "1.7976931348623157d308"

This is due to the fact that on Sparc, CLISP uses the floating format
prescribed by the hardware for DOUBLE-FLOATs. It differs from CLISP's soft
floats. Consider the testsuite to have succeeded.

> However, if I invoke lisp.run and execute the forms by hand, I get:
> 
> > (PRIN1-TO-STRING MOST-POSITIVE-DOUBLE-FLOAT)
> ".11111111111111111111111111111111111111111111111111111d1024"

Don't invoke lisp.run without arguments (except on Atari) - it contains
only one half of clisp. Not even DEFUN or SETF. And floating point numbers
are printed in binary because floatpri.lsp has not been loaded...


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From dasch@darkwing.uoregon.edu  Sat Nov 13 00:12:29 1993
Return-Path: <dasch@darkwing.uoregon.edu>
Received: from darkwing.uoregon.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA24313; Sat, 13 Nov 93 00:12:29 +0100
Received: from localhost (dasch@localhost) by darkwing.uoregon.edu (8.6.4/8.6) id PAA24332; Fri, 12 Nov 1993 15:05:28 -0800
Date: Fri, 12 Nov 1993 15:05:28 -0800
From: John Daschbach <dasch@darkwing.uoregon.edu>
Message-Id: <199311122305.PAA24332@darkwing.uoregon.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: maxima,clisp,os2, load fails

I have been trying to run maxima with clisp under os/2.  I have the
maxima package from the clisp tree at cmu, so I think this is the
correct version to try.  Maxima works with the default files, but
I have been unable to 'load()' any files.  I always get a EONENT
error, "file not found" for any load command.  The varible file_search
contains the correct pathnames.  I have tried the trace facility in
maxima, but it only traces up to the point where it runs FILE_SEARCH
and then returns the same error.  Calling FILE_SEARCH yields the same
error for any file.  Clisp loads files ok, but the maxima code does
not.  It looks like there is no debugger present in maxima as far as
I can tell.  
	Has anybody been able to load files from maxima running in
clisp under os2?  Any ideas on how to proceed to debug this?  
	-John
From jbishop@babel.ling.nwu.edu  Sun Nov 14 22:47:36 1993
Received: from relay.acns.nwu.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA00558; Sun, 14 Nov 93 22:47:36 +0100
Received: from babel.ling.nwu.edu by relay.acns.nwu.edu (4.1/SMI-ACNS-relay-1.7)
	id AA23245; Sun, 14 Nov 93 15:40:14 CST
Return-Path: <jbishop@babel.ling.nwu.edu>
Received: by babel.ling.nwu.edu (4.1/SMI-4.0)
	id AA27497; Sun, 14 Nov 93 15:40:10 CST
Date: Sun, 14 Nov 1993 15:39:53 -0600 (CST)
From: Jeff Bishop <jbishop@nwu.edu>
Sender: Jeff Bishop <jbishop@nwu.edu>
Reply-To: Jeff Bishop <jbishop@nwu.edu>
Subject: Loop macro
To: Clisp List <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Message-Id: <Pine.3.85.9311141530.A27493-0100000@babel.ling.nwu.edu>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII

I am having some trouble with the loop macro on CLISP.  When I try the 
loop-for-var ... constructions, it complains that var is undefined rather 
than defining it as a local variable.  Any suggestions for making LOOP 
work according to Common Lisp conventions?

__________________________________________________________________________
|                              |                                          |
| Jeff Bishop                  |                                          |
|                              | "Real programmers don't document.  If it |
| Department of Linguistics    |  was hard to write, it should be hard to |
| Northwestern University      |  understand."                            |
|______________________________|__________________________________________|




From haible  Mon Nov 15 18:51:53 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01658; Mon, 15 Nov 93 18:51:53 +0100
Date: Mon, 15 Nov 93 18:51:53 +0100
From: haible (Bruno Haible)
Message-Id: <9311151751.AA01658@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Loop macro

Jeff Bishop <jbishop@nwu.edu> writes:

> I am having some trouble with the loop macro on CLISP.  When I try the 
> loop-for-var ... constructions, it complains that var is undefined rather 
> than defining it as a local variable.  Any suggestions for making LOOP 
> work according to Common Lisp conventions?

CLISP's LOOP macro is a CLtL1 loop, a simple loop.

The (LOOP FOR var ...) constructs use the CLtL2 loop macro. I have an
implementation of it, but I don't distribute it with clisp because I
discourage the use of LOOP as long as the ANSI CL draft has inconsistencies
in its specification.

It is on ma2s2.mathematik.uni-karlsruhe.de:
/pub/lisp/clisp/packages/UNSUPPORTED/loop.lsp.z.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From philp@universe.digex.net  Tue Nov 16 16:30:50 1993
Return-Path: <philp@universe.digex.net>
Received: from universe.digex.net by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03153; Tue, 16 Nov 93 16:30:50 +0100
Received: by universe.digex.net id AA02897
  (5.67a8/IDA-1.5 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Tue, 16 Nov 1993 10:23:11 -0500
Date: Tue, 16 Nov 1993 10:17:28 -0500 (EST)
From: Phil Perucci <philp@universe.digex.net>
Subject: Compile 11/08 on Linux?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <Pine.3.05.9311161028.A2862-a100000@universe.digex.net>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Anyone out there working on porting the latest clisp (11/08) to the
current Linux (Slackware 1.1.0)?  Using the previous Slackware 1.0.5
and previous clisp source, compile was fine.  But both the 11/08 and
previous clisp source version fail under Slackware 1.1.0.

I could post the output of make, if someone could give me the syntax
for saving EVERYTHING to a file, for example "make 2>&1 myfile".
Can't remember the syntax...

==============================================================================
 Phil Perucci             | "All postings are my own opinion - all comments
 Systems Programmer       |  are intended for research/educational purposes"
==============================================================================


From MORRIS1@DUCVAX.AUBURN.EDU  Thu Nov 18 06:27:39 1993
Return-Path: <MORRIS1@DUCVAX.AUBURN.EDU>
Received: from DUCVAX.AUBURN.EDU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04808; Thu, 18 Nov 93 06:27:39 +0100
Received: from DUCVAX.AUBURN.EDU by DUCVAX.AUBURN.EDU (PMDF #12431) id
 <01H5FU61E6CG0005CA@DUCVAX.AUBURN.EDU>; Wed, 17 Nov 1993 23:19 CST
Date: Wed, 17 Nov 1993 23:19 CST
From: MORRIS1@DUCVAX.AUBURN.EDU
Subject: CLISP Compiler
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H5FU61E6CG0005CA@DUCVAX.AUBURN.EDU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

   This may be a really dumb question, but I'm very new to CLISP and LISP
in general.  I'm using CLISP on an IBM-compatible 386 computer using MSDOS.
Is there a way to compile my programs into an executable format (.exe or
.com)?

Thanks for the help!


Steve
From philp@universe.digex.net  Thu Nov 18 13:40:13 1993
Return-Path: <philp@universe.digex.net>
Received: from universe.digex.net by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05290; Thu, 18 Nov 93 13:40:13 +0100
Received: by universe.digex.net id AA23420
  (5.67a8/IDA-1.5 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Thu, 18 Nov 1993 07:32:13 -0500
Date: Thu, 18 Nov 1993 07:25:58 -0500 (EST)
From: Phil Perucci <philp@universe.digex.net>
Subject: edit/test cycle?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <Pine.3.05.9311180758.A23322-a100000@universe.digex.net>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Simple question...

With CLISP, what is the best edit/test/code/edit, etc cycle (under X)?
One xterm for editing, another for "clisp -c"?  About all I have to
go on is the CLISP man page and "LISP 3rd Edition" by Winston/Horn.

BTW- the environment is Linux (Slackware 1.1.0), XFree86 2.0.

==============================================================================
 Phil Perucci             | "All postings are my own opinion - all comments
 Systems Programmer       |  are intended for research/educational purposes"
==============================================================================


From RLS@waikato.ac.nz  Thu Nov 18 23:38:48 1993
Return-Path: <RLS@waikato.ac.nz>
Received: from truth.waikato.ac.nz by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA05989; Thu, 18 Nov 93 23:38:48 +0100
Message-Id: <9311182238.AA05989@ma2s2.mathematik.uni-karlsruhe.de>
Date: Fri, 19 Nov 93 11:30 +1300
From: RLS@waikato.ac.nz
Subject: RE: edit/test cycle?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"

I've just started using Linux and openwin, this makes the environment
almost identical to the familiar sun/sparc environment.  I find a nice
way to use CLisp is to have one xterm running CLisp and a textedit
window with my source in it.  One can then just copy and paste between
them, especially if you've got the 3 button mouse going with the middle
button pasting into the xterm.  Another xterm is handy to have around
from which to start other textedit's as needed.

Hope this helps,

Richard Shepherd.

From gt8134b@prism.gatech.edu  Fri Nov 19 03:42:01 1993
Return-Path: <gt8134b@prism.gatech.edu>
Received: from hydra.gatech.edu (hydra-rich.gatech.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06167; Fri, 19 Nov 93 03:42:01 +0100
Received: by hydra.gatech.edu (5.67a/3.1)
	id AA27619; Thu, 18 Nov 1993 21:33:55 -0500
From: gt8134b@prism.gatech.edu (Robert Sanders)
Message-Id: <199311190233.AA27619@prism.gatech.edu>
Subject: Version 1993-11-08 under Linux 
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de (CLISP mailing list)
Date: Thu, 18 Nov 1993 21:33:55 -0500 (EST)
X-Mailer: ELM [version 2.4 PL21]
Content-Type: text
Content-Length: 779       

I've compiled version 1993-11-08 for Linux and found a minor bug:
in unixconf.h, SHMAT_CONST should be defined to nothing.

Also, with this configuration:

     Linux 0.99.13 ALPHAr
     libc 4.4.4   gcc 2.4.3

I got a SIGSEGV after the "Bye" message when it quit.  I traced this to
somewhere at the end of main().  Not having the time to recompile everything
-g, I just recompiled spvw.c with -g.  (I had been compiling with -O2 -m486).
This version of the lisp.run did not cause the segfault.  I'm assuming it's
an optimization bug in gcc 2.4.3; spvw.c is the only file I had to compile
with optimization off.

I will investigate further.  I'm installing gcc 2.5.4 tonight.

I just got my copy of CLtL2 and having CLISP to use it with is heavenly.
Kudos to Bruno and Michael!

From gt8134b@prism.gatech.edu  Fri Nov 19 03:50:22 1993
Return-Path: <gt8134b@prism.gatech.edu>
Received: from hydra.gatech.edu (hydra-rich.gatech.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06255; Fri, 19 Nov 93 03:50:22 +0100
Received: by hydra.gatech.edu (5.67a/3.1)
	id AA29466; Thu, 18 Nov 1993 21:42:16 -0500
From: gt8134b@prism.gatech.edu (Robert Sanders)
Message-Id: <199311190242.AA29466@prism.gatech.edu>
Subject: Compiling 1993-11-08 for HP-UX 8.07
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de (CLISP mailing list)
Date: Thu, 18 Nov 1993 21:42:15 -0500 (EST)
X-Mailer: ELM [version 2.4 PL21]
Content-Type: text
Content-Length: 576       


I tried to compile CLISP for the HP9000s700 at work today.
Most things went fine except the arihppa file; it seems to be in
HP assembler syntax, and I'm using GAS with GCC.  So I changed
the makefile line from ... "|| as" to "|| /bin/as".

The CLISP that resulted from this worked well except for one thing:
if I pressed CTRL-C it died from a SIGALRM.  I briefly
looked at unix.c, unixaux.c, and spvw.c and the alarm_handler()
and interrupt_handler() is somewhat complex so I didn't have time
to explore more.

I'll investigate further tomorrow but any hints are welcome.
 

From haible  Sun Nov 21 22:17:54 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01786; Sun, 21 Nov 93 22:17:54 +0100
Date: Sun, 21 Nov 93 22:17:54 +0100
From: haible (Bruno Haible)
Message-Id: <9311212117.AA01786@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Compile 11/08 on Linux?

Phil Perucci was wondering why CLISP 1993-11-08 didn't compile on Linux
Slackware 1.1.0. The reason is that this Slackware release uses gcc-2.5
in combination with a set of system's include files (inc-4.4.4)  which had
not been updated for gcc-2.5. The CLISP source has been updated for gcc-2.5.

> previous clisp source version fail under Slackware 1.1.0.

Don't use previous CLISP sources with gcc-2.5.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Nov 22 00:19:53 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02064; Mon, 22 Nov 93 00:19:53 +0100
Date: Mon, 22 Nov 93 00:19:53 +0100
From: haible (Bruno Haible)
Message-Id: <9311212319.AA02064@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLISP Compiler

Steven A. Morris <MORRIS1@DUCVAX.AUBURN.EDU> asks:

> I'm using CLISP on an IBM-compatible 386 computer using MSDOS.
> Is there a way to compile my programs into an executable format (.exe or
> .com)?

No. The CLISP compiler doesn't produce machine code.

You can use the (undocumented) SAVEMEM function to dump memory images
that can be given as argument to the -M option of clisp. For example:

  clisp
  > (load "rubik.fas")
  > (savemem "rubik.mem")
  > (exit)

Then call

  clisp -M rubik.mem


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Nov 22 01:02:06 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02240; Mon, 22 Nov 93 01:02:06 +0100
Date: Mon, 22 Nov 93 01:02:06 +0100
From: haible (Bruno Haible)
Message-Id: <9311220002.AA02240@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: edit/test cycle?

Phil Perucci <philp@universe.digex.net> has an interesting question:

> With CLISP, what is the best edit/test/code/edit, etc cycle (under X)?
> One xterm for editing, another for "clisp -c"?

The way I use to work on Linux with X11 is this:
- editor: aXe-5.1 (has multiple windows, pull-down menus, parentheses matching)
- clisp running in one xterm, sometimes with Capture/Logging enabled.
- developing cycle: edit & save, switch to clisp xterm, (load "..."),
  test several functions individually, maybe using the stepper, then switch
  back to the editor window.
- when I think everything works, use  clisp -c  and eliminate the errors
  and warnings.

Bruno Haible
From haible  Mon Nov 22 01:21:23 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02371; Mon, 22 Nov 93 01:21:23 +0100
Date: Mon, 22 Nov 93 01:21:23 +0100
From: haible (Bruno Haible)
Message-Id: <9311220021.AA02371@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Version 1993-11-08 under Linux

Robert Sanders <gt8134b@prism.gatech.edu> found a problem when compiling and
running clisp on Linux:

>      libc 4.4.4   gcc 2.4.3
> I got a SIGSEGV after the "Bye" message when it quit.

This is a problem in the Linux header file /usr/include/setjmp.h that
goes away if you upgrade to gcc-2.5.3 and libc-4.4.4b. We have to thank
Richard Stallman: he modified gcc to fix this problem.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From gt8134b@prism.gatech.edu  Mon Nov 22 01:57:15 1993
Return-Path: <gt8134b@prism.gatech.edu>
Received: from hydra.gatech.edu (hydra-rich.gatech.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02460; Mon, 22 Nov 93 01:57:15 +0100
Received: from prism (acme.gatech.edu) by hydra.gatech.edu (5.67a/3.1)
	id AA27877; Sun, 21 Nov 1993 19:48:37 -0500
Received: by prism.gatech.edu (5.67a/1.0)
	id AA04811; Sun, 21 Nov 1993 19:48:33 -0500
From: gt8134b@prism.gatech.edu
Message-Id: <199311220048.AA04811@prism>
Subject: Re: Compiling 1993-11-08 for HP-UX 8.07 
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de (CLISP mailing list)
Date: Sun, 21 Nov 1993 19:48:33 -0500 (EST)
X-Mailer: ELM [version 2.4 PL22]
Content-Type: text
Content-Length: 698       


[Bruno, I hope you don't mine me forwarding this to the CLISP list.]

>From haible@ma2s2.mathematik.uni-karlsruhe.de Sun Nov 21 19:40:59 1993
> > The CLISP that resulted from this worked well except for one thing:
> > if I pressed CTRL-C it died from a SIGALRM.
> > the alarm_handler()
> > and interrupt_handler() is somewhat complex so I didn't have time
> > to explore more.
> 
> The problem isn't there: If I try to interrupt running programs using

Well, I found a workaround that seems to work, although it results
in less responsive behavior due to alarm()'s resolution: I undefined
HAVE_ITIMER in unixconf.h.  Until the problem in readline is found, I 
suggest that this be the default.  


From gt8134b@prism.gatech.edu  Mon Nov 22 02:06:08 1993
Return-Path: <gt8134b@prism.gatech.edu>
Received: from hydra.gatech.edu (hydra-rich.gatech.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02530; Mon, 22 Nov 93 02:06:08 +0100
Received: from prism (acme.gatech.edu) by hydra.gatech.edu (5.67a/3.1)
	id AA00469; Sun, 21 Nov 1993 19:57:31 -0500
Received: by prism.gatech.edu (5.67a/1.0)
	id AA05130; Sun, 21 Nov 1993 19:57:27 -0500
From: gt8134b@prism.gatech.edu
Message-Id: <199311220057.AA05130@prism>
Subject: Re: Version 1993-11-08 under Linux
To: haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible)
Date: Sun, 21 Nov 1993 19:57:27 -0500 (EST)
Cc: clisp-list@ma2s2.mathematik.uni-karlsruhe.de (CLISP mailing list)
In-Reply-To: <9311220031.AA02429@ma2s2.mathematik.uni-karlsruhe.de> from "Bruno Haible" at Nov 22, 93 01:31:15 am
X-Mailer: ELM [version 2.4 PL22]
Content-Type: text
Content-Length: 2049      

 
> > in unixconf.h, SHMAT_CONST should be defined to nothing.
 
> Oops. I should have noticed this. What does the declaration of shmat()
> look like in your /usr/include/sys/shm.h ?

extern char *shmat __P((int __shmid, char *__shmaddr, int __shmflg));

> I had the same problem some weeks ago, and I thought it was a problem in gcc.
> I sent a bug report to the gcc people, and Stallman patched gcc. The problem
> was that gcc must not treat "setjmp" like any other C function, but on Linux
> with a new libc setjmp is really called __setjmp - and gcc didn't know about
> it.

Hmm.  Is it that setjmp() should be declared __attribute__ ((noreturn)),
or something other that gcc needs to know?
 
> > I will investigate further.  I'm installing gcc 2.5.4 tonight.
 
> Recall that gcc-2.5 requires inc-4.4.4b or newer.

Hmm.  I compiled gcc 2.5.4 myself with library 4.4.4 (non-beta).  Maybe
I should upgrade my libc and include files.

I found a couple of new problems; the first is that kernel 0.99.13 ALPHAr
(and a few earlier releases, too) have changed kmalloc() so that it can
allocate a maximum of 4072 bytes or so.  THe upshot of that is that 
SHMMAX needs to be reduced because fewer page pointers can fit on one
kmalloc()ed page.  I think I used 0x3fa000.

Another problem was that I couldn't compile maxima.  It compiled all
the files fine, then started loading, got to mopers.fas, and sat
there spinning.  I left it for a couple of hours with no results.
Then I did an strace on it, and it was continually readdir()ing
the root directory and /bin!  Do you have any idea what this is
caused by?

And starting clisp with 4 megs of memory caused it to eventually
fail with "No room for Lisp Objects" when attempting to compile
maxima.  This could just be a side-effect of the above problem.

If I send sigquit to clisp, it doesn't get to remove the main
shared memory segment(s).  Though they are attached 42 times, they
aren't destroyed.  Could they be deleted so that when clisp 
terminates they are automaticaly disposed of?  

thanks,


From gt8134b@prism.gatech.edu  Mon Nov 22 02:16:33 1993
Return-Path: <gt8134b@prism.gatech.edu>
Received: from hydra.gatech.edu (hydra-rich.gatech.edu) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA02598; Mon, 22 Nov 93 02:16:33 +0100
Received: from prism (acme.gatech.edu) by hydra.gatech.edu (5.67a/3.1)
	id AA03518; Sun, 21 Nov 1993 20:07:53 -0500
Received: by prism.gatech.edu (5.67a/1.0)
	id AA05764; Sun, 21 Nov 1993 20:07:44 -0500
From: gt8134b@prism.gatech.edu
Message-Id: <199311220107.AA05764@prism>
Subject: Re: edit/test cycle?
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Sun, 21 Nov 1993 20:07:43 -0500 (EST)
In-Reply-To: <9311220002.AA02240@ma2s2.mathematik.uni-karlsruhe.de> from "Bruno Haible" at Nov 22, 93 01:05:48 am
X-Mailer: ELM [version 2.4 PL22]
Content-Type: text
Content-Length: 3505      

 
> Phil Perucci <philp@universe.digex.net> has an interesting question:
 
> > With CLISP, what is the best edit/test/code/edit, etc cycle (under X)?
 
> - editor: aXe-5.1 (has multiple windows, pull-down menus, parentheses matching)

Emacs has all those, too.  I don't use pull-down menus much.  If I can
dgo a day without touching my mouse I'm happy :-)

Emacs has exceptional Lisp editing facilities (of course).  It does
paren matching, pretty indenting via TAB, and the inferior-lisp
functionality that saves me loads of time.  Basically, you start CLISP
in an Emacs buffer and communicate via that buffer.  However, you
can also use Emacs commands to send code to the inferior (no offense,
Bruno :-) Lisp process without having to go through all the cut-and-paste
or save-and-load drudgery.  It won't work if you're doing screen-oriented
work, but otherwise it's heaven.

Emacs 19 under X has things like syntactical highlighting/colorizing
of code and multiple screens (X windows).  I heartily recommend Emacs
for anyone, but especially for Lisp users.  I recommend 8 MB or more
for Lisp development under X; I have 8 and it works pretty well.  

A (huge) side bonus is that Emacs can be customized by Lisp code.  
I couldn't live without it.

Here are some of the Emacs commands for dealing with other Lisp processes.
You would, of course, bind them to handy keys.

lisp-arglist-command
  Variable: Command to query inferior Lisp for a function's arglist.
lisp-compile-defun
  Function: Compile the current defun in the inferior Lisp process.
lisp-compile-defun-and-go
  Function: Compile the current defun in the inferior Lisp, and switch to its buffer.
lisp-compile-file
  Function: Compile a Lisp file in the inferior Lisp process.
lisp-compile-region
  Function: Compile the current region in the inferior Lisp process.
lisp-compile-region-and-go
  Function: Compile the current region in the inferior Lisp, and switch to its buffer.
lisp-complete-symbol
  Function: Perform completion on Lisp symbol preceding point.  That symbol is
lisp-describe-sym
  Function: Send a command to the inferior Lisp to describe symbol SYM.
lisp-describe-sym-command
  Variable: Command to query inferior Lisp for a variable's documentation.
lisp-eval-defun                             
  Function: Send the current defun to the inferior Lisp process.
lisp-eval-defun-and-go
  Function: Send the current defun to the inferior Lisp, and switch to its buffer.
lisp-eval-last-sexp
  Function: Send the previous sexp to the inferior Lisp process.
lisp-eval-region
  Function: Send the current region to the inferior Lisp process.
lisp-eval-region-and-go
  Function: Send the current region to the inferior Lisp, and switch to its buffer.
lisp-function-doc-command
  Variable: Command to query inferior Lisp for a function's documentation.
lisp-load-file
  Function: Load a Lisp file into the inferior Lisp process.
lisp-send-defun
  Function: Send the current defun to the Lisp process made by M-x run-lisp.
lisp-show-arglist
  Function: Send a query to the inferior Lisp for the arglist for function FN.
lisp-show-function-documentation
  Function: Send a command to the inferior Lisp to give documentation for function FN.
lisp-show-variable-documentation
  Function: Send a command to the inferior Lisp to give documentation for function FN.
lisp-var-doc-command
  Variable: Command to query inferior Lisp for a variable's documentation.
switch-to-lisp
  Function: Switch to the inferior Lisp process buffer.


From P2043742@csdvax.csd.unsw.EDU.AU  Tue Nov 23 06:55:55 1993
Return-Path: <P2043742@csdvax.csd.unsw.EDU.AU>
Received: from csdvax.csd.unsw.EDU.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04360; Tue, 23 Nov 93 06:55:55 +0100
Received: from csdvax.csd.unsw.EDU.AU by csdvax.csd.unsw.EDU.AU (PMDF V4.2-13
 #4042) id <01H5NUAQDDI88X6Z9Y@csdvax.csd.unsw.EDU.AU>; Tue,
 23 Nov 1993 16:50:19 +1000
Date: Tue, 23 Nov 1993 16:50:19 +1000
From: P2043742@csdvax.csd.unsw.EDU.AU
Subject: Problem with load gadget in Garnet2.2.
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Message-Id: <01H5NUAQDN5E8X6Z9Y@csdvax.csd.unsw.EDU.AU>
X-Vms-To: IN%"clisp-list@ma2s2.mathematik.uni-karlsruhe.de"
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Transfer-Encoding: 7BIT

Dear Garnet and Clisp users.

I have some problems with the load gadget of  Garnet2.2.  

My problems are:

1. When the window pops up the files that are in the directory I specified in
the :initial-directory slot of the gadget don't get listed in the Load Window.

2. When I type the name of the file in the load window that are in the
directory I specified Garnet does not load it instead it gives a beep. The
value that is returned by the gadget is not the same I typed in.

My load gadget was:

(create-instance 'Load-Gadget gg:motif-load-gadget
        (:window-top 200)
        (:window-left 400)
        (:initial-directory 
		"/tmp_mnt/net/pg1/p2043742/clisp/garnet2.2/turnint/")
	(:foreground-color opal:motif-green)
	(:selection-function #'turn::Load-Function))

Originaly the file I wanted to read was in that directory. When I typed in the
filename the system beeped as if the file was not in the directory or didn't
exist at all. Then I changed the :initial-directory to 
"/tmp_mnt/net/pg1/p2043742/clisp/garnet2.2/" and now if I type
./turnint/filename the value that is returned by the gadget is #"../filename".
I copyed the file into directory /tmp_mnt/net/pg1/p2043742/clisp/garnet2.2/ and
now the system loads the file.

Could someone explain what is happening hire.

I am using CLISP on SGI Indigo.  
 
Yours,
Bela Pecsek.
From ckclark@MIT.EDU  Sun Nov 28 07:09:23 1993
Return-Path: <ckclark@MIT.EDU>
Received: from MIT.EDU (ATHENA-AS-WELL.MIT.EDU) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10521; Sun, 28 Nov 93 07:09:23 +0100
Received: from HODGE.MIT.EDU by MIT.EDU with SMTP
	id AA26538; Sun, 28 Nov 93 01:08:49 EST
Received: by hodge.MIT.EDU (5.57/4.7) id AA21043; Sun, 28 Nov 93 01:08:34 -0500
Date: Sun, 28 Nov 93 01:08:34 -0500
Message-Id: <9311280608.AA21043@hodge.MIT.EDU>
From: Calvin Clark <ckclark@MIT.EDU>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: *error-handler* 


The variable *error-handler* is not documented in impnotes.txt.  Is it
likely to be preserved in future versions of CLISP?  I would like to be
able to use it in macros like this:

(defmacro with-handled-error (&body body)
  (let ((blockvar (gensym)))
    `(block ,blockvar
	    (let ((*error-handler*
		   #'(lambda (arg1 &rest args)
			     (apply 'format (cons *error-output* args))
			     (return-from ,blockvar nil))))
		 ,@body))))

The macro works like this:

> (with-handled-error (pathname "~nouser"))
UNIX error 2 (ENOENT): No such file or directory
NIL
> (with-handled-error (open "/dev/rrz0a" :direction :input))
UNIX error 13 (EACCES): Permission denied
NIL
>

What are the potential caveats in using *error-handler* this way?
Are there better ways in CLISP to deal with system errors in code?

-Calvin
From hjstein@MATH.HUJI.AC.IL  Sun Nov 28 12:41:38 1993
Return-Path: <hjstein@MATH.HUJI.AC.IL>
Received: from sunset.ma.huji.ac.il by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10661; Sun, 28 Nov 93 12:41:38 +0100
Received: by sunset.ma.huji.ac.il id AA13281
  (5.65c/HUJI 4.152 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Sun, 28 Nov 1993 13:43:06 +0200
Date: Sun, 28 Nov 1993 13:43:06 +0200
From: "Harvey J. Stein" <hjstein@MATH.HUJI.AC.IL>
Message-Id: <199311281143.AA13281@sunset.ma.huji.ac.il>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Maxima problem
Cc: hjstein@MATH.HUJI.AC.IL


I'm sorry to bother 
From hjstein@MATH.HUJI.AC.IL  Sun Nov 28 12:59:48 1993
Return-Path: <hjstein@MATH.HUJI.AC.IL>
Received: from sunset.ma.huji.ac.il by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10758; Sun, 28 Nov 93 12:59:48 +0100
Received: by sunset.ma.huji.ac.il id AA13324
  (5.65c/HUJI 4.152 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Sun, 28 Nov 1993 14:01:16 +0200
Date: Sun, 28 Nov 1993 14:01:16 +0200
From: "Harvey J. Stein" <hjstein@MATH.HUJI.AC.IL>
Message-Id: <199311281201.AA13324@sunset.ma.huji.ac.il>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Maxima problem
Cc: hjstein@MATH.HUJI.AC.IL


(By the way, please excuse the previous message.  I meant to cancel
the message but accidentally sent it instead.)

I just tried to compile & run maxima under clisp.  I got:

*** - EVAL: undefined function SYSTEM::MAKE-WINDOW
Maxima 4.153 Sun Aug 19 12:02:38 CDT 1990 (with enhancements by W. Schelter).

when I tried to run maxima.  It started up, but when trying to do
anything, I get the message:

*** - symbol *WINDOW* has no value

I remember something on this list about this problem, and I recall
that a newer version of CLISP fixes it (I'm running version "September
1993" as reported by (lisp-implementation-version)).  So, I
connected to ma2s2.mathematik.uni-karlsruhe.de to down-load the latest
version of CLISP, and to try again.  However, when I checked the
README file, it said that the newest version of CLISP requires a Linux
kernel of at least .99pl11.  I'm running .99pl10.  Do I really need to
upgrade the kernel before I can run this binary?  Can I compile a
working version of CLISP  under .99pl10?  I figured I'd ask before
doing the download and enduring the pain of compilation.

Thanks,

Harvey Stein
Department of Mathematics
Hebrew University
hjstein@math.huji.ac.il
From haible  Mon Nov 29 21:17:23 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12416; Mon, 29 Nov 93 21:17:23 +0100
Date: Mon, 29 Nov 93 21:17:23 +0100
From: haible (Bruno Haible)
Message-Id: <9311292017.AA12416@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Maxima problem

Harvey Stein too has been bitten by the following problem:

> ... run maxima under clisp.  I got:
> *** - EVAL: undefined function SYSTEM::MAKE-WINDOW
> Maxima 4.153 Sun Aug 19 12:02:38 CDT 1990 (with enhancements by W. Schelter).
> *** - symbol *WINDOW* has no value

Please get and install /pub/lisp/clisp/packages/maxima.clisp.patch1 from
ma2s2.mathematik.uni-karlsruhe.de. The function MAKE-WINDOW sits in
#<PACKAGE SCREEN> since the CLISP version of May 1993.

He asks whether CLISP requires a certain Linux kernel version:

> However, when I checked the
> README file, it said that the newest version of CLISP requires a Linux
> kernel of at least .99pl11.  I'm running .99pl10.  Do I really need to
> upgrade the kernel before I can run this binary?  Can I compile a
> working version of CLISP  under .99pl10?

CLISP can be compiled on any Linux version newer than 0.95.
The binary distribution for Linux is linked against libc-4.4.1 which requires
Linux kernel 0.99.11 or newer.

If you don't want to upgrade your Linux, you will have to recompile CLISP
from source. Just start it, then sit and wait.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Nov 29 21:28:55 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12490; Mon, 29 Nov 93 21:28:55 +0100
Date: Mon, 29 Nov 93 21:28:55 +0100
From: haible (Bruno Haible)
Message-Id: <9311292028.AA12490@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: *error-handler*

Calvin Clark <ckclark@MIT.EDU> defines WITH-HANDLED-ERROR and asks:

> What are the potential caveats in using *error-handler* this way?

None. Your macro is perfectly fine, except that a call
  (fresh-line *error-output*)
before
  (apply #'format *error-output* args)
wouldn't hurt.

> Are there better ways in CLISP to deal with system errors in code?

Not yet.

> The variable *error-handler* is not documented in impnotes.txt.  Is it
> likely to be preserved in future versions of CLISP?

Yes. So many ports of packages depend on it.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From hjstein@MATH.HUJI.AC.IL  Tue Nov 30 06:55:12 1993
Return-Path: <hjstein@MATH.HUJI.AC.IL>
Received: from sunset.ma.huji.ac.il by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13030; Tue, 30 Nov 93 06:55:12 +0100
Received: by sunset.ma.huji.ac.il id AA23680
  (5.65c/HUJI 4.152 for clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>); Tue, 30 Nov 1993 07:56:21 +0200
Date: Tue, 30 Nov 1993 07:56:21 +0200
From: "Harvey J. Stein" <hjstein@MATH.HUJI.AC.IL>
Message-Id: <199311300556.AA23680@sunset.ma.huji.ac.il>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
In-Reply-To: <9311292017.AA12416@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: Maxima problem

Bruno Haible writes:

 > CLISP can be compiled on any Linux version newer than 0.95.  The
 > binary distribution for Linux is linked against libc-4.4.1 which
 > requires Linux kernel 0.99.11 or newer.

Are you sure about this?  I've been running libc-4.4.1 under kernel
0.99.10 for about two months, and I installed libc-4.4.4 about a week
ago.  I haven't noticed any problems...

Harvey Stein

From d93perwi@und.ida.liu.se  Wed Dec  1 20:57:30 1993
Return-Path: <d93perwi@und.ida.liu.se>
Received: from ida.liu.se (curofix.ida.liu.se) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA19569; Wed, 1 Dec 93 20:57:30 +0100
Received: from und.ida.liu.se (astmatix.ida.liu.se) by ida.liu.se (5.65b/ida.minimaster-V1.0b6d5)
	id AA17364; Wed, 1 Dec 93 20:57:01 +0100
Received: from odalix by und.ida.liu.se (5.65b/ida.minimaster-V1.0b6d2)
	id AA10283; Wed, 1 Dec 93 20:56:58 +0100
From: Per Widerlund <d93perwi@und.ida.liu.se>
Received: from odal5 by odalix (5.65b/ida.slave-V1.0b3)
	id AA27572; Wed, 1 Dec 93 20:56:56 +0100
Received: by odal5 (5.65b/ida.slave-V1.0b3)
	id AA20958; Wed, 1 Dec 93 20:56:54 +0100
Date: Wed, 1 Dec 93 20:56:54 +0100
Message-Id: <9312011956.AA20958@odal5>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Questions...

Ok, I have some general and some Amiga-specific questions...

Can I get the - function to accept LONG-FLOAT in any way?
I get 0.0 from (- 3.00000000001 3.0) instead of 0.00000000001.

Where can I find an editor for the Amiga who can handle all the parentheses?
(Something like Emacs would be great but GNU-Emacs is to LARGE for my system.)

Where can I find Amiga-specific CLisp source? 
(Graphic packages and such...)

/Per Widerlund

From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Thu Dec  2 14:32:00 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20340; Thu, 2 Dec 93 14:32:00 +0100
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA11079; Thu, 2 Dec 93 14:31:23 +0100
Date: Thu, 2 Dec 93 14:31:23 +0100
Message-Id: <9312021331.AA11079@inf-wiss.ivp.uni-konstanz.de>
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
To: clisp-list@[129.13.115.2]
Cc: Per Widerlund <d93perwi@und.ida.liu.se>
Subject: Questions...
In-Reply-To: <9312011956.AA20958@odal5>
References: <9312011956.AA20958@odal5>

Per Widerlund writes:

 > Can I get the - function to accept LONG-FLOAT in any way?
 > I get 0.0 from (- 3.00000000001 3.0) instead of 0.00000000001.
Have a look at *DEFAULT-FLOAT-FORMAT* and *READ-DEFAULT-FLOAT-FORMAT*
or use the 3.0001l0 (see CLtLII p.18ff) syntax.

If you need more precision than the default for long-floats, have a
look at (LONG-FLOAT-DIGITS) and (SETF (LONG-FLOAT-DIGITS) nn).

 > Where can I find an editor for the Amiga who can handle all the parentheses?
 > (Something like Emacs would be great but GNU-Emacs is to LARGE for my system.)
Before I got enough memory to run GNU-Emacs, I used MG (aka
MicroGNUEmacs) which comes pretty close. To be found on Fish 352. You can
get a modified version that displays ISO chars from me.

 > Where can I find Amiga-specific CLisp source? 
 > (Graphic packages and such...)
The only Amiga-specific source so far is rexx.lsp. Plans are to port
stdwin to the Amiga, but that's more of C than LISP hacking. Other
plans are the creation of a good (portable, not Amiga-only) alien
package in order to be able to call all .library functions, but no
work has been done on that for some time now. Other plans are to
improve the ARexx interface a little bit. So far the way to do
graphics is to use some ARexx support package that allows access to
any library functions. The next best thing in the future would be the
use of the portable STDWIN library.

 	Joerg Hoehle.
hoehle@inf-wiss.uni-konstanz.de
From marcus@ee.pdx.edu  Thu Dec  2 18:38:42 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA20937; Thu, 2 Dec 93 18:38:42 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA23597; Thu, 2 Dec 93 09:39:20 PST
Date: Thu, 2 Dec 93 09:39:20 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312021739.AA23597@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: trouble porting clisp


I'm trying to bring up clisp-1993-11-08 on m68k NEXSTEP 3.1.

I've configured it so it compiles with few complaints.  I can
compile clisp with the `strict bsd' and posix configurations.  To compile
several files, it was necessary to use SAFETY=3 (with -g, the compiler
(gcc 2.2.2) generated local symbols that weren't defined, which caused the
assembler to fail).  Also, for some reason, NeXT's gcc wouldn't grok
the register ... __asm__("register_name") directives in eval.d...

I've tried the various memory-management options, but none work `out
of the box'.  NeXT doesn't document the mmap functions, and several
of the relevant constants aren't defined.  So the configuration that
I've started working with is the SPVW_MIXED_BLOCKS -- neither the
HAVE_MMAP_ANON or HAVE_MMAP_DEVZERO are defined.

Here is what happens when lisp.run is invoked initially:

*** - The value of *TERMINAL-IO* was not a stream: #<UNBOUND>. It has been changed to #<TERMINAL-STREAM>.
*** - The value of *DEBUG-IO* was not a stream: #<UNBOUND>. It has been changed to #<SYNONYM-STREAM *TERMINAL-IO*>.
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects
*** - No more room for LISP objects: RESET
*** - The value of *STANDARD-OUTPUT* was not a stream: #<UNBOUND>. It has been changed to #<SYNONYM-STREAM *TERMINAL-IO*>.
*** - No more room for LISP objects: RESET
*** - The value of *STANDARD-INPUT* was not a stream: #<UNBOUND>. It has been changed to #<SYNONYM-STREAM *TERMINAL-IO*>.
*** - No more room for LISP objects: RESET

The garbage collection that triggers the `no room' messages is
triggered by an attempt to display the `breakprompt_string', which
apparently isn't initialized yet (the length field in the sstring structure
is 537564620, and the characters arent `Break>'. ).

I'm guessing there is a obvious oversight I'm making that explains this 
behavior.  (BTW, the NeXT installation note isn't valid for 3.0).

Any suggestions?

From marcus@ee.pdx.edu  Fri Dec  3 14:35:54 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21859; Fri, 3 Dec 93 14:35:54 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA17035; Fri, 3 Dec 93 05:36:23 PST
Date: Fri, 3 Dec 93 05:36:23 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312031336.AA17035@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: CLCS for CLISP


Has anyone ported CLCS to CLISP?  If so, does it work with CLISP's CLOS, or
do you need to use PCL?

From hoehle@post.inf-wiss.ivp.uni-konstanz.de  Fri Dec  3 14:48:40 1993
Return-Path: <hoehle@post.inf-wiss.ivp.uni-konstanz.de>
Received: from inf-wiss.ivp.uni-konstanz.de (post.inf-wiss.ivp.uni-konstanz.de) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA21935; Fri, 3 Dec 93 14:48:40 +0100
Received: from stetten.inf-wiss.ivp.uni-konstanz.de by inf-wiss.ivp.uni-konstanz.de (4.1/SMI-4.1)
	id AA14175; Fri, 3 Dec 93 14:47:57 +0100
Date: Fri, 3 Dec 93 14:47:57 +0100
Message-Id: <9312031347.AA14175@inf-wiss.ivp.uni-konstanz.de>
From: hoehle@post.inf-wiss.ivp.uni-konstanz.de (Joerg-Cyril Hoehle)
To: clisp-list@[129.13.115.2]
Subject: CLCS for CLISP
In-Reply-To: <9312031336.AA17035@ursula.ee.pdx.edu>
References: <9312031336.AA17035@ursula.ee.pdx.edu>


Marcus Daniels writes:
 > Has anyone ported CLCS to CLISP?  If so, does it work with CLISP's CLOS, or
 > do you need to use PCL?
I don't think anyone has ported CLCS to CLISP, because that would
require lots of changes to any function generating an error in CLISP,
affecting the LISP and C source files. Lots of work.

However it's still possible to make your own CLCS than can only handle
errors generated by your application. But it won't be able to
intercept CLISP generated ones.

 	Joerg Hoehle.
hoehle@inf-wiss.uni-konstanz.de
From haible  Fri Dec  3 20:26:28 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA27054; Fri, 3 Dec 93 20:26:28 +0100
Date: Fri, 3 Dec 93 20:26:28 +0100
From: haible (Bruno Haible)
Message-Id: <9312031926.AA27054@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLCS for CLISP

Marcus Daniels <marcus@ee.pdx.edu> asks:

> Has anyone ported CLCS to CLISP?

Assuming you are reffering to the condition system contained in the clcs/
subdirectory of the PCL and CLX distribution: I didn't port it because
  a. its implementation of HANDLER-BIND conses too much,
  b. as Joerg Hoehle pointed out, it is not of much use unless CLISP's
     run-time system generates conditions.

> If so, does it work with CLISP's CLOS, or do you need to use PCL?

CLCS doesn't need much more than DEFSTRUCT. It will certainly work with
CLISP's CLOS.

To avoid redundant work, I suggest you wait until the condition system
David Gadbois <gadbois@cs.utexas.edu> has written for CLISP has been
integrated.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From marcus@ee.pdx.edu  Tue Dec  7 14:14:54 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA01518; Tue, 7 Dec 93 14:14:54 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA10668; Tue, 7 Dec 93 05:14:50 PST
Date: Tue, 7 Dec 93 05:14:50 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312071314.AA10668@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: poor make-pipe-stream performance


I'm archiving big records (up to 1.6 meg) as structures, using the
#S() syntax.  It is generated by a simple database interface program
that communicates through standard I/O.  The records consists 
primarily of double-vectors (6 sets, of 300-30000 elements).

My plan was to use make-pipe-input-stream to `read' from this program.

I've found that pipe I/O performance is not as good as AKCL.  Reading
directly from a file yields equivalent performance to AKCL, so I 
don't believe it is a O.S. thing (and there is plenty of resident
memory free in all cases).

CLISP and AKCL are both compiled with gcc-2.5.6 -O6 on Linux.  CLISP
doesn't use shared memory due to the 4MB limitation (in the following
example the memory use is around 7.5 MB).

Here were the results for the largest record (27951 * 6 * double-vector + 
3 identifier fields).
				Real-time 	`Run-time'
CLISP Straight (local) file: 	37.6		35.1
CLISP MKFIFO file:		258.3		151.04
CLISP MAKE-PIPE-INPUT-STREAM	232.9		145.27
AKCL Straight (local) file:	33.0		N/A
AKCL RUN-PROCESS		58.0		N/A

The CLISP MKFIFO/MAKE-PIPE exec'ed way the shell... So the fact that AKCL
uses execvp with no shell wouldn't seem to matter.

Also, I played with using dd to reblock stuff for CLISP, but that didn't
seem to accomplish anything..

I'd be willing to pay the 25 second penalty for such records, if 
I could use pipe, but not a 3 minute penalty.  Are there any buffering
parameters I might play with?  What else could account for this discrepancy?

The subshell approach was intended to be tolerable, hopefully temporary,
substitute for a socket based or Postgres backend (perhaps something like
Picasso or CLING).  Has anyone ever worked out a simple socket oriented 
(i.e. database) interface for CLISP?

I noticed that the only socket support CLISP includes is apparently for
the sake of CLX -- not for general use.  Is there any (technical) reason
not to provide such an interface (other than it could be difficult or
impossible to provide GPL'ed on all platforms).  But a DJGPP network
capable CLISP would come in _very_ handy for all the DOS bound PC crud
around here!

regards,
Marcus Daniels


From michaelw@karl.cs.su.oz.au  Thu Dec  9 07:19:44 1993
Return-Path: <michaelw@karl.cs.su.oz.au>
Received: from joyce.cs.su.OZ.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA03719; Thu, 9 Dec 93 07:19:44 +0100
Message-Id: <9312090619.AA03719@ma2s2.mathematik.uni-karlsruhe.de>
Received: from karl.cs.su.oz.au by joyce.cs.su.OZ.AU (mail from michaelw for
	clisp-list@ma2s2.mathematik.uni-karlsruhe.de)
	with MHSnet; Thu, 09 Dec 1993 17:17:57 +1100
Date: Thu, 9 Dec 1993 17:09:38 +1100
From: michaelw@karl.cs.su.OZ.AU (Michael Wise)
Subject: CLISP to replace XLISP
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

A short while ago I placed a request in news for information about reasonably
sized LISP implementations for use in teaching. For some time I've been
using XLISP, and in fact have found it to be very satisfactory. The
problem with it has been, however, the lack of a CLOS implementation.
A number of people responded to that posting recommending CLISP, so here
I am. Dumb question time. The doc that comes with the system basically
says that CLISP implements CLtL1 plus parts of CLtL2, and parts of
CLOS. As I have now obtained and am currently installing the latst
version (clisp-1993-11-08), do I still need PCL if I want the complete
CLOS? Secondly, is there anywhere a list of exactly which functions
(and options to those functions) are supported.

Thanks
MichaelW

  Michael J. Wise
  Basser Department of Computer Science, F09
  Sydney University, N.S.W. 2006
  Australia
  
  Telephone:	  +61 2 692 4156
  Messages:	  +61 2 692 3423
  Facsimile:	  +61 2 692 3838
  Internet/AARnet:  michaelw@cs.su.oz.au
  UUCP.net:	  {mcvax,nttlab,ukc,uunet}!munnari!karl.cs.su.oz.au!michaelw
  
  --
  "We have met the enemy, and they is us"
        - Pogo (Walt Kelly), 1970

From haible  Thu Dec  9 13:39:41 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04143; Thu, 9 Dec 93 13:39:41 +0100
Date: Thu, 9 Dec 93 13:39:41 +0100
From: haible (Bruno Haible)
Message-Id: <9312091239.AA04143@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: CLISP to replace XLISP

Michael Wise <michaelw@karl.cs.su.OZ.AU> asks:

> Dumb question time. The doc that comes with the system basically
> says that CLISP implements CLtL1 plus parts of CLtL2, and parts of
> CLOS.

That's true.

> is there anywhere a list of exactly which functions
> (and options to those functions) are supported.

See impnotes.txt. Or evaluate  (do-external-symbols (s "CLOS") (print s))

> As I have now obtained and am currently installing the latst version
> (clisp-1993-11-08), do I still need PCL if I want the complete CLOS?

You won't need PCL for most CLOS programs.

Note that PCL isn't a "complete CLOS" either. For example, it doesn't
support the :METHOD option in DEFGENERIC.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Thu Dec  9 17:26:41 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA04807; Thu, 9 Dec 93 17:26:41 +0100
Date: Thu, 9 Dec 93 17:26:41 +0100
From: haible (Bruno Haible)
Message-Id: <9312091626.AA04807@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: poor make-pipe-stream performance

Marcus Daniels <marcus@ee.pdx.edu> compares CLISP pipes to AKCL pipes:

> 				Real-time 	`Run-time'
> CLISP Straight (local) file: 	37.6		35.1
> CLISP MKFIFO file:		258.3		151.04
> CLISP MAKE-PIPE-INPUT-STREAM	232.9		145.27
> AKCL Straight (local) file:	33.0		N/A
> AKCL RUN-PROCESS		58.0		N/A

CLISP buffers regular files, because I can assume that the contents of a
regular file won't change. When CLISP OPENs anything else (socket, fifo,
pipe to another program) I didn't dare to make these streams buffered
since reading too much or writing too late may have undesired effects
(e.g. if one end of such a stream is interactive, or require FINISH-OUTPUT
after every write operation, or even dead-locks).
Thus when you READ from a pipe, READ-CHAR calls the operating system's read()
function once for every character.
It's not fast, but it is safe.

You may use temporary files instead of pipes. Which to use depends on the
amount of data you wish to transport, and on the operating system of course.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From dxs@evolving.com  Fri Dec 10 22:57:10 1993
Return-Path: <dxs@evolving.com>
Received: from csn.org by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06317; Fri, 10 Dec 93 22:57:10 +0100
Received: by csn.org with UUCP id AA27984
  (5.65c/IDA-1.4.4 for clisp-list@ma2s2.mathematik.uni-karlsruhe.de); Fri, 10 Dec 1993 14:55:07 -0700
Received: by kafka (AIX 3.2/UCB 5.64/4.03)
          id AA11773; Fri, 10 Dec 1993 14:31:15 -0700
Date: Fri, 10 Dec 1993 14:31:15 -0700
From: dxs@evolving.com (Dan Stanger)
Message-Id: <9312102131.AA11773@kafka>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: tex conversion to postscript


does anyone have postscrip versions of the cl-protos documentation or
would anybody be willing to run tex on the files that come with cl-protos
for me?  i dont have access to tex on any machine here.
thanks,
dan stanger
dxs@evolving.com
From marcus@ee.pdx.edu  Sat Dec 11 11:01:44 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA06805; Sat, 11 Dec 93 11:01:44 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA22542; Sat, 11 Dec 93 02:00:58 PST
Date: Sat, 11 Dec 93 02:00:58 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312111000.AA22542@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: CLOS questions..


1.  The _impnotes mention that CALL-NEXT-METHOD doesn't take arguments.
Is there a stylistic (etc.) reason one should be not be changing arguments on 
such calls?  For me, it is a fairly common thing to do.

2.  No MAKE-LOAD-FORM/SAVING-SLOTS?

From marcus@ee.pdx.edu  Sun Dec 12 00:25:38 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA07077; Sun, 12 Dec 93 00:25:38 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA25936; Sat, 11 Dec 93 15:24:37 PST
Date: Sat, 11 Dec 93 15:24:37 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312112324.AA25936@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: hash-table puzzlement


Could someone be so kinda as to tell me why this program reports
different values after compilation?

(eval-when (load compile eval)
  (defvar base)
  (defvar copies)
  
  (defstruct base
    (table (make-hash-table :test #'equal) :type hash-table))

  (defstruct copies
    (table1 (make-hash-table :test #'equal) :type hash-table)
    (table2 (make-hash-table :test #'equal) :type hash-table))

  (defun make-and-store-values-in-table ()
    (setq base (make-base))
    (setf (gethash "STR1" (base-table base)) 1)
    (setf (gethash "STR2" (base-table base)) 2)
    (setf (gethash "STR3" (base-table base)) 3)
    base
    )

  (defun make-and-store-values-in-two-tables ()
    (setq copies (make-copies))
    (maphash #'(lambda (key value) 
		 (setf (gethash key (copies-table1 copies)) value)
		 (setf (gethash key (copies-table2 copies)) value))
	     (base-table base))
    copies
    )
  )

(defconstant base-stored `#.(make-and-store-values-in-table))
(defconstant copies-stored `#.(make-and-store-values-in-two-tables))

(terpri)
(princ (gethash "STR1" (copies-table1 copies-stored))) (terpri)
(princ (gethash "STR1" (copies-table2 copies-stored))) (terpri)



From miki@soum.co.jp  Mon Dec 13 15:08:42 1993
Return-Path: <miki@soum.co.jp>
Received: from soumgw.soum.co.jp by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA09913; Mon, 13 Dec 93 15:08:42 +0100
Received: from force.soum.co.jp (root@force.soum.co.jp [133.112.48.2]) by soumgw.soum.co.jp (8.5+2.0Wb2/3.019Wb-SOUM-GW) with SMTP
	id XAA01822; Mon, 13 Dec 1993 23:06:03 +0900
Received: by force.soum.co.jp (5.67+1.6W/2.8Wb-SOUM-MASTER) with SMTP
	id AA12386; Mon, 13 Dec 93 23:06:00 JST
Message-Id: <9312131406.AA12386@force.soum.co.jp>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Cc: miki@soum.co.jp
Subject: Compiling 1993-11-08 version on DEC Alpha OSF/1 V1.3
Date: Mon, 13 Dec 1993 23:05:59 +0900
From: Susumu Miki <miki@soum.co.jp>

    As CLISP is provided as a binary-kit for DEC Alpha running OSF/1,
I've tried to compile it from source files, version 1993-11-08.

    I've installed gcc-2.5.5, and done all steps just like described
as unix/INSTALL and unix/PLATFORMS as follows:

1. Perform "./target alpha-dec-osf1-with-gcc" in the top directory of
the source tree.

2. Change directory as "cd alpha-dec-osf1-with-gcc" and type
"./makemake > makefile"

3. Edit makefile for adding "-DNO_SINGLEMAP -DNO_MULTIMAP_SHM -DWIDE"
to CFLAGS.

4. Type "make config.lsp" and edit it for site specific informations.

5. Type "make"

Then I get clisp.run, that dumps core in the last step:

----
./lisp.run -x "(load \"init.lsp\") (saveinitmem) (exit)"
[2]  + 20679 exit 1     make $* > make.log 2>&1
sh: 22894 Memory fault - core dumped
*** Exit 139
Stop.
----

    Would someone tell me how can I get an working executable file
from the source files distributed.

    Thanks in advance.


	Susumu Miki		         miki@soum.co.jp
Research and Development Dept.  SOUM Corporation   VOICE: 03-5453-1251
From haible  Mon Dec 13 22:50:17 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10448; Mon, 13 Dec 93 22:50:17 +0100
Date: Mon, 13 Dec 93 22:50:17 +0100
From: haible (Bruno Haible)
Message-Id: <9312132150.AA10448@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Compiling 1993-11-08 version on DEC Alpha OSF/1 V1.3

>     As CLISP is provided as a binary-kit for DEC Alpha running OSF/1,
> I've tried to compile it from source files, version 1993-11-08.

Support for DEC Alpha wasn't finished in that release. Since you are so
desperately trying to compile it yourself, I made the necessary diffs
(relative to clisp version 1993-11-08) available on ma2s2:
/pub/lisp/clisp/binaries/decalpha-osf/decalpha-diffs.z .


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Dec 13 23:02:12 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10557; Mon, 13 Dec 93 23:02:12 +0100
Date: Mon, 13 Dec 93 23:02:12 +0100
From: haible (Bruno Haible)
Message-Id: <9312132202.AA10557@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: hash-table puzzlement

Marcus Daniels <marcus@ee.pdx.edu> asks:

> Could someone be so kinda as to tell me why this program reports
> different values after compilation?
> ...
> (defconstant copies-stored `#.(make-and-store-values-in-two-tables))

This is a bug in the READ function: When it reads a hash-table and
resolves #n= / #n# references it forgets to recompute the hash codes
and to reorganize the hash table. This bug will be fixed in the next
release. Thank you for reporting it. Use  (gc)  as a temporary workaround.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From miki@soum.co.jp  Tue Dec 14 02:10:31 1993
Return-Path: <miki@soum.co.jp>
Received: from soumgw.soum.co.jp by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10676; Tue, 14 Dec 93 02:10:31 +0100
Received: from force.soum.co.jp (root@force.soum.co.jp [133.112.48.2]) by soumgw.soum.co.jp (8.5+2.0Wb2/3.019Wb-SOUM-GW) with SMTP
	id KAA15052; Tue, 14 Dec 1993 10:07:50 +0900
Received: by force.soum.co.jp (5.67+1.6W/2.8Wb-SOUM-MASTER) with SMTP
	id AA14899; Tue, 14 Dec 93 10:07:47 JST
Message-Id: <9312140107.AA14899@force.soum.co.jp>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Subject: Re: Compiling 1993-11-08 version on DEC Alpha OSF/1 V1.3 
In-Reply-To: Your message of "Mon, 13 Dec 1993 22:53:42 +0100."
             <9312132150.AA10448@ma2s2.mathematik.uni-karlsruhe.de> 
Date: Tue, 14 Dec 1993 10:07:46 +0900
From: Susumu Miki <miki@soum.co.jp>

In article <9312132150.AA10448@ma2s2.mathematik.uni-karlsruhe.de>, haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible) writes:
Bruno> Errors-To: haible@ma2s2.mathematik.uni-karlsruhe.de
Bruno> Originator: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Bruno> Errors-To: haible@ma2s2.mathematik.uni-karlsruhe.de
Bruno> Version: 5.5 -- Copyright (c) 1991/92, Anastasios Kotsikonas

> Support for DEC Alpha wasn't finished in that release. Since you are so
> desperately trying to compile it yourself, I made the necessary diffs
> (relative to clisp version 1993-11-08) available on ma2s2:
> /pub/lisp/clisp/binaries/decalpha-osf/decalpha-diffs.z .

I've taken this via ftp, and will try again on it.  Thank you very
much for your efforts.


	Susumu Miki		         miki@soum.co.jp
Research and Development Dept.  SOUM Corporation   VOICE: 03-5453-1251
From michaelw@karl.cs.su.oz.au  Tue Dec 14 02:32:50 1993
Return-Path: <michaelw@karl.cs.su.oz.au>
Received: from joyce.cs.su.OZ.AU by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA10732; Tue, 14 Dec 93 02:32:50 +0100
Message-Id: <9312140132.AA10732@ma2s2.mathematik.uni-karlsruhe.de>
Received: from karl.cs.su.oz.au by joyce.cs.su.OZ.AU (mail from michaelw for
	clisp-list@ma2s2.mathematik.uni-karlsruhe.de)
	with MHSnet; Tue, 14 Dec 1993 12:30:13 +1100
Date: Tue, 14 Dec 1993 12:24:27 +1100
From: michaelw@karl.cs.su.OZ.AU (Michael Wise)
Subject: porting CLISP to MIPS R4000 boxes running RISC/os 5.01
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

I'm not having an easy time at all porting CLISP to our MIPS R4000 boxes
running RISC/os 5.01. Problem is that RISC/os 5.01 tries to cover
three different flavours of UNIX: svr3, svr4 and bsd43, which is a
nice idea in principle. However, what happens in practice is that
confusion arises among the various include files which have a nasty
habit of laughing at each other. (Been there, done that!) Has anyone
gotten to the other side of this exercise; I'd very much like to get
on with looking at CLISP itself!

Cheers
MichaelW

From miki@soum.co.jp  Wed Dec 15 05:58:49 1993
Return-Path: <miki@soum.co.jp>
Received: from soumgw.soum.co.jp by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA12077; Wed, 15 Dec 93 05:58:49 +0100
Received: from force.soum.co.jp (root@force.soum.co.jp [133.112.48.2]) by soumgw.soum.co.jp (8.5+2.0Wb2/3.019Wb-SOUM-GW) with SMTP
	id NAA26117; Wed, 15 Dec 1993 13:55:52 +0900
Received: by force.soum.co.jp (5.67+1.6W/2.8Wb-SOUM-MASTER) with SMTP
	id AA12944; Wed, 15 Dec 93 13:55:46 JST
Message-Id: <9312150455.AA12944@force.soum.co.jp>
To: clisp-list <clisp-list@ma2s2.mathematik.uni-karlsruhe.de>
Cc: miki@soum.co.jp
Subject: Re: Compiling 1993-11-08 version on DEC Alpha OSF/1 V1.3 
In-Reply-To: Your message of "Mon, 13 Dec 1993 22:53:42 +0100."
             <9312132150.AA10448@ma2s2.mathematik.uni-karlsruhe.de> 
Date: Wed, 15 Dec 1993 13:55:45 +0900
From: Susumu Miki <miki@soum.co.jp>

In article <9312132150.AA10448@ma2s2.mathematik.uni-karlsruhe.de>
	haible@ma2s2.mathematik.uni-karlsruhe.de (Bruno Haible) writes:

> Support for DEC Alpha wasn't finished in that release. Since you are so
> desperately trying to compile it yourself, I made the necessary diffs
> (relative to clisp version 1993-11-08) available on ma2s2:
> /pub/lisp/clisp/binaries/decalpha-osf/decalpha-diffs.z .

    I applied this patch, and get executable "lisp.run" which does not
dumps core, now.  It passes "make test", but failes "make testsuite".
It tells me as follows:

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
EQL-OK: T
(SUBTYPEP 'BIT-VECTOR 'VECTOR) 
EQL-OK: T
(SUBTYPEP 'SIMPLE-BIT-VECTOR 'SIMPLE-VECTOR) 
EQL-OK: NIL
T
Bye.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    Then, I tried on the same version for "sun4m" machines and get the
same result....  Is this a bug in the current version of CLisp???


	Susumu Miki	<miki@soum.co.jp>
Research and Development Dept.  SOUM Corporation   VOICE: 03-5453-1251
From haible  Wed Dec 15 20:50:04 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA13018; Wed, 15 Dec 93 20:50:04 +0100
Date: Wed, 15 Dec 93 20:50:04 +0100
From: haible (Bruno Haible)
Message-Id: <9312151950.AA13018@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: Compiling 1993-11-08 version on DEC Alpha OSF/1 V1.3

Susumu Miki <miki@soum.co.jp>:

> It passes "make test", but failes "make testsuite".
> Is this a bug in the current version of CLisp???

If everything else works and only the testsuite fails, then it is
a bug in the testsuite :-)
The suite/*.erg files contain the tests that failed.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Fri Dec 17 19:31:00 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA15871; Fri, 17 Dec 93 19:31:00 +0100
Date: Fri, 17 Dec 93 19:31:00 +0100
From: haible (Bruno Haible)
Message-Id: <9312171831.AA15871@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list
Subject: distributing CLISP

You all know that CLISP is free software. One can download it via FTP.
What do those do who don't have FTP access? They try to get it on floppy
disks.

I am not willing to distribute CLISP on disks to normal users (not
co-developers) myself. If someone is willing to do that, he can. By GPL
he can take any fee the customer is willing to pay.

If you want to send disks with CLISP on them to people all over the world,
please let me know. I'll forward you the addresses of people who contact me.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From marcus@ee.pdx.edu  Sat Dec 18 21:17:15 1993
Return-Path: <marcus@ee.pdx.edu>
Received: from ursula.ee.pdx.edu by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA18059; Sat, 18 Dec 93 21:17:15 +0100
Received: by ursula.ee.pdx.edu (4.1/SMI-4.1)
	id AA03259; Sat, 18 Dec 93 12:14:55 PST
Date: Sat, 18 Dec 93 12:14:55 PST
From: marcus@ee.pdx.edu (Marcus Daniels)
Message-Id: <9312182014.AA03259@ursula.ee.pdx.edu>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: single floats, NaNs


I inconsistently get NaNs sometimes when reading negative single-floats
of the form ``-629.25'' ``-800.1'' , etc..  When I read them as
-629.25d0, it works.  Why for is this thing?
From kaehms@sedbsvr.se.ssd.lmsc.lockheed.com  Wed Dec 22 23:29:06 1993
Return-Path: <kaehms@sedbsvr.se.ssd.lmsc.lockheed.com>
Received: from eagle.is.lmsc.lockheed.com by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA23326; Wed, 22 Dec 93 23:29:06 +0100
Received: from sedbsvr.ssd.lmsc.lockheed.com by eagle.is.lmsc.lockheed.com (5.65/Ultrix4.3-C)
	id AA03442; Wed, 22 Dec 1993 14:24:14 -0800
Message-Id: <9312222224.AA03442@eagle.is.lmsc.lockheed.com>
Received: by sedbsvr.se.ssd.lmsc.lockheed.com
	(1.36.108.7/16.2) id AA22343; Wed, 22 Dec 1993 14:24:54 -0800
From: Bob Kaehms <kaehms@sedbsvr.se.ssd.lmsc.lockheed.com>
Subject: Building CLisp on an HP-700 8.07?? (help)
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Wed, 22 Dec 93 14:24:54 PST
Cc: haible@ma2s2.mathematik.uni-karlsruhe.de
Mailer: Elm [revision: 70.30]

Hi,

I've just started to try and build Clisp (clisp-1993-11-08) on an HP 
700 running 8.07.  I'm running into problems.

After running the all-to-ascii program (it looked like a couple of the files
had illegal characters, or unrecognizable ones in the filename and thus were 
not ptocessed by the program), the target program, configuring the config.lsp
file, and running make, I get a few warnings about pointers and a funny one
in various files s.a.:

debug.d: 1125: warning- Illegal ^A, ^B, ^C, or ^D in source.  Changed to space.
<otherfiles> 1125: warning- Illegal ^A, ^B, ^C, or ^D in source. ...

...it finally chokes with the following few messages:

	cc -Aa -z -D_HPUX_SOURCE  -c misc.c
	unix.d: 445: warning- Redefinition of macro TCSETATTR.
	cc -Aa -z -D_HPUX_SOURCE  -c predtype.c
	unix.d: 445: warning- Redefinition of macro TCSETATTR.
	cc -Aa -z -D_HPUX_SOURCE  -c symbol.c
	unix.d: 445: warning- Redefinition of macro TCSETATTR.
	cc -Aa -z -D_HPUX_SOURCE  -c lisparit0.c
	unix.d: 445: warning- Redefinition of macro TCSETATTR.
	lisparit0.d: 14584: Overflowed replacement buffer.
		*** Error code 1

I've tried defining CC both as

cc -Aa -z -D_HPUX_SOURCE as well as c89 -z -D_HPUX_SOURCE


...Any hints would be appreciated!


From michaelw@karl.cs.su.oz.au  Mon Dec 27 09:26:51 1993
Return-Path: <michaelw@karl.cs.su.oz.au>
Received: from joyce.cs.su.OZ.AU ([129.78.8.208]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26535; Mon, 27 Dec 93 09:26:51 +0100
Message-Id: <9312270826.AA26535@ma2s2.mathematik.uni-karlsruhe.de>
Received: from karl.cs.su.oz.au by joyce.cs.su.OZ.AU (mail from michaelw for
	clisp-list@ma2s2.mathematik.uni-karlsruhe.de)
	with MHSnet; Mon, 27 Dec 1993 19:21:48 +1100
Date: Mon, 27 Dec 1993 19:10:16 +1100
From: michaelw@karl.cs.su.OZ.AU (Michael Wise)
Subject: the joys (?!!) of porting CLISP
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de

So far I have tried porting it to R4000 RISCos 5.01, got almost no way
down the track before it was total confused and hope less (due to the
multiple universes being supported - best with the bsd flavour);
R3000 with RISCos 4.52 - slightly better, but still got bogged.
I then decided to move to the new Sparc Sun (running Solaris 2.XX)
because we're about the move from the MIPS's in any case to a Sun
multiprocessor. This attempt has been more successful.
Main discovery was to define:
LD_LIBRARY_PATH=/usr/ccs/lib:/usr/lib:/usr/openwin/lib
and for good measure, change
 -Y P,/usr/ccs/lib:/usr/lib
to
 -Y P,/usr/ccs/lib:/usr/lib:/usr/openwin/lib
in the definition for lisp.run .

I've now gotten stuck when trying to make interpreted.mem .
After getting started ok and loading defseq.lsp, backquot.lsp,
defmacro.lsp, macros1.lsp, macros2.lsp ... the following happens:

;; Loading file defs1.lsp ...*** Error code 139
make: Fatal error: Command failed for target `interpreted.mem'


Any bright ideas? BTW, any way that the header can be suppressed at run
time. The problem is that when the system will be run in batch mode
(when student assignments are being marked), the extra output generated
will have to be filtered or it will confuse the marking program. It's there-
fore far easier to suppress it in the first place.

Cheers
MichaelW

From dogan@srdc.metu.edu.tr  Mon Dec 27 16:51:55 1993
Return-Path: <dogan@srdc.metu.edu.tr>
Received: from srdc.metu.edu.tr ([144.122.230.11]) by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA26781; Mon, 27 Dec 93 16:51:55 +0100
Received: from karakoy.metu.edu.tr (karakoy.srdc.metu.edu.tr) by srdc.metu.edu.tr (4.1/SMI-4.1)
	id AA22710; Mon, 27 Dec 93 17:47:51 +0200
From: dogan@srdc.metu.edu.tr (Hakan DOGAN)
Message-Id: <9312271447.AA22710@srdc.metu.edu.tr>
Subject: compiler of clisp
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Date: Mon, 27 Dec 1993 17:47:58 +0300 (GMT+3:00)
In-Reply-To: <9312222224.AA03442@eagle.is.lmsc.lockheed.com> from "Bob Kaehms" at Dec 22, 93 11:32:35 pm
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 160       

      hi . I want to learn if there's a compiler for clisp to run on unix
 workstations (sun or dec alpha) ?   
						Hakan DOGAN
						dogan@srdc.metu.edu.tr

From haible  Mon Dec 27 21:45:28 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA28465; Mon, 27 Dec 93 21:45:28 +0100
Date: Mon, 27 Dec 93 21:45:28 +0100
From: haible (Bruno Haible)
Message-Id: <9312272045.AA28465@ma2s2.mathematik.uni-karlsruhe.de>
To: <dogan@srdc.metu.edu.tr>, clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: compiler of clisp

Hakan Dogan asks:

> there's a compiler for clisp to run on unix workstations (sun or dec alpha) ?

CLISP includes a compiler, and there are binaries for Suns and DEC Alphas
on ma2s2.mathematik.uni-karlsruhe.de.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Mon Dec 27 21:54:54 1993
Return-Path: <haible>
Received: by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA28596; Mon, 27 Dec 93 21:54:54 +0100
Date: Mon, 27 Dec 93 21:54:54 +0100
From: haible (Bruno Haible)
Message-Id: <9312272054.AA28596@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2.mathematik.uni-karlsruhe.de
Subject: Re: the joys (?!!) of porting CLISP

> BTW, any way that the header can be suppressed at run time.

"man clisp" tells you about the command line option -q which stands for
"quiet".


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
From haible  Tue Dec 28 18:39:06 1993
Return-Path: <haible>
Received: from ma2s3.mathematik.uni-karlsruhe.de by ma2s2.mathematik.uni-karlsruhe.de (4.1/SMI-4.0)
	id AA29955; Tue, 28 Dec 93 18:39:06 +0100
Date: Tue, 28 Dec 93 18:39:06 +0100
From: haible (Bruno Haible)
Message-Id: <9312281739.AA29955@ma2s2.mathematik.uni-karlsruhe.de>
To: clisp-list@ma2s2
Subject: Re: the joys (?!!) of porting CLISP

Michael Wise experienced problems when building clisp on Solaris 2.3:

> ;; Loading file defs1.lsp ...*** Error code 139
> make: Fatal error: Command failed for target `interpreted.mem'

He had an unusable C compiler and should upgrade to the newest gcc.


                    Bruno Haible
                    haible@ma2s2.mathematik.uni-karlsruhe.de
