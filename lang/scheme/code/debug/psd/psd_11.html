From pk@kaulushaikara.cs.tut.fi Thu Feb  3 17:52:52 EST 1994
Article: 8209 of comp.lang.scheme
Xref: glinda.oz.cs.cmu.edu comp.lang.scheme:8209
Newsgroups: comp.lang.scheme
Path: honeydew.srv.cs.cmu.edu!fs7.ece.cmu.edu!europa.eng.gtefsd.com!uunet!pipex!sunic!news.funet.fi!news.cs.tut.fi!news.cs.tut.fi!pk
From: pk@kaulushaikara.cs.tut.fi (Kellom{ki Pertti)
Subject: Patch to psd-1.1
Message-ID: <PK.94Feb2101829@kaulushaikara.cs.tut.fi>
Sender: usenet@news.cs.tut.fi (#Kotilo NEWS system )
Nntp-Posting-Host: kaulushaikara.cs.tut.fi
Organization: Tampere University of Technology
Distribution: comp
Date: Wed, 2 Feb 1994 08:18:29 GMT
Lines: 85

Here is a patch removing some problems with psd-1.1, especially when
used with Scheme 48. Thanks to Jonathan Rees for poiting them out. The
patch fixes two problems: references to an unused variable
*psd-previous-line*, and the correct number of arguments to
write-char.

Psd is a portable Scheme debugger. It is available as
ftp.cs.tut.fi:/pub/src/languages/schemes/psd-1.1.tar.Z. It seems that
the version in the Scheme repository is a bit dated, but I'll send Oz
mail about that.
--
Pertti Kellomaki

*** primitives.scm.old	Wed Feb  2 10:13:00 1994
--- primitives.scm	Wed Feb  2 08:41:50 1994
***************
*** 1,5 ****
  ;;;;
! ;;;; $Id: primitives.scm,v 1.4 1993/09/27 10:51:10 pk Exp $
  ;;;;
  ;;;; psd -- a portable Scheme debugger, version 1.1
  ;;;; Copyright (C) 1992 Pertti Kellomaki, pk@cs.tut.fi
--- 1,5 ----
  ;;;;
! ;;;; $Id: primitives.scm,v 1.6 1994/02/02 06:41:48 pk Exp $
  ;;;;
  ;;;; psd -- a portable Scheme debugger, version 1.1
  ;;;; Copyright (C) 1992 Pertti Kellomaki, pk@cs.tut.fi
***************
*** 30,35 ****
--- 30,42 ----
  
  ;;;;
  ;;;; $Log: primitives.scm,v $
+ ;;;; Revision 1.6  1994/02/02  06:41:48  pk
+ ;;;; Removed references to *psd-previous-line*. Thanks to Jonathan Rees.
+ ;;;;
+ ;;;; Revision 1.5  1994/02/02  06:35:24  pk
+ ;;;; Corrected the number of arguments to write-char. Thanks to Jonathan
+ ;;;; Rees.
+ ;;;;
  ;;;; Revision 1.4  1993/09/27  10:51:10  pk
  ;;;; Added psd-break to the list of visible global symbols.
  ;;;;
***************
*** 272,278 ****
  	    ((psd-clear-breakpoint) `(,psd-clear-breakpoint))
  	    ((psd-reset) `(,psd-reset))
  	    ((psd-break) `(,psd-break))
- 	    ((*psd-previous-line*) `(,*psd-previous-line*))
  	    ((*psd-stepping-by-line*) `(,*psd-stepping-by-line*))
  	    ((*psd-coming-from-line*) `(,*psd-coming-from-line*))
  	    ((*psd-break?*) `(,*psd-break?*))
--- 279,284 ----
***************
*** 288,294 ****
  	    ;; psd globals
  	    ((psd-set-breakpoint) (set! psd-set-breakpoint psd-temp2)) 
  	    ((psd-reset) (set! psd-reset psd-temp2)) 
- 	    ((*psd-previous-line*) (set! *psd-previous-line* psd-temp2)) 
  	    ((*psd-stepping-by-line*) (set! *psd-stepping-by-line* psd-temp2)) 
  	    ((*psd-coming-from-line*) (set! *psd-coming-from-line* psd-temp2)) 
  	    ((*psd-break?*) (set! *psd-break?* psd-temp2)) 
--- 294,299 ----
***************
*** 795,801 ****
  		 (,vector-set! (3 ,(assert 1 vector?) ,(assert 2 integer?)))
  		 (,vector? (1))
  		 (,write (1) (2 ,(assert 2 output-port?)))
! 		 (,write-char (0) (1 ,(assert 1 output-port?)))
  		 (,zero? (1 ,(assert 1 number?)) (name zero?)))))
  
  	   (lambda (combination . debug-arguments)
--- 800,806 ----
  		 (,vector-set! (3 ,(assert 1 vector?) ,(assert 2 integer?)))
  		 (,vector? (1))
  		 (,write (1) (2 ,(assert 2 output-port?)))
! 		 (,write-char (1) (2 ,(assert 2 output-port?)))
  		 (,zero? (1 ,(assert 1 number?)) (name zero?)))))
  
  	   (lambda (combination . debug-arguments)
--
Pertti Kellom\"aki (TeX format)  #       These opinions are mine, 
  Tampere Univ. of TeXnology     #              ALL MINE !
      Software Systems Lab       #  (but go ahead and use them, if you like)


