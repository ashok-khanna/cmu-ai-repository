<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!-- Common Lisp HyperSpec (TM), version 3.0 generated by kmp on Thu, 2-May-1996 10:21am EDT -->
<HTML>

<!-- Mirrored from www.cs.cmu.edu/afs/cs/project/ai-repository/ai/util/html/hyperspec/HyperSpec/Body/mac_defmethod.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Oct 2021 10:18:29 GMT -->
<HEAD>
<TITLE>CLHS: Macro DEFMETHOD</TITLE>
<META HTTP-EQUIV="Author" CONTENT="Kent M. Pitman">
<META HTTP-EQUIV="Organization" CONTENT="The Harlequin Group Limited">
<LINK REL=TOP HREF="../FrontMatter/index-2.html">
<LINK REL=COPYRIGHT HREF="../FrontMatter/About-HyperSpec.html#Legal">
<LINK REL=DISCLAIMER HREF="../FrontMatter/About-HyperSpec.html#Disclaimer">
<LINK REL=PREV HREF="mac_defgeneric.html">
<LINK REL=UP HREF="sec_the_objects_dictionary.html">
<LINK REL=NEXT HREF="acc_find-class.html">
</HEAD>
<BODY BGCOLOR="#c0c0c0">
<H1><A REV=MADE HREF="http://www.harlequin.com/"><IMG ALT="[HARLEQUIN]" SRC="../Graphics/Harlequin-Small.gif" ALIGN=Bottom></A><A REL=TOP HREF="../FrontMatter/index-2.html"><IMG ALT="[Common Lisp HyperSpec (TM)]" SRC="../Graphics/HyperSpec-Small.gif" ALIGN=Bottom></A> <A REL=PREV HREF="mac_defgeneric.html"><IMG ALT="[Previous]" SRC="../Graphics/Prev.gif" ALIGN=Bottom></A><A REL=UP HREF="sec_the_objects_dictionary.html"><IMG ALT="[Up]" SRC="../Graphics/Up.gif" ALIGN=Bottom></A><A REL=NEXT HREF="acc_find-class.html"><IMG ALT="[Next]" SRC="../Graphics/Next.gif" ALIGN=Bottom></A></H1>

<HR>

<A NAME="defmethod"><I>Macro</I> <B>DEFMETHOD</B></A> <P>
 <P>
<P><B>Syntax:</B><P>
 <P>

<B>defmethod</B> <I><I>function-name</I> {<I>method-qualifier</I>}* <I>specialized-lambda-list</I> [[<I>declaration</I><B>*</B> | <I>documentation</I>]] <I>form</I><B>*</B></I><P> =&gt; <I>new-method</I><P>
 <P>
<P><I>function-name</I>::= {<A REL=DEFINITION HREF="glo_s.html#symbol"><I>symbol</I></A> | <TT>(setf <A REL=DEFINITION HREF="glo_s.html#symbol"></TT><I>symbol</I><TT></A>)</TT>} <P><I>method-qualifier</I>::= <A REL=DEFINITION HREF="glo_n.html#non-list"><I>non-list</I></A> <P><PRE>
specialized-lambda-list::= ({var | (var parameter-specializer-name)}* 
                            [&amp;optional {var | (var [initform [supplied-p-parameter] ])}*] 
                            [&amp;rest var] 
                            [&amp;key{var | ({var | (<A REL=DEFINITION HREF="glo_k.html#keyword">keyword</A>var)} [initform [supplied-p-parameter] ])}*
                                 [&amp;allow-other-keys] ] 
                            [&amp;aux {var | (var [initform] )}*] ) 
parameter-specializer-name::= <A REL=DEFINITION HREF="glo_s.html#symbol">symbol</A> | (eql eql-specializer-form)
</PRE>
 <P> <P>
<P><B>Arguments and Values:</B><P>
 <P>
<I>declaration</I>---a <A REL=DEFINITION HREF="sym_declare.html#declare"><B>declare</B></A> <A REL=DEFINITION HREF="glo_e.html#expression"><I>expression</I></A>; not evaluated. <P>
<I>documentation</I>---a <A REL=DEFINITION HREF="glo_s.html#string"><I>string</I></A>; not evaluated. <P>
<I>var</I>---a <A REL=DEFINITION HREF="glo_v.html#variable"><I>variable</I></A> <A REL=DEFINITION HREF="glo_n.html#name"><I>name</I></A>. <P>
<I>eql-specializer-form</I>---a <A REL=DEFINITION HREF="glo_f.html#form"><I>form</I></A>. <P>
<I>Form</I>---a <A REL=DEFINITION HREF="glo_f.html#form"><I>form</I></A>. <P>
<I>Initform</I>---a <A REL=DEFINITION HREF="glo_f.html#form"><I>form</I></A>. <P>
<I>Supplied-p-parameter</I>---variable name. <P>
<I>new-method</I>---the new <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> <A REL=DEFINITION HREF="glo_o.html#object"><I>object</I></A>. <P>
<P><B>Description:</B><P>
 <P>
The macro <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> defines a <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> on a <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A>. <P>
If <TT>(fboundp </TT><I>function-name</I><TT>)</TT> is <A REL=DEFINITION HREF="any_nil.html#nil"><B>nil</B></A>, a <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> is created with default values for the argument precedence order (each argument is more specific than the arguments to its right in the argument list), for the generic function class (the <A REL=DEFINITION HREF="glo_c.html#class"><I>class</I></A> <A REL=DEFINITION HREF="syscla_standa_ric-function.html#standard-generic-function"><B>standard-generic-function</B></A>), for the method class (the <A REL=DEFINITION HREF="glo_c.html#class"><I>class</I></A> <A REL=DEFINITION HREF="syscla_standard-method.html#standard-method"><B>standard-method</B></A>), and for the method combination type (the standard method combination type). The <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> is congruent with the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> being defined; if the <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> form mentions keyword arguments, the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> will mention <TT> ..... key</TT> (but no keyword arguments). If <I>function-name</I> names an <A REL=DEFINITION HREF="glo_o.html#ordinary_function"><I>ordinary function</I></A>, a <A REL=DEFINITION HREF="glo_m.html#macro"><I>macro</I></A>, or a <A REL=DEFINITION HREF="glo_s.html#special_operator"><I>special operator</I></A>, an error is signaled. <P>
If a <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> is currently named by <I>function-name</I>, the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> must be congruent with the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A>. If this condition does not hold, an error is signaled. For a definition of congruence in this context, see <A REL=CHILD HREF="sec_7-6-4.html">Section 7.6.4 (Congruent Lambda-lists for all Methods of a Generic Function)</A>. <P>
Each <I>method-qualifier</I> argument is an <A REL=DEFINITION HREF="glo_o.html#object"><I>object</I></A> that is used by method combination to identify the given <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A>. The method combination type might further restrict what a method <A REL=DEFINITION HREF="glo_q.html#qualifier"><I>qualifier</I></A> can be. The standard method combination type allows for <A REL=DEFINITION HREF="glo_u.html#unqualified_method"><I>unqualified methods</I></A> and <A REL=DEFINITION HREF="glo_m.html#method"><I>methods</I></A> whose sole <A REL=DEFINITION HREF="glo_q.html#qualifier"><I>qualifier</I></A> is one of the keywords :<TT>before</TT>, :<TT>after</TT>, or :<TT>around</TT>. <P>
The <I>specialized-lambda-list</I> argument is like an ordinary <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> except that the <A REL=DEFINITION HREF="glo_n.html#name"><I>names</I></A> of required parameters can be replaced by specialized parameters. A specialized parameter is a list of the form <TT>(</TT><I>var</I><TT> </TT><I>parameter-specializer-name</I><TT>)</TT>. Only required parameters can be specialized. If <I>parameter-specializer-name</I> is a <A REL=DEFINITION HREF="glo_s.html#symbol"><I>symbol</I></A> it names a <A REL=DEFINITION HREF="glo_c.html#class"><I>class</I></A>; if it is a <A REL=DEFINITION HREF="glo_l.html#list"><I>list</I></A>, it is of the form <TT>(eql </TT><I>eql-specializer-form</I><TT>)</TT>. The parameter specializer name <TT>(eql </TT><I>eql-specializer-form</I><TT>)</TT> indicates that the corresponding argument must be <A REL=DEFINITION HREF="fun_eql.html#eql"><B>eql</B></A> to the <A REL=DEFINITION HREF="glo_o.html#object"><I>object</I></A> that is the value of <I>eql-specializer-form</I> for the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> to be applicable. The <I>eql-specializer-form</I> is evaluated at the time that the expansion of the <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> macro is evaluated. If no <A REL=DEFINITION HREF="glo_p.html#parameter_specializer_name"><I>parameter specializer name</I></A> is specified for a given required parameter, the <A REL=DEFINITION HREF="glo_p.html#parameter_specializer"><I>parameter specializer</I></A> defaults to the <A REL=DEFINITION HREF="glo_c.html#class"><I>class</I></A> <A REL=DEFINITION HREF="syscla_t.html#t"><B>t</B></A>. For further discussion, see <A REL=CHILD HREF="sec_7-6-2.html">Section 7.6.2 (Introduction to Methods)</A>. <P>
The <I>form</I> arguments specify the method body. The body of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> is enclosed in an <A REL=DEFINITION HREF="glo_i.html#implicit_block"><I>implicit block</I></A>. If <I>function-name</I> is a <A REL=DEFINITION HREF="glo_s.html#symbol"><I>symbol</I></A>, this block bears the same <A REL=DEFINITION HREF="glo_n.html#name"><I>name</I></A> as the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A>. If <I>function-name</I> is a <A REL=DEFINITION HREF="glo_l.html#list"><I>list</I></A> of the form <TT>(setf </TT><I>symbol</I><TT>)</TT>, the <A REL=DEFINITION HREF="glo_n.html#name"><I>name</I></A> of the block is <I>symbol</I>. <P>
The <A REL=DEFINITION HREF="glo_c.html#class"><I>class</I></A> of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> <A REL=DEFINITION HREF="glo_o.html#object"><I>object</I></A> that is created is that given by the method class option of the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> on which the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> is defined. <P>
If the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> already has a <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> that agrees with the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> being defined on <A REL=DEFINITION HREF="glo_p.html#parameter_specializer"><I>parameter specializers</I></A> and <A REL=DEFINITION HREF="glo_q.html#qualifier"><I>qualifiers</I></A>, <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> replaces the existing <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> with the one now being defined. For a definition of agreement in this context. see <A REL=CHILD HREF="sec_7-6-3.html">Section 7.6.3 (Agreement on Parameter Specializers and Qualifiers)</A>. <P>
The <A REL=DEFINITION HREF="glo_p.html#parameter_specializer"><I>parameter specializers</I></A> are derived from the <A REL=DEFINITION HREF="glo_p.html#parameter_specializer_name"><I>parameter specializer names</I></A> as described in <A REL=CHILD HREF="sec_7-6-2.html">Section 7.6.2 (Introduction to Methods)</A>. <P>
The expansion of the <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> macro ``refers to'' each specialized parameter (see the description of <A REL=DEFINITION HREF="dec_ignorecm_ignorable.html#ignore"><B>ignore</B></A> within the description of <A REL=DEFINITION HREF="sym_declare.html#declare"><B>declare</B></A>). This includes parameters that have an explicit <A REL=DEFINITION HREF="glo_p.html#parameter_specializer_name"><I>parameter specializer name</I></A> of <A REL=DEFINITION HREF="any_t.html#t"><B>t</B></A>. This means that a compiler warning does not occur if the body of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> does not refer to a specialized parameter, while a warning might occur if the body of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> does not refer to an unspecialized parameter. For this reason, a parameter that specializes on <A REL=DEFINITION HREF="any_t.html#t"><B>t</B></A> is not quite synonymous with an unspecialized parameter in this context. <P>
 Declarations at the head of the method body that apply to the method's <A REL=DEFINITION HREF="glo_l.html#lambda_variable"><I>lambda variables</I></A> are treated as <A REL=DEFINITION HREF="glo_b.html#bound_declaration"><I>bound declarations</I></A> whose <A REL=DEFINITION HREF="glo_s.html#scope"><I>scope</I></A> is the same as the corresponding <A REL=DEFINITION HREF="glo_b.html#binding"><I>bindings</I></A>. <P>
Declarations at the head of the method body that apply to the functional bindings of <A REL=DEFINITION HREF="locfun_call-next-method.html#call-next-method"><B>call-next-method</B></A> or <A REL=DEFINITION HREF="locfun_next-method-p.html#next-method-p"><B>next-method-p</B></A> apply to references to those functions within the method body <I>forms</I>. Any outer <A REL=DEFINITION HREF="glo_b.html#binding"><I>bindings</I></A> of the <A REL=DEFINITION HREF="glo_f.html#function_name"><I>function names</I></A> <A REL=DEFINITION HREF="locfun_call-next-method.html#call-next-method"><B>call-next-method</B></A> and <A REL=DEFINITION HREF="locfun_next-method-p.html#next-method-p"><B>next-method-p</B></A>, and declarations associated with such <A REL=DEFINITION HREF="glo_b.html#binding"><I>bindings</I></A> are <I>shadowed</I>[2] within the method body <I>forms</I>. <P>
The <A REL=DEFINITION HREF="glo_s.html#scope"><I>scope</I></A> of <A REL=DEFINITION HREF="glo_f.html#free_declaration"><I>free declarations</I></A> at the head of the method body is the entire method body, which includes any implicit local function definitions but excludes <A REL=DEFINITION HREF="glo_i.html#initialization_form"><I>initialization forms</I></A> for the <A REL=DEFINITION HREF="glo_l.html#lambda_variable"><I>lambda variables</I></A>.  <P>
 <A REL=DEFINITION HREF="#defmethod"><B>defmethod</B></A> is not required to perform any compile-time side effects. In particular, the <A REL=DEFINITION HREF="glo_m.html#method"><I>methods</I></A> are not installed for invocation during compilation. An <A REL=DEFINITION HREF="glo_i.html#implementation"><I>implementation</I></A> may choose to store information about the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> for the purposes of compile-time error-checking (such as checking the number of arguments on calls, or noting that a definition for the function name has been seen).  <P>
 <I>Documentation</I> is attached as a <A REL=DEFINITION HREF="glo_d.html#documentation_string"><I>documentation string</I></A> to the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> <A REL=DEFINITION HREF="glo_o.html#object"><I>object</I></A>.  <P>
<P><B>Examples:</B> None.
 <P>
<P><B>Affected By:</B><P>
 <P>
The definition of the referenced <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A>. <P>
<P><B>Exceptional Situations:</B><P>
 <P>
If <I>function-name</I> names an <A REL=DEFINITION HREF="glo_o.html#ordinary_function"><I>ordinary function</I></A>, a <A REL=DEFINITION HREF="glo_m.html#macro"><I>macro</I></A>, or a <A REL=DEFINITION HREF="glo_s.html#special_operator"><I>special operator</I></A>, an error of <A REL=DEFINITION HREF="glo_t.html#type"><I>type</I></A> <A REL=DEFINITION HREF="contyp_error.html#error"><B>error</B></A> is signaled. <P>
If a <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A> is currently named by <I>function-name</I>, the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_m.html#method"><I>method</I></A> must be congruent with the <A REL=DEFINITION HREF="glo_l.html#lambda_list"><I>lambda list</I></A> of the <A REL=DEFINITION HREF="glo_g.html#generic_function"><I>generic function</I></A>, or an error of <A REL=DEFINITION HREF="glo_t.html#type"><I>type</I></A> <A REL=DEFINITION HREF="contyp_error.html#error"><B>error</B></A> is signaled. <P>
 <P><B>See Also:</B><P>
 <P>
<A REL=DEFINITION HREF="mac_defgeneric.html#defgeneric"><B>defgeneric</B></A>, <A REL=DEFINITION HREF="stagenfun_doc_umentationcp.html#documentation"><B>documentation</B></A>, <A REL=CHILD HREF="sec_7-6-2.html">Section 7.6.2 (Introduction to Methods)</A>, <A REL=CHILD HREF="sec_7-6-4.html">Section 7.6.4 (Congruent Lambda-lists for all Methods of a Generic Function)</A>, <A REL=CHILD HREF="sec_7-6-3.html">Section 7.6.3 (Agreement on Parameter Specializers and Qualifiers)</A>, <A REL=CHILD HREF="sec_3-4-11.html">Section 3.4.11 (Syntactic Interaction of Documentation Strings and Declarations)</A> <P>
<P><B>Notes:</B> None.
 <P>
 <P>
<P><HR>The following <A REL=META HREF="../FrontMatter/X3J13-Issues.html">X3J13 cleanup issues</A>, <I>not part of the specification</I>, apply to this section:<P><UL><LI> <A REL=CHILD HREF="../Issues/iss135.html">DOCUMENTATION-FUNCTION-BUGS:FIX</A><LI> <A REL=CHILD HREF="../Issues/iss059.html">COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</A><LI> <A REL=CHILD HREF="../Issues/iss107.html">DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</A><LI> <A REL=CHILD HREF="../Issues/iss097.html">DECLS-AND-DOC</A><P></UL>
<HR>

<A REL=NAVIGATOR HREF="../FrontMatter/Starting-Points.html"><IMG ALT="[Starting Points]" SRC="../Graphics/Starting-Points.gif" ALIGN=Bottom></A><A REL=TOC HREF="../FrontMatter/Chapter-Index.html"><IMG ALT="[Contents]" SRC="../Graphics/Contents.gif" ALIGN=Bottom></A><A REL=INDEX HREF="../FrontMatter/Master-Index.html"><IMG ALT="[Index]" SRC="../Graphics/Index.gif" ALIGN=Bottom></A><A REL=INDEX HREF="../FrontMatter/Symbol-Index.html"><IMG ALT="[Symbols]" SRC="../Graphics/Symbols.gif" ALIGN=Bottom></A><A REL=GLOSSARY HREF="sec_26-1.html"><IMG ALT="[Glossary]" SRC="../Graphics/Glossary.gif" ALIGN=Bottom></A><A HREF="../Issues/Issues-Categorized.html"><IMG ALT="[Issues]" SRC="../Graphics/Issues.gif" ALIGN=Bottom></A><BR>

<A REL=COPYRIGHT HREF="../FrontMatter/About-HyperSpec.html#Legal"><I>Copyright 1996, The Harlequin Group Limited.  All Rights Reserved.</I></A><P>
</BODY>

<!-- Mirrored from www.cs.cmu.edu/afs/cs/project/ai-repository/ai/util/html/hyperspec/HyperSpec/Body/mac_defmethod.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Oct 2021 10:18:29 GMT -->
</HTML>
