<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!-- Common Lisp HyperSpec (TM), version 3.0 generated by kmp on Thu, 2-May-1996 10:21am EDT -->
<HTML>

<!-- Mirrored from www.cs.cmu.edu/afs/cs/project/ai-repository/ai/util/html/hyperspec/HyperSpec/Issues/iss177-writeup.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Oct 2021 10:19:54 GMT -->
<HEAD>
<TITLE>CLHS: Issue FUNCTION-TYPE-KEY-NAME Writeup</TITLE>
<META HTTP-EQUIV="Author" CONTENT="Kent M. Pitman">
<META HTTP-EQUIV="Organization" CONTENT="The Harlequin Group Limited">
<LINK REL=TOP HREF="../FrontMatter/index-2.html">
<LINK REL=COPYRIGHT HREF="../FrontMatter/About-HyperSpec.html#Legal">
<LINK REL=DISCLAIMER HREF="../FrontMatter/About-HyperSpec.html#Disclaimer">
<LINK REL=PREV HREF="iss176-writeup.html">
<LINK REL=UP HREF="iss177.html">
<LINK REL=NEXT HREF="iss178-writeup.html">
</HEAD>
<BODY BGCOLOR="#c0c0c0">
<H1><A REV=MADE HREF="http://www.harlequin.com/"><IMG ALT="[HARLEQUIN]" SRC="../Graphics/Harlequin-Small.gif" ALIGN=Bottom></A><A REL=TOP HREF="../FrontMatter/index-2.html"><IMG ALT="[Common Lisp HyperSpec (TM)]" SRC="../Graphics/HyperSpec-Small.gif" ALIGN=Bottom></A> <A REL=PREV HREF="iss176-writeup.html"><IMG ALT="[Previous]" SRC="../Graphics/Prev.gif" ALIGN=Bottom></A><A REL=UP HREF="iss177.html"><IMG ALT="[Up]" SRC="../Graphics/Up.gif" ALIGN=Bottom></A><A REL=NEXT HREF="iss178-writeup.html"><IMG ALT="[Next]" SRC="../Graphics/Next.gif" ALIGN=Bottom></A></H1>

<HR>



<H2>Issue FUNCTION-TYPE-KEY-NAME Writeup</H2>

<PRE><B>Issue:</B>         <A HREF="iss177.html">FUNCTION-TYPE-KEY-NAME</A><P>
<B>References:</B>    CLtL p.47-48, 61<P>
<B>Category:</B>      CLARIFICATION, CHANGE<P>
<B>Edit history:</B>  Version 1, 23-Nov-1987 Sandra Loosemore<P>
               Version 2, 15-Jan-1988 Sandra Loosemore <P>
	           (from comments by Kent Pitman)<P>
               Version 3, 13-Feb-88 Masinter<P>
Related issues: <A HREF="iss178.html">FUNCTION-TYPE-REST-LIST-ELEMENT</A>, <P>
                <A HREF="iss208.html">KEYWORD-ARGUMENT-NAME-PACKAGE</A><P>
                FUNCTION-ARGUMENT-TYPE-SEMANTICS<P>
<P>
<P>
<B>Problem description:<P>
</B><P>
The <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier list is provided to allow declaration of function<P>
argument types and return value types.  This type specifier uses a syntax<P>
similar to the usual <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list syntax to specify which types go with which<P>
<A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list variables.  However, there is a problem with <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMkey"><B>&amp;KEY</B></A> <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> variables<P>
because CLtL does not specify how the types specified in the <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A><P>
declaration are matched up to either the actual arguments passed to the<P>
function, or the <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> variables in the function definition (since the ordering<P>
of keyword arguments is arbitrary).<P>
<P>
<B>Proposal (FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD):<P>
</B><P>
(1) Specify that the <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMkey"><B>&amp;KEY</B></A> parameters in a <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list<P>
should be supplied as lists of the form (&lt;keyword&gt; &lt;type&gt;).  The &lt;keyword&gt; must<P>
be a valid keyword-name symbol as must be supplied in the actual arguments of a<P>
call. (This is usually a symbol in the keyword package, but, as per<P>
<A HREF="iss208.html">KEYWORD-ARGUMENT-NAME-PACKAGE</A>, not necessarily so.) <P>
<P>
(2) Allow <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMallow-other-keys"><B>&amp;ALLOW-OTHER-KEYS</B></A> to appear in a <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list. <P>
<P>
The interpretation of such declarations is that, when <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMkey"><B>&amp;KEY</B></A> is given in a<P>
<A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier <A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list, it is safe to assume that the &amp;KEYs given<P>
are exhaustive unless <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMallow-other-keys"><B>&amp;ALLOW-OTHER-KEYS</B></A> is present. <P>
<P>
<A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMallow-other-keys"><B>&amp;ALLOW-OTHER-KEYS</B></A> is an indication that other keyword arguments may actually be<P>
supplied and, if supplied, may be used. <P>
<P>
<B>Example:<P>
</B><P>
The type of the function <A REL=DEFINITION HREF="../Body/fun_make-list.html#make-list"><B>MAKE-LIST</B></A> could be declared as:<P>
<P>
   (<A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> <A REL=DEFINITION HREF="../Body/fun_make-list.html#make-list"><B>MAKE-LIST</B></A> ((<A REL=DEFINITION HREF="../Body/syscla_integer.html#integer"><B>INTEGER</B></A> 0) <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMkey"><B>&amp;KEY</B></A> (:INITIAL-ELEMENT T)) <A REL=DEFINITION HREF="../Body/any_list.html#list"><B>LIST</B></A>)<P>
<P>
<B>Rationale:<P>
</B><P>
(1) This specifies a direct correspondence between the argument type and its<P>
matching keyword.  All of the information is in one place, and the user does not<P>
have to remember (or even know) the order in which <A REL=DEFINITION HREF="../Body/sec_3-4-1.html#AMkey"><B>&amp;KEY</B></A> arguments appear in the<P>
actual function definition.<P>
<P>
(2) This is probably an oversight in the original specification.<P>
<P>
<B>Current practice:<P>
</B><P>
Many Common Lisp implementations currently ignore <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type declarations.<P>
The situation regarding type specifications for keyword arguments is so<P>
ambiguous that few users attempt to use them.<P>
<P>
<B>Cost to Implementors:<P>
</B><P>
Implementations that ignore the <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier or keyword arguments in<P>
a <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier may continue to do so.  This proposal should not<P>
involve massive amounts of code to be rewritten.<P>
<P>
<B>Cost to users:<P>
</B><P>
Because the current situation is so ambiguous, <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifiers and<P>
particularly the specification of keyword argument types are not widely used.<P>
However, since this is an incompatible change, it would be nice if<P>
implementations check for, and warn about, old-style usage.<P>
<P>
<B>Cost of non-adoption:<P>
</B><P>
If nothing is done, the <A REL=DEFINITION HREF="../Body/any_function.html#function"><B>FUNCTION</B></A> type specifier will continue to be of limited<P>
use for its intended purpose.<P>
<P>
<B>Benefits:<P>
</B><P>
Adopting the proposal will clear up an area of confusion in the language design.<P>
<P>
<B>Esthetics:<P>
</B><P>
The syntax is fairly obvious and is analogous to the (&lt;keyword&gt; &lt;variable&gt;)<P>
<A REL=DEFINITION HREF="../Body/any_lambda.html#lambda"><B>lambda</B></A> list syntax.<P>
<P>
<B>Discussion:<P>
</B><P>
The exact semantics of function declarations and the types of arguments  is<P>
still under discussion, as are several other issues dealing with declarations.<P>
However, this issue seemed separable.<P>
<P>
</PRE>

<HR>

<A REL=NAVIGATOR HREF="../FrontMatter/Starting-Points.html"><IMG ALT="[Starting Points]" SRC="../Graphics/Starting-Points.gif" ALIGN=Bottom></A><A REL=TOC HREF="../FrontMatter/Chapter-Index.html"><IMG ALT="[Contents]" SRC="../Graphics/Contents.gif" ALIGN=Bottom></A><A REL=INDEX HREF="../FrontMatter/Master-Index.html"><IMG ALT="[Index]" SRC="../Graphics/Index.gif" ALIGN=Bottom></A><A REL=INDEX HREF="../FrontMatter/Symbol-Index.html"><IMG ALT="[Symbols]" SRC="../Graphics/Symbols.gif" ALIGN=Bottom></A><A REL=GLOSSARY HREF="../Body/sec_26-1.html"><IMG ALT="[Glossary]" SRC="../Graphics/Glossary.gif" ALIGN=Bottom></A><A HREF="Issues-Categorized.html"><IMG ALT="[Issues]" SRC="../Graphics/Issues.gif" ALIGN=Bottom></A><BR>

<A REL=COPYRIGHT HREF="../FrontMatter/About-HyperSpec.html#Legal"><I>Copyright 1996, The Harlequin Group Limited.  All Rights Reserved.</I></A><P>
</BODY>

<!-- Mirrored from www.cs.cmu.edu/afs/cs/project/ai-repository/ai/util/html/hyperspec/HyperSpec/Issues/iss177-writeup.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Oct 2021 10:19:54 GMT -->
</HTML>
