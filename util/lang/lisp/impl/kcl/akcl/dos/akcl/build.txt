
Disclaimer: This software is distributed WITHOUT ANY WARRANTY; without
even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. 

This file explains the steps to build AKCL-DOS.

Files can be obtained from :

	math.utexas.edu
	login as :  user : ftp
		password : your email address


1. A minimal version of DJGPP needs to be installed on the computer.
   DJGPP can be obtained from many sites :

	barnacle.erc.clarkson.edu	 128.153.28.12  pub/msdos/djgpp
	math.utexas.edu			 128.83.133.215 pub/msdos/djgpp (*)
	ftp.uni-koeln.de		 134.95.128.208 msdos/gnuprogs/djgpp(*)
	wowbagger.pc-labor.uni-bremen.de 134.102.228.9  pub/msdos/djgpp
	src.doc.ic.ac.uk		 146.169.2.1    ibmpc/djgpp
	ftp.mcc.ac.uk			 130.88.200.7   pub/djgpp
	UK.AC.MCC.FTPJ (JANET)	user<guest>	<PUB>djgpp
	ftp.eb.ele.tue.nl		 131.155.40.15  pub/pc/gnu/gcc-pl* & gcc-newest
	wuarchive.wustl.edu:

	(*) Please do not access during working hours
	    (7am - 6pm their local time)

   A - The following files are needed in order to have a minimum version of
       DJGPP (names are for version 1.09)

	- unzip50.exe	: needed to unzip the files from math.utexas.edu
			  old pkunzip 1.10 will not work. If you get files
			  from other sites check that they don't mention
			  if you need the new unzip50.exe
			  This unzip will be needed to unzip AKCL files
	- ndmake45.zip	: make program, others make programs might not work
			  with AKCL makefiles.
	- djdev109.zip
	- djg16222.zip
	- djgas138.zip
	- djgcc222.zip
	- wmemu100.zip

   B - Installing DJGPP :

	1- Create a directory \DJGPP

	   mkdir \DJGPP

	2- cd to that directory

	   cd \DJGPP

	3- Unzip the files from A.
	   Supposing that you have the files from A in the \tmp directory,
	   the commands will be :

	   \tmp\unzip50 -d \tmp\djdev109.zip
	   \tmp\unzip50 -d \tmp\djg16222.zip
	   \tmp\unzip50 -d \tmp\djgas138.zip
	   \tmp\unzip50 -d \tmp\djgcc222.zip
	   \tmp\unzip50 -d \tmp\wmemu100.zip
	   \tmp\unzip50 -d \tmp\ndmake45.zip

	4- Copy the file \djgpp\contrib\gcc16\gcc.exe to \djgpp\bin

	   copy \djgpp\contrib\gcc16\gcc.exe \djgpp\bin

	5- Copy the file \djgpp\contrib\emu387wm\emu387 to \djgpp\emu387

	   copy \djgpp\contrib\emu387wm\emu387 \djgpp\emu387

	6- To save disk space, you can get rid of the \djgpp\contrib\gcc16
	   directory and the file \djgpp\contrib\wmemu387\emu387.

	   del \djgpp\contrib\gcc16\*.*
	   (answer Y)
	   rmdir \djgpp\contrib\gcc16

	   del \djgpp\contrib\emu387wm\emu387

	7- The files int \tmp can be deleted

	   del \tmp\djdev109.zip
	   del \tmp\djg16222.zip
	   del \tmp\djgas138.zip
	   del \tmp\djgcc222.zip
	   del \tmp\wmemu100.zip
	   del \tmp\ndmake45.zip

	8- DJGPP configuration will be described later with AKCL configuration

2. AKCL source installation

   A - List of needed files for AKCL :

	- unzip50.exe	: needed to unzip the files
	- ndmake.zip	: make program, others makes might not work
	- akclsrc.zip	: AKCL source + documentation
	+ akclexe.zip	: saved_kcl needed if there are some AKCL core lisp
			  files that need to be compiled
	+ akcldoc.zip	: Documentation files (doc, *.el)
	- go32sexe.zip	: executable of go32 + emu387 (SIGINT + SIGFPE)
			  DJGPP and Go32 configuration file
	+ go32ssrc.zip	: Source of the previous
	- djgppconf.zip : DJGPP configuration (also in go32sexe.zip)
	- Readme.DOS	: Readme file
	- INDEX.lst	: Index and description of the files, versions
	- Build.dos	: Instructions to build a version from scratch
			  (files to fetch, procedure, ...)

	(+) : These are optional files

	PS : You need the following unix utilites : mv.exe, rm.exe and cat.exe

   B - Installing AKCL source :


	1- Create a directory \AKCL

	   mkdir \AKCL

	2- cd to that directory

	   cd \AKCL

	3- Unzip the files from A.
	   Supposing that you have the files from A in the \tmp directory,
	   the commands will be :

	   \tmp\unzip50 -d \tmp\akclsrc.zip
	   \tmp\unzip50 -d \tmp\akclexe.zip
	   \tmp\unzip50 -d \tmp\go32sexe.zip

	4- The files int \tmp can be deleted to save space :

	   del \tmp\akclsrc.zip
	   del \tmp\akclexe.zip
	   del \tmp\go32sexe.zip

3. Configuration

   A - Configuring DJGPP

	1- Look at the file \akcl\djgppenv.bat and modify it to refer to
	   your directory structure.

	2- Run djgppenv.bat ONCE each time you start your computer. If you
	   have the message like :

		insufficient environment space

	   edit your config.sys file and increase the environment size.

   B - Building the system

	1- cd to the akcl main directory

	   cd \akcl

	2- Start to build akcl

	   add-defs.bat dos-go32

	   xbin\dosmake.bat

	   The build procedure takes 2 hours on a 20 Mhz 386SX with 2 Megs
	   of RAM and around 1 hour on a 33 Mhz 386 with 3 Megs of extended
	   memory and 4 Megs of write through cache.

	3- After the build procedure is over, a file named saved_kc will
	   reside in the \akcl\unixport directory.

	5- Edit the file \akcl\akcl.bat and check that the akcl directory
	   path is right.

	4- To start AKCL, type :

	   \akcl\unixport\akcl.bat

   C - Miscellaneous configuration

	1- Accessing the documentation
	   By default, akcl looks for its documentation in the /akcl/doc
	   directory. If you have another configuration, redefine the
	   following function in your init.lsp file.

	   (defun si::src-path (x) (si::string-concatenate "/akcl/" x))

	   Example : If the documentation is in e:/akcl617/doc.

	   (defun si::src-path (x) (si::string-concatenate "e:/akcl617/" x))

4. Send comments and bug reports about this port of AKCL to :

	rcharif@math.utexas.edu or
	wfs@math.utexas.edu


